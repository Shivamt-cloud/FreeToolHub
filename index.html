<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeToolHub - Free Online Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Core Tool Scripts -->
    <script src="src/js/calculator.js"></script>
    <script src="src/js/percentage-calculator.js"></script>
    <script src="src/js/bmi-calculator.js"></script>
    <script src="src/js/age-calculator.js"></script>
    <script src="src/js/unit-converter.js"></script>
    <script src="src/js/currency-converter.js"></script>
    <script src="src/js/color-converter.js"></script>
    <script src="src/js/base64-encoder.js"></script>
    <script src="src/js/advanced-password-generator.js"></script>
    <script src="src/js/advanced-css-js-minifier.js"></script>
    <script src="src/js/advanced-regex-tester.js"></script>
    <script src="src/js/advanced-background-editor.js?v=6"></script>


    
    <script>
        // Modal functions - moved to head for immediate availability
        function openModal(modalId) {
            console.log('Opening modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                console.log('Modal opened successfully:', modalId);
                
                // Initialize specific tools when their modals are opened
                console.log('Initializing tool for modal:', modalId);
                
                if (modalId === 'unit') {
                    if (typeof initializeUnitConverter === 'function') {
                        console.log('Initializing Unit Converter...');
                        initializeUnitConverter();
                    } else {
                        console.error('initializeUnitConverter function not found');
                    }
                } else if (modalId === 'currency') {
                    if (typeof initializeCurrencyConverter === 'function') {
                        console.log('Initializing Currency Converter...');
                        initializeCurrencyConverter();
                    } else {
                        console.error('initializeCurrencyConverter function not found');
                    }
                } else if (modalId === 'color') {
                    if (typeof initializeColorConverter === 'function') {
                        console.log('Initializing Color Converter...');
                        initializeColorConverter();
                    } else {
                        console.error('initializeColorConverter function not found');
                    }
                } else if (modalId === 'base64') {
                    if (typeof initializeBase64Encoder === 'function') {
                        console.log('Initializing Base64 Encoder...');
                        initializeBase64Encoder();
                    } else {
                        console.error('initializeBase64Encoder function not found');
                    }
                
                } else if (modalId === 'password') {
                    if (typeof initializeAdvancedPasswordGenerator === 'function') {
                        console.log('Initializing Advanced Password Generator...');
                        initializeAdvancedPasswordGenerator();
                    } else {
                        console.error('initializeAdvancedPasswordGenerator function not found');
                    }
                } else if (modalId === 'qr') {
                    if (typeof initializeAdvancedQRGenerator === 'function') {
                        console.log('Initializing Advanced QR Code Generator...');
                        initializeAdvancedQRGenerator().catch(error => {
                            console.error('Failed to initialize QR Generator:', error);
                        });
                    } else {
                        console.error('initializeAdvancedQRGenerator function not found');
                    }
                } else if (modalId === 'uuid') {
                    if (typeof initializeAdvancedUUIDGenerator === 'function') {
                        console.log('Initializing Advanced UUID Generator...');
                        initializeAdvancedUUIDGenerator().catch(error => {
                            console.error('Failed to initialize UUID Generator:', error);
                        });
                    } else {
                        console.error('initializeAdvancedUUIDGenerator function not found');
                    }
                } else if (modalId === 'hash') {
                    if (typeof initializeAdvancedHashGenerator === 'function') {
                        console.log('Initializing Advanced Hash Generator...');
                        initializeAdvancedHashGenerator().catch(error => {
                            console.error('Failed to initialize Hash Generator:', error);
                        });
                    } else {
                        console.error('initializeAdvancedHashGenerator function not found');
                    }
                } else if (modalId === 'wordcount') {
                    if (typeof initializeAdvancedWordCounter === 'function') {
                        console.log('Initializing Advanced Word Counter...');
                        initializeAdvancedWordCounter().catch(error => {
                            console.error('Failed to initialize Word Counter:', error);
                        });
                    } else {
                        console.error('initializeAdvancedWordCounter function not found');
                    }
                } else if (modalId === 'case') {
                    if (typeof initializeAdvancedCaseConverter === 'function') {
                        console.log('Initializing Advanced Case Converter...');
                        initializeAdvancedCaseConverter().catch(error => {
                            console.error('Failed to initialize Case Converter:', error);
                        });
                    } else {
                        console.error('initializeAdvancedCaseConverter function not found');
                    }
                } else if (modalId === 'url') {
                    if (typeof initializeAdvancedURLProcessor === 'function') {
                        console.log('Initializing Advanced URL Processor...');
                        initializeAdvancedURLProcessor().catch(error => {
                            console.error('Failed to initialize URL Processor:', error);
                        });
                    } else {
                        console.error('initializeAdvancedURLProcessor function not found');
                    }
                } else if (modalId === 'json') {
                    if (typeof initializeAdvancedJSONProcessor === 'function') {
                        console.log('Initializing Advanced JSON Processor...');
                        initializeAdvancedJSONProcessor().catch(error => {
                            console.error('Failed to initialize JSON Processor:', error);
                        });
                    } else {
                        console.error('initializeAdvancedJSONProcessor function not found');
                    }
                } else if (modalId === 'calculator') {
                    if (typeof initializeAdvancedCalculator === 'function') {
                        console.log('Initializing Advanced Calculator...');
                        initializeAdvancedCalculator();
                    } else {
                        console.error('initializeAdvancedCalculator function not found');
                    }
                } else if (modalId === 'percentage') {
                    if (typeof initializePercentageCalculator === 'function') {
                        console.log('Initializing Percentage Calculator...');
                        initializePercentageCalculator();
                    } else {
                        console.error('initializePercentageCalculator function not found');
                    }
                } else if (modalId === 'bmi') {
                    if (typeof initializeBMICalculator === 'function') {
                        console.log('Initializing BMI Calculator...');
                        initializeBMICalculator();
                    } else {
                        console.error('initializeBMICalculator function not found');
                    }
                } else if (modalId === 'age') {
                    if (typeof initializeAgeCalculator === 'function') {
                        console.log('Initializing Age Calculator...');
                        initializeAgeCalculator();
                    } else {
                        console.error('initializeAgeCalculator function not found');
                    }
                } else if (modalId === 'bmi') {
                    if (typeof initializeBMICalculator === 'function') {
                        console.log('Initializing BMI Calculator...');
                        initializeBMICalculator();
                    } else {
                        console.error('initializeBMICalculator function not found');
                    }
                } else if (modalId === 'percentage') {
                    if (typeof initializePercentageCalculator === 'function') {
                        console.log('Initializing Percentage Calculator...');
                        initializePercentageCalculator();
                    } else {
                        console.error('initializePercentageCalculator function not found');
                    }
                } else if (modalId === 'timestamp') {
                    if (typeof initializeAdvancedTimestampConverter === 'function') {
                        console.log('Initializing Advanced Timestamp Converter...');
                        initializeAdvancedTimestampConverter().catch(error => {
                            console.error('Failed to initialize Timestamp Converter:', error);
                        });
                    } else {
                        console.error('initializeAdvancedTimestampConverter function not found');
                    }
                } else if (modalId === 'timezone') {
                    if (typeof initializeAdvancedTimezoneConverter === 'function') {
                        console.log('Initializing Advanced Timezone Converter...');
                        initializeAdvancedTimezoneConverter().catch(error => {
                            console.error('Failed to initialize Timezone Converter:', error);
                        });
                    } else {
                        console.error('initializeAdvancedTimezoneConverter function not found');
                    }
                } else if (modalId === 'lorem') {
                    if (typeof initializeAdvancedLoremGenerator === 'function') {
                        console.log('Initializing Advanced Lorem Generator...');
                        initializeAdvancedLoremGenerator().catch(error => {
                            console.error('Failed to initialize Lorem Generator:', error);
                        });
                    } else {
                        console.error('initializeAdvancedLoremGenerator function not found');
                    }
                } else if (modalId === 'markdown') {
                    if (typeof initializeAdvancedMarkdownPreview === 'function') {
                        console.log('Initializing Advanced Markdown Preview...');
                        initializeAdvancedMarkdownPreview().catch(error => {
                            console.error('Failed to initialize Markdown Preview:', error);
                        });
                    } else {
                        console.error('initializeAdvancedMarkdownPreview function not found');
                    }
                } else if (modalId === 'background') {
                    if (typeof initializeBackgroundEditor === 'function') {
                        console.log('Initializing Advanced Background Editor...');
                        initializeBackgroundEditor();
                    } else {
                        console.error('initializeBackgroundEditor function not found');
                    }
                }
            } else {
                console.error('Modal not found:', modalId);
            }
        }

        function closeModal(modalId) {
            console.log('Closing modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
                console.log('Modal closed successfully:', modalId);
            } else {
                console.error('Modal not found:', modalId);
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Tool-specific functions - moved to head for immediate availability
        
        // Advanced Calculator Functions
        function initializeAdvancedCalculator() {
            if (!window.advancedCalc) {
                window.advancedCalc = new AdvancedCalculator();
            }
        }

        function switchCalcMode(mode) {
            // Hide all modes
            document.querySelectorAll('.calc-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.calc-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'basic') {
                document.getElementById('basic-calc').classList.remove('hidden');
                document.getElementById('basic-tab').classList.add('active');
            } else if (mode === 'advanced') {
                document.getElementById('advanced-calc').classList.remove('hidden');
                document.getElementById('advanced-tab').classList.add('active');
                initializeAdvancedCalculator();
            } else if (mode === 'scientific') {
                document.getElementById('scientific-calc').classList.remove('hidden');
                document.getElementById('scientific-tab').classList.add('active');
                initializeAdvancedCalculator();
            } else if (mode === 'complex') {
                document.getElementById('complex-calc').classList.remove('hidden');
                document.getElementById('complex-tab').classList.add('active');
                initializeAdvancedCalculator();
            } else if (mode === 'numerical') {
                document.getElementById('numerical-calc').classList.remove('hidden');
                document.getElementById('numerical-tab').classList.add('active');
                initializeAdvancedCalculator();
            }
        }

        function addToExpr(value) {
            const input = document.getElementById('expr-input');
            if (input) input.value += value;
        }

        function clearExpression() {
            const input = document.getElementById('expr-input');
            const result = document.getElementById('expr-result');
            if (input) input.value = '';
            if (result) result.classList.add('hidden');
        }

        function evaluateExpression() {
            if (!window.advancedCalc) {
                initializeAdvancedCalculator();
            }

            const input = document.getElementById('expr-input');
            const result = document.getElementById('expr-result');
            const resultValue = document.getElementById('expr-result-value');
            
            if (!input || !result || !resultValue) return;

            const expression = input.value.trim();
            if (!expression) {
                alert('Please enter an expression');
                return;
            }

            try {
                const calcResult = window.advancedCalc.evalExpr(expression, window.advancedCalc.getMode());
                resultValue.textContent = calcResult;
                result.classList.remove('hidden');
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        function setCalcMode(mode) {
            if (!window.advancedCalc) {
                initializeAdvancedCalculator();
            }

            window.advancedCalc.setMode(mode);
            
            // Update button styles
            const radiansBtn = document.getElementById('radians-btn');
            const degreesBtn = document.getElementById('degrees-btn');
            
            if (radiansBtn && degreesBtn) {
                if (mode === 'radians') {
                    radiansBtn.className = 'px-3 py-1 rounded text-sm bg-purple-600 text-white';
                    degreesBtn.className = 'px-3 py-1 rounded text-sm bg-gray-200 text-gray-700';
                } else {
                    degreesBtn.className = 'px-3 py-1 rounded text-sm bg-purple-600 text-white';
                    radiansBtn.className = 'px-3 py-1 rounded text-sm bg-gray-200 text-gray-700';
                }
            }
        }

        // Advanced Password Generator Functions
        function initializeAdvancedPasswordGenerator() {
            if (!window.advancedPasswordGen) {
                window.advancedPasswordGen = new AdvancedPasswordGenerator();
                console.log('Advanced Password Generator initialized successfully');
            }
        }

        function generateAdvancedPassword() {
            console.log('generateAdvancedPassword called');
            
            if (!window.advancedPasswordGen) {
                console.log('Initializing AdvancedPasswordGenerator...');
                initializeAdvancedPasswordGenerator();
            }

            try {
                const mode = document.getElementById('password-mode').value;
                console.log('Mode:', mode);
                
                const targetEntropy = parseInt(document.getElementById('target-entropy').value) || 96;
                const minLength = parseInt(document.getElementById('min-length').value) || 8;
                const maxLength = parseInt(document.getElementById('max-length').value) || 128;
                const screenBreached = document.getElementById('screen-breached').checked;
                const separator = document.getElementById('passphrase-separator').value || ' ';
                const addRandomChars = document.getElementById('add-random-chars').checked;

                console.log('Parameters:', { targetEntropy, minLength, maxLength, screenBreached, separator, addRandomChars });

                let result;
                if (mode === 'characters') {
                    console.log('Generating character-based password...');
                    const alphabet = getSelectedAlphabet();
                    console.log('Selected alphabet length:', alphabet.length);
                    result = window.advancedPasswordGen.generatePassword({
                        targetEntropy,
                        alphabet,
                        minLength,
                        maxLength,
                        screenBreached
                    });
                } else if (mode === 'diceware') {
                    console.log('Generating diceware passphrase...');
                    result = window.advancedPasswordGen.generatePassphrase({
                        targetEntropy,
                        separator,
                        addRandomChars,
                        screenBreached
                    });
                }

                console.log('Generated result:', result);
                displayPasswordResult(result);
            } catch (error) {
                console.error('Error generating password:', error);
                showError(`Error generating password: ${error.message}`);
            }
        }

        function generateMultiplePasswords() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = parseInt(document.getElementById('password-count').value) || 5;
                const mode = document.getElementById('password-mode').value;
                const targetEntropy = parseInt(document.getElementById('target-entropy').value) || 96;
                const minLength = parseInt(document.getElementById('min-length').value) || 8;
                const maxLength = parseInt(document.getElementById('max-length').value) || 128;
                const screenBreached = document.getElementById('screen-breached').checked;
                const separator = document.getElementById('passphrase-separator').value || ' ';
                const addRandomChars = document.getElementById('add-random-chars').checked;

                let results;
                if (mode === 'characters') {
                    const alphabet = getSelectedAlphabet();
                    results = window.advancedPasswordGen.generateMultiplePasswords(count, {
                        targetEntropy,
                        alphabet,
                        minLength,
                        maxLength,
                        screenBreached
                    });
                } else if (mode === 'diceware') {
                    results = window.advancedPasswordGen.generateMultiplePasswords(count, {
                        targetEntropy,
                        separator,
                        addRandomChars,
                        screenBreached
                    });
                }

                displayMultiplePasswordResults(results);
            } catch (error) {
                console.error('Error generating multiple passwords:', error);
                showError(`Error generating multiple passwords: ${error.message}`);
            }
        }

        function generateMultiplePassphrases() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = parseInt(document.getElementById('password-count').value) || 5;
                const targetEntropy = parseInt(document.getElementById('diceware-target-entropy').value) || 90;
                const separator = document.getElementById('passphrase-separator').value || ' ';
                const addRandomChars = document.getElementById('add-random-chars').checked;
                const screenBreached = document.getElementById('screen-breached').checked;

                const results = window.advancedPasswordGen.generateMultiplePassphrases(count, {
                    targetEntropy,
                    separator,
                    addRandomChars,
                    screenBreached
                });

                displayMultiplePasswordResults(results);
            } catch (error) {
                console.error('Error generating multiple passphrases:', error);
                showError(`Error generating multiple passphrases: ${error.message}`);
            }
        }

        function generateDicewarePassphrase() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const targetEntropy = parseInt(document.getElementById('diceware-target-entropy').value) || 90;
                const separator = document.getElementById('passphrase-separator').value || ' ';
                const addRandomChars = document.getElementById('add-random-chars').checked;
                const screenBreached = document.getElementById('screen-breached').checked;

                const result = window.advancedPasswordGen.generatePassphrase({
                    targetEntropy,
                    separator,
                    addRandomChars,
                    screenBreached
                });

                displayPasswordResult(result);
            } catch (error) {
                console.error('Error generating passphrase:', error);
                showError(`Error generating passphrase: ${error.message}`);
            }
        }

        function validatePassword() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const password = document.getElementById('password-input').value.trim();
                if (!password) {
                    showError('Please enter a password to validate');
                    return;
                }

                const result = window.advancedPasswordGen.validatePassword(password);
                displayPasswordValidation(result);
            } catch (error) {
                console.error('Error validating password:', error);
                showError(`Error validating password: ${error.message}`);
            }
        }

        function getSelectedAlphabet() {
            console.log('getSelectedAlphabet called');
            const alphabetType = document.getElementById('alphabet-type').value;
            console.log('Alphabet type:', alphabetType);
            
            let alphabet;
            switch (alphabetType) {
                case 'full-ascii':
                    alphabet = CharacterSets.FULL_ASCII;
                    break;
                case 'alphanumeric':
                    alphabet = CharacterSets.ALPHANUMERIC;
                    break;
                case 'letters-only':
                    alphabet = CharacterSets.LETTERS_ONLY;
                    break;
                case 'custom':
                    const customChars = document.getElementById('custom-chars').value;
                    alphabet = customChars || CharacterSets.FULL_ASCII;
                    break;
                default:
                    alphabet = CharacterSets.FULL_ASCII;
                    break;
            }
            
            console.log('Selected alphabet length:', alphabet.length);
            console.log('Alphabet preview:', alphabet.substring(0, 50) + '...');
            return alphabet;
        }

        function displayPasswordResult(result) {
            const resultDiv = document.getElementById('password-result');
            const resultContent = document.getElementById('password-result-content');
            
            if (!resultDiv || !resultContent) return;

            resultContent.innerHTML = `
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Generated Password</h3>
                        <span class="px-3 py-1 rounded-full text-sm font-medium ${getStrengthColor(result.strength)}">${result.strength}</span>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Password:</span>
                            <div class="flex items-center space-x-2">
                                <code class="bg-gray-100 px-3 py-2 rounded font-mono text-sm break-all">${result.password}</code>
                                <button onclick="copyToClipboard('${result.password}')" class="text-blue-600 hover:text-blue-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="join" stroke-width="2" d="M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Length:</span>
                            <span class="text-gray-600">${result.length}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Entropy:</span>
                            <span class="text-gray-600">${result.entropy.toFixed(2)} bits</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Mode:</span>
                            <span class="text-gray-600 capitalize">${result.mode}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Generated:</span>
                            <span class="text-gray-600">${new Date(result.timestamp).toLocaleString()}</span>
                        </div>
                        ${result.wordCount ? `<div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Words:</span>
                            <span class="text-gray-600">${result.wordCount}</span>
                        </div>` : ''}
                        ${result.recommendations && result.recommendations.length > 0 ? `
                        <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">Recommendations:</h4>
                            <ul class="text-sm text-blue-700 space-y-1">
                                ${result.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
        }

        function displayMultiplePasswordResults(results) {
            const resultDiv = document.getElementById('password-result');
            const resultContent = document.getElementById('password-result-content');
            
            if (!resultDiv || !resultContent) return;

            resultContent.innerHTML = `
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Generated Passwords</h3>
                    <div class="space-y-4">
                        ${results.map((result, index) => `
                            <div class="border rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-gray-700">Password ${index + 1}</span>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${getStrengthColor(result.strength)}">${result.strength}</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-600">${result.password}</span>
                                    <button onclick="copyToClipboard('${result.password}')" class="text-blue-600 hover:text-blue-800">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="join" stroke-width="2" d="M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="text-sm text-gray-500">
                                    Entropy: ${result.entropy.toFixed(2)} bits | Length: ${result.length}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
        }

        function displayPasswordValidation(result) {
            const resultDiv = document.getElementById('password-result');
            const resultContent = document.getElementById('password-result-content');
            
            if (!resultDiv || !resultContent) return;

            resultContent.innerHTML = `
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Password Validation</h3>
                        <span class="px-3 py-1 rounded-full text-sm font-medium ${getStrengthColor(result.strength)}">${result.strength}</span>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Password:</span>
                            <span class="text-gray-600 font-mono">${result.password}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Length:</span>
                            <span class="text-gray-600">${result.length}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-700">Entropy:</span>
                            <span class="text-gray-600">${result.entropy.toFixed(2)} bits</span>
                        </div>
                        ${result.isBreached ? `
                        <div class="mt-4 p-4 bg-red-50 rounded-lg">
                            <h4 class="font-medium text-red-800 mb-2">⚠️ Security Warning</h4>
                            <p class="text-sm text-red-700">This password appears in breached password databases!</p>
                        </div>
                        ` : ''}
                        ${result.recommendations && result.recommendations.length > 0 ? `
                        <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">Recommendations:</h4>
                            <ul class="text-sm text-blue-700 space-y-1">
                                ${result.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                </div>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
        }

        function getStrengthColor(strength) {
            switch (strength) {
                case 'very strong': return 'bg-green-100 text-green-800';
                case 'strong': return 'bg-blue-100 text-blue-800';
                case 'moderate': return 'bg-yellow-100 text-yellow-800';
                case 'weak': return 'bg-orange-100 text-orange-800';
                case 'very weak': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-700';
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('password-error');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
                setTimeout(() => {
                    errorDiv.classList.add('hidden');
                }, 5000);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show success message
                const successMsg = document.createElement('div');
                successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                successMsg.textContent = 'Copied to clipboard!';
                document.body.appendChild(successMsg);
                
                setTimeout(() => {
                    document.body.removeChild(successMsg);
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showError('Failed to copy to clipboard');
            });
        }

        function switchPasswordMode(mode) {
            // Hide all modes
            document.querySelectorAll('.password-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.password-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'characters') {
                document.getElementById('characters-mode').classList.remove('hidden');
                document.getElementById('characters-tab').classList.add('active');
            } else if (mode === 'diceware') {
                document.getElementById('diceware-mode').classList.remove('hidden');
                document.getElementById('diceware-tab').classList.add('active');
            } else if (mode === 'validation') {
                document.getElementById('validation-mode').classList.remove('hidden');
                document.getElementById('validation-tab').classList.add('active');
            }
        }

        function updateEntropyInfo() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const entropyInfo = window.advancedPasswordGen.getEntropyInfo();
                const entropyDiv = document.getElementById('entropy-info');
                if (!entropyDiv) return;

                entropyDiv.innerHTML = Object.entries(entropyInfo).map(([name, info]) => `
                    <div class="bg-white p-3 rounded border">
                        <h5 class="font-medium text-blue-800 mb-2">${name}</h5>
                        <div class="text-xs space-y-1">
                            ${info.alphabetSize ? `
                                <div>Alphabet: ${info.alphabetSize} characters</div>
                                <div>Bits per char: ${info.bitsPerChar.toFixed(2)}</div>
                                <div>80 bits: ${info.lengthFor80Bits} chars</div>
                                <div>96 bits: ${info.lengthFor96Bits} chars</div>
                                <div>128 bits: ${info.lengthFor128Bits} chars</div>
                            ` : `
                                <div>Words: ${info.alphabetSize || info.bitsPerWord ? 'N/A' : '100'}</div>
                                <div>Bits per word: ${info.bitsPerWord ? info.bitsPerWord.toFixed(2) : '12.9'}</div>
                                <div>80 bits: ${info.wordsFor80Bits || '~6'} words</div>
                                <div>96 bits: ${info.wordsFor96Bits || '~7'} words</div>
                                <div>128 bits: ${info.wordsFor128Bits || '~10'} words</div>
                            `}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error updating entropy info:', error);
            }
        }

        function calculateTwoOperand() {
            if (!window.advancedCalc) {
                initializeAdvancedCalculator();
            }

            const a = document.getElementById('calc-a');
            const b = document.getElementById('calc-b');
            const op = document.getElementById('calc-operation');

            if (!a || !b || !op) return;

            if (!a.value || !b.value) {
                alert('Please enter both numbers');
                return;
            }

            try {
                const result = window.advancedCalc.computeTwoOperand(parseFloat(a.value), parseFloat(b.value), op.value);
                document.getElementById('calc-result').textContent = `Result: ${result}`;
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        // Advanced UUID Generator Functions
        let AdvancedUUIDGen = null;

        async function initializeAdvancedUUIDGenerator() {
            try {
                console.log('Initializing Advanced UUID Generator...');
                
                // Check if the module is already loaded
                if (typeof AdvancedUUIDGenerator === 'undefined') {
                    console.log('Loading UUID Generator module...');
                    try {
                        const module = await import('./src/js/advanced-uuid-generator.js');
                        window.AdvancedUUIDGenerator = module.AdvancedUUIDGenerator;
                        window.UUIDUtils = module.UUIDUtils;
                        console.log('UUID Generator module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import UUID Generator module:', importError);
                        showError('Failed to load UUID Generator module');
                        return false;
                    }
                }

                // Create instance
                AdvancedUUIDGen = new AdvancedUUIDGenerator();
                console.log('Advanced UUID Generator initialized successfully');
                return true;
            } catch (error) {
                console.error('Error initializing Advanced UUID Generator:', error);
                showError(`Error initializing UUID Generator: ${error.message}`);
                return false;
            }
        }

        async function generateUUID(version) {
            if (!AdvancedUUIDGen) {
                if (!(await initializeAdvancedUUIDGenerator())) {
                    return;
                }
            }

            try {
                // Show/hide name inputs for v3 and v5
                const nameInputs = document.getElementById('uuid-name-inputs');
                if (version === 3 || version === 5) {
                    nameInputs.classList.remove('hidden');
                } else {
                    nameInputs.classList.add('hidden');
                }

                let uuid;
                const count = parseInt(document.getElementById('uuid-count').value) || 1;
                
                switch (version) {
                    case 1:
                        uuid = AdvancedUUIDGen.generateV1();
                        break;
                    case 3:
                        const name3 = document.getElementById('uuid-name').value.trim();
                        const namespace3 = document.getElementById('uuid-namespace').value.trim();
                        if (!name3 || !namespace3) {
                            showError('Please enter name and namespace for v3 UUID');
                            return;
                        }
                        uuid = AdvancedUUIDGen.generateV3(name3, namespace3);
                        break;
                    case 4:
                        uuid = AdvancedUUIDGen.generateV4();
                        break;
                    case 5:
                        const name5 = document.getElementById('uuid-name').value.trim();
                        const namespace5 = document.getElementById('uuid-namespace').value.trim();
                        if (!name5 || !namespace5) {
                            showError('Please enter name and namespace for v5 UUID');
                            return;
                        }
                        uuid = AdvancedUUIDGen.generateV5(name5, namespace5);
                        break;
                    case 7:
                        uuid = AdvancedUUIDGen.generateV7();
                        break;
                    default:
                        showError('Invalid UUID version');
                        return;
                }

                // Generate multiple UUIDs if requested
                const uuids = [];
                for (let i = 0; i < count; i++) {
                    if (version === 1) {
                        uuids.push(AdvancedUUIDGen.generateV1());
                    } else if (version === 3) {
                        uuids.push(AdvancedUUIDGen.generateV3(name3, namespace3));
                    } else if (version === 4) {
                        uuids.push(AdvancedUUIDGen.generateV4());
                    } else if (version === 5) {
                        uuids.push(AdvancedUUIDGen.generateV5(name5, namespace5));
                    } else if (version === 7) {
                        uuids.push(AdvancedUUIDGen.generateV7());
                    }
                }

                // Display results
                const resultDiv = document.getElementById('uuid-result');
                if (count === 1) {
                    resultDiv.innerHTML = `
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Generated UUID v${version}:</h4>
                            <div class="flex items-center space-x-2">
                                <input type="text" value="${uuids[0]}" readonly 
                                       class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                <button onclick="copyToClipboard('${uuids[0]}')" 
                                        class="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                    Copy
                                </button>
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Generated ${count} UUID v${version}s:</h4>
                            <div class="space-y-2 max-h-60 overflow-y-auto">
                                ${uuids.map((uuid, index) => `
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-500 w-8">${index + 1}.</span>
                                        <input type="text" value="${uuid}" readonly 
                                               class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                        <button onclick="copyToClipboard('${uuid}')" 
                                                class="px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs">
                                            Copy
                                        </button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }

                // Show UUID information
                const info = AdvancedUUIDGen.getUUIDInfo(uuids[0]);
                const infoDiv = document.getElementById('uuid-info');
                infoDiv.innerHTML = `
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">UUID Information:</h4>
                        <div class="text-sm space-y-1">
                            <div><strong>Version:</strong> ${info.version}</div>
                            <div><strong>Variant:</strong> ${info.variant}</div>
                            ${info.timestamp ? `<div><strong>Timestamp:</strong> ${info.timestamp.toISOString()}</div>` : ''}
                            ${info.nodeId ? `<div><strong>Node ID:</strong> ${info.nodeId}</div>` : ''}
                            ${info.clockSequence ? `<div><strong>Clock Sequence:</strong> ${info.clockSequence}</div>` : ''}
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error('Error generating UUID:', error);
                showError(`Error generating UUID: ${error.message}`);
            }
        }

        async function validateUUID() {
            if (!AdvancedUUIDGen) {
                if (!(await initializeAdvancedUUIDGenerator())) {
                    return;
                }
            }

            try {
                const input = document.getElementById('uuid-validate-input').value.trim();
                if (!input) {
                    showError('Please enter a UUID to validate');
                    return;
                }

                const validation = AdvancedUUIDGen.validateUUID(input);
                const resultDiv = document.getElementById('uuid-validate-result');
                
                if (validation.valid) {
                    resultDiv.innerHTML = `
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">✅ Valid UUID</h4>
                            <div class="text-sm space-y-1">
                                <div><strong>Version:</strong> ${validation.version}</div>
                                <div><strong>Variant:</strong> ${validation.variant}</div>
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-red-800 mb-2">❌ Invalid UUID</h4>
                            <div class="text-sm text-red-700">
                                ${validation.error}
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error validating UUID:', error);
                showError(`Error validating UUID: ${error.message}`);
            }
        }

        // Advanced Hash Generator Functions
        let AdvancedHashGen = null;

        async function initializeAdvancedHashGenerator() {
            try {
                console.log('Initializing Advanced Hash Generator...');
                
                // Check if the module is already loaded
                if (typeof AdvancedHashGenerator === 'undefined') {
                    console.log('Loading Hash Generator module...');
                    try {
                        const module = await import('./src/js/advanced-hash-generator.js');
                        window.AdvancedHashGenerator = module.AdvancedHashGenerator;
                        window.HashUtils = module.HashUtils;
                        console.log('Hash Generator module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Hash Generator module:', importError);
                        showError('Failed to load Hash Generator module');
                        return false;
                    }
                }

                // Create instance
                AdvancedHashGen = new AdvancedHashGenerator();
                console.log('Advanced Hash Generator initialized successfully');
                return true;
            } catch (error) {
                console.error('Error initializing Advanced Hash Generator:', error);
                showError(`Error initializing Hash Generator: ${error.message}`);
                return false;
            }
        }

        async function generateHash() {
            if (!AdvancedHashGen) {
                if (!(await initializeAdvancedHashGenerator())) {
                    return;
                }
            }

            try {
                const input = document.getElementById('hash-input').value.trim();
                if (!input) {
                    showError('Please enter data to hash');
                    return;
                }

                const algorithm = document.getElementById('hash-algorithm').value;
                const options = {};

                // Get algorithm-specific options
                if (algorithm === 'argon2id') {
                    options.memory_kb = parseInt(document.getElementById('argon2-memory').value) || 65536;
                    options.iterations = parseInt(document.getElementById('argon2-iterations').value) || 3;
                    options.salt = AdvancedHashGen.generateSalt(32);
                } else if (algorithm === 'bcrypt') {
                    options.rounds = parseInt(document.getElementById('bcrypt-rounds').value) || 12;
                    options.salt = AdvancedHashGen.generateBcryptSalt();
                } else if (algorithm === 'pbkdf2') {
                    options.iterations = parseInt(document.getElementById('pbkdf2-iterations').value) || 600000;
                    options.key_length = parseInt(document.getElementById('pbkdf2-key-length').value) || 32;
                    options.salt = AdvancedHashGen.generateSalt(32);
                } else if (algorithm === 'blake2b') {
                    options.size = parseInt(document.getElementById('blake2b-size').value) || 64;
                } else if (algorithm === 'xxhash64') {
                    options.seed = parseInt(document.getElementById('xxhash-seed').value) || 0;
                }

                const result = AdvancedHashGen.generateHash(input, algorithm, options);

                // Display results
                const resultDiv = document.getElementById('hash-result');
                if (typeof result === 'object' && result.hash) {
                    // Password hashing result
                    resultDiv.innerHTML = `
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Generated ${algorithm.toUpperCase()} Hash:</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Hash:</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="text" value="${result.hash}" readonly 
                                               class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                        <button onclick="copyToClipboard('${result.hash}')" 
                                                class="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Salt:</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="text" value="${result.salt}" readonly 
                                               class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                        <button onclick="copyToClipboard('${result.salt}')" 
                                                class="px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                ${result.parameters ? `
                                    <div class="text-sm text-gray-600">
                                        <strong>Parameters:</strong> ${JSON.stringify(result.parameters)}
                                    </div>
                                ` : ''}
                                ${result.rounds ? `
                                    <div class="text-sm text-gray-600">
                                        <strong>Rounds:</strong> ${result.rounds}
                                    </div>
                                ` : ''}
                                ${result.iterations ? `
                                    <div class="text-sm text-gray-600">
                                        <strong>Iterations:</strong> ${result.iterations}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                } else {
                    // Simple hash result
                    resultDiv.innerHTML = `
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Generated ${algorithm.toUpperCase()} Hash:</h4>
                            <div class="flex items-center space-x-2">
                                <input type="text" value="${result}" readonly 
                                       class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                <button onclick="copyToClipboard('${result}')" 
                                        class="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                    Copy
                                </button>
                            </div>
                            <div class="text-sm text-gray-600 mt-2">
                                <strong>Length:</strong> ${result.length} characters
                            </div>
                        </div>
                    `;
                }

                // Show algorithm information
                const info = AdvancedHashGen.getAlgorithmInfo(algorithm);
                const infoDiv = document.getElementById('hash-info');
                if (info) {
                    infoDiv.innerHTML = `
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Algorithm Information:</h4>
                            <div class="text-sm space-y-1">
                                <div><strong>Name:</strong> ${info.name}</div>
                                <div><strong>Type:</strong> ${info.type}</div>
                                <div><strong>Output Size:</strong> ${info.outputSize}</div>
                                <div><strong>Security:</strong> ${info.security}</div>
                                <div><strong>Use Case:</strong> ${info.use}</div>
                            </div>
                        </div>
                    `;
                }

            } catch (error) {
                console.error('Error generating hash:', error);
                showError(`Error generating hash: ${error.message}`);
            }
        }

        async function generateMultipleHashes() {
            if (!AdvancedHashGen) {
                if (!(await initializeAdvancedHashGenerator())) {
                    return;
                }
            }

            try {
                const input = document.getElementById('hash-multiple-input').value.trim();
                if (!input) {
                    showError('Please enter data to hash');
                    return;
                }

                const selectedAlgorithms = Array.from(document.querySelectorAll('input[name="hash-algorithms"]:checked'))
                    .map(cb => cb.value);

                if (selectedAlgorithms.length === 0) {
                    showError('Please select at least one algorithm');
                    return;
                }

                const results = HashUtils.generateMultiple(input, selectedAlgorithms);

                // Display results
                const resultDiv = document.getElementById('hash-multiple-result');
                resultDiv.innerHTML = `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">Generated Hashes:</h4>
                        <div class="space-y-3">
                            ${Object.entries(results).map(([algorithm, result]) => {
                                const hashValue = typeof result === 'object' && result.error ? null : (typeof result === 'object' ? result.hash : result);
                                const displayValue = hashValue ? (typeof hashValue === 'string' ? hashValue : hashValue.toString()) : '';
                                return `
                                <div class="border rounded p-3">
                                    <div class="font-medium text-gray-800 mb-2">${algorithm.toUpperCase()}</div>
                                    ${typeof result === 'object' && result.error ? `
                                        <div class="text-red-600 text-sm">Error: ${result.error}</div>
                                    ` : `
                                        <div class="flex items-center space-x-2">
                                            <input type="text" value="${displayValue}" readonly 
                                                   class="flex-1 p-2 border rounded font-mono text-sm bg-white">
                                            <button onclick="copyToClipboard('${displayValue}')" 
                                                    class="px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs">
                                                Copy
                                            </button>
                                        </div>
                                    `}
                                </div>
                            `;
                            }).join('')}
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error('Error generating multiple hashes:', error);
                showError(`Error generating multiple hashes: ${error.message}`);
            }
        }

        async function validateHash() {
            if (!AdvancedHashGen) {
                if (!(await initializeAdvancedHashGenerator())) {
                    return;
                }
            }

            try {
                const hash = document.getElementById('hash-validate-input').value.trim();
                const algorithm = document.getElementById('hash-validate-algorithm').value;

                if (!hash) {
                    showError('Please enter a hash to validate');
                    return;
                }

                const isValid = HashUtils.validateHash(hash, algorithm);
                const resultDiv = document.getElementById('hash-validate-result');
                
                if (isValid) {
                    resultDiv.innerHTML = `
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">✅ Valid Hash</h4>
                            <div class="text-sm text-green-700">
                                The hash format is valid for ${algorithm.toUpperCase()}
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-red-800 mb-2">❌ Invalid Hash</h4>
                            <div class="text-sm text-red-700">
                                The hash format is not valid for ${algorithm.toUpperCase()}
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error validating hash:', error);
                showError(`Error validating hash: ${error.message}`);
            }
        }

        // Advanced Word Counter Functions
        let AdvancedWordCounter = null;

        async function initializeAdvancedWordCounter() {
            try {
                console.log('Initializing Advanced Word Counter...');
                
                // Check if the module is already loaded
                if (typeof window.AdvancedWordCounter === 'undefined') {
                    console.log('Loading Word Counter module...');
                    try {
                        const module = await import('./src/js/advanced-word-counter.js');
                        window.AdvancedWordCounter = module.AdvancedWordCounter;
                        window.WordCounterUtils = module.WordCounterUtils;
                        console.log('Word Counter module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Word Counter module:', importError);
                        showError('Failed to load Word Counter module');
                        return false;
                    }
                }

                // Create instance
                AdvancedWordCounter = new window.AdvancedWordCounter();
                console.log('Advanced Word Counter initialized successfully');
                return true;
            } catch (error) {
                console.error('Error initializing Advanced Word Counter:', error);
                showError(`Error initializing Word Counter: ${error.message}`);
                return false;
            }
        }

        async function analyzeText() {
            if (!AdvancedWordCounter) {
                if (!(await initializeAdvancedWordCounter())) {
                    return;
                }
            }

            try {
                const text = document.getElementById('word-text').value.trim();
                if (!text) {
                    showError('Please enter text to analyze');
                    return;
                }

                const options = {
                    includeFrequency: document.getElementById('include-frequency').checked,
                    includeReadability: document.getElementById('include-readability').checked,
                    includeReadingTime: document.getElementById('include-reading-time').checked,
                    excludeStopWords: document.getElementById('exclude-stop-words').checked,
                    minWordLength: parseInt(document.getElementById('min-word-length').value) || 1,
                    topNWords: parseInt(document.getElementById('top-n-words').value) || 20,
                    readingSpeed: parseInt(document.getElementById('reading-speed').value) || 200
                };

                console.log('Analyzing text with options:', options);
                const result = AdvancedWordCounter.countWords(text, options);
                console.log('Analysis result:', result);

                // Display basic statistics
                displayBasicStats(result.basicStatistics);

                // Display advanced analytics
                if (result.advancedAnalytics.frequencyAnalysis) {
                    displayFrequencyAnalysis(result.advancedAnalytics.frequencyAnalysis);
                }

                if (result.advancedAnalytics.readabilityScores) {
                    displayReadabilityScores(result.advancedAnalytics.readabilityScores);
                }

                if (result.advancedAnalytics.readingTime) {
                    displayReadingTime(result.advancedAnalytics.readingTime);
                }

                // Display processing info
                displayProcessingInfo(result.processingInfo);

            } catch (error) {
                console.error('Error analyzing text:', error);
                showError(`Error analyzing text: ${error.message}`);
            }
        }

        function displayBasicStats(stats) {
            const statsDiv = document.getElementById('word-stats');
            const summary = window.WordCounterUtils.getTextSummary(stats);
            
            statsDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">📊 Basic Statistics</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">${summary.words}</div>
                            <div class="text-sm text-gray-600">Words</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">${summary.characters}</div>
                            <div class="text-sm text-gray-600">Characters</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">${summary.sentences}</div>
                            <div class="text-sm text-gray-600">Sentences</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600">${summary.paragraphs}</div>
                            <div class="text-sm text-gray-600">Paragraphs</div>
                        </div>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-lg font-semibold text-gray-800">${summary.avgWordsPerSentence}</div>
                            <div class="text-sm text-gray-600">Avg Words/Sentence</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg font-semibold text-gray-800">${summary.avgSentencesPerParagraph}</div>
                            <div class="text-sm text-gray-600">Avg Sentences/Paragraph</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function displayFrequencyAnalysis(freqAnalysis) {
            const freqDiv = document.getElementById('frequency-analysis');
            
            const topWordsHtml = freqAnalysis.topWords.slice(0, 10).map(word => `
                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                    <span class="font-medium">${word.word}</span>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-gray-600">${word.count}</span>
                        <span class="text-xs text-gray-500">(${word.percentage.toFixed(1)}%)</span>
                    </div>
                </div>
            `).join('');

            freqDiv.innerHTML = `
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">📈 Frequency Analysis</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-blue-600">${freqAnalysis.totalWords}</div>
                            <div class="text-sm text-gray-600">Total Words</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-600">${freqAnalysis.uniqueWords}</div>
                            <div class="text-sm text-gray-600">Unique Words</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-purple-600">${(freqAnalysis.lexicalDiversity * 100).toFixed(1)}%</div>
                            <div class="text-sm text-gray-600">Lexical Diversity</div>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-medium mb-2">Top Words:</h5>
                        <div class="max-h-48 overflow-y-auto">
                            ${topWordsHtml}
                        </div>
                    </div>
                </div>
            `;
        }

        function displayReadabilityScores(scores) {
            const readabilityDiv = document.getElementById('readability-scores');
            
            const fleschLevel = window.WordCounterUtils.getReadabilityLevel(scores.fleschReadingEase, 'flesch');
            const gradeLevel = window.WordCounterUtils.getReadabilityLevel(scores.fleschKincaidGrade, 'grade');
            
            readabilityDiv.innerHTML = `
                <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">📚 Readability Scores</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-600">${scores.fleschReadingEase?.toFixed(1) || 'N/A'}</div>
                            <div class="text-sm text-gray-600">Flesch Reading Ease</div>
                            <div class="text-xs text-gray-500">${fleschLevel}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-blue-600">${scores.fleschKincaidGrade?.toFixed(1) || 'N/A'}</div>
                            <div class="text-sm text-gray-600">Flesch-Kincaid Grade</div>
                            <div class="text-xs text-gray-500">${gradeLevel}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-purple-600">${scores.ari?.toFixed(1) || 'N/A'}</div>
                            <div class="text-sm text-gray-600">ARI</div>
                            <div class="text-xs text-gray-500">Automated Readability</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function displayReadingTime(readingTime) {
            const readingTimeDiv = document.getElementById('reading-time');
            const description = window.WordCounterUtils.getReadingTimeDescription(readingTime.minutes);
            
            readingTimeDiv.innerHTML = `
                <div class="bg-orange-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">⏱️ Reading Time</h4>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-orange-600">${description}</div>
                        <div class="text-sm text-gray-600 mt-2">
                            ${readingTime.minutes} minutes (${readingTime.seconds} seconds)
                        </div>
                        <div class="text-xs text-gray-500">
                            Based on ${readingTime.readingSpeedWpm} words per minute
                        </div>
                    </div>
                </div>
            `;
        }

        function displayProcessingInfo(info) {
            const infoDiv = document.getElementById('processing-info');
            
            infoDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">ℹ️ Processing Information</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="font-medium">Language:</span> ${info.language}
                        </div>
                        <div>
                            <span class="font-medium">Original Length:</span> ${info.originalLength} characters
                        </div>
                        <div>
                            <span class="font-medium">Processed Length:</span> ${info.processedLength} characters
                        </div>
                        <div>
                            <span class="font-medium">Encoding:</span> ${info.encoding}
                        </div>
                    </div>
                </div>
            `;
        }

        // Advanced Case Converter Functions
        let AdvancedCaseConverter = null;

        async function initializeAdvancedCaseConverter() {
            try {
                console.log('Initializing Advanced Case Converter...');
                
                // Check if the module is already loaded
                if (typeof window.AdvancedCaseConverter === 'undefined') {
                    console.log('Loading Case Converter module...');
                    try {
                        const module = await import('./src/js/advanced-case-converter.js');
                        window.AdvancedCaseConverter = module.AdvancedCaseConverter;
                        window.CaseConverterUtils = module.CaseConverterUtils;
                        console.log('Case Converter module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Case Converter module:', importError);
                        showError('Failed to load Case Converter module');
                        return false;
                    }
                }

                // Create instance
                AdvancedCaseConverter = new window.AdvancedCaseConverter();
                console.log('Advanced Case Converter initialized successfully');
                return true;
            } catch (error) {
                console.error('Error initializing Advanced Case Converter:', error);
                showError(`Error initializing Case Converter: ${error.message}`);
                return false;
            }
        }

        async function convertText() {
            if (!AdvancedCaseConverter) {
                if (!(await initializeAdvancedCaseConverter())) {
                    return;
                }
            }

            try {
                const text = document.getElementById('case-text').value.trim();
                if (!text) {
                    showError('Please enter text to convert');
                    return;
                }

                const caseType = document.getElementById('case-type').value;
                const options = {
                    normalizeUnicode: document.getElementById('normalize-unicode').checked,
                    preserveLeadingTrailingSpace: document.getElementById('preserve-spaces').checked,
                    locale: document.getElementById('locale').value || null
                };

                console.log('Converting text with options:', options);
                const result = AdvancedCaseConverter.convert(text, caseType, options);
                console.log('Conversion result:', result);

                // Display result
                displayConversionResult(result, caseType);

                // Update case detection
                updateCaseDetection(text);

            } catch (error) {
                console.error('Error converting text:', error);
                showError(`Error converting text: ${error.message}`);
            }
        }

        function displayConversionResult(result, caseType) {
            const resultDiv = document.getElementById('case-result');
            const description = window.CaseConverterUtils.getCaseTypeDescription(caseType);
            const icon = window.CaseConverterUtils.getCaseTypeIcon(caseType);
            
            resultDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">${icon} Conversion Result</h4>
                    <div class="mb-3">
                        <label class="block text-sm font-medium mb-2">${description}</label>
                        <div class="flex items-center space-x-2">
                            <input type="text" id="converted-text" value="${result}" readonly 
                                   class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm">
                            <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                    class="btn-secondary px-4 py-2 text-sm">
                                📋 Copy
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateCaseDetection(text) {
            if (!AdvancedCaseConverter) return;
            
            try {
                const detectedType = AdvancedCaseConverter.detectCaseType(text);
                const detectionDiv = document.getElementById('case-detection');
                
                if (detectionDiv) {
                    const description = window.CaseConverterUtils.getCaseTypeDescription(detectedType);
                    const icon = window.CaseConverterUtils.getCaseTypeIcon(detectedType);
                    
                    detectionDiv.innerHTML = `
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h5 class="font-medium mb-2">🔍 Detected Case Type</h5>
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">${icon}</span>
                                <span class="font-mono text-sm">${detectedType}</span>
                                <span class="text-sm text-gray-600">(${description})</span>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error detecting case type:', error);
            }
        }

        function populateCaseTypes() {
            if (!AdvancedCaseConverter) return;
            
            try {
                const supportedTypes = AdvancedCaseConverter.getSupportedCaseTypes();
                const caseTypeSelect = document.getElementById('case-type');
                
                if (caseTypeSelect) {
                    caseTypeSelect.innerHTML = '';
                    
                    // Add basic cases
                    const basicGroup = document.createElement('optgroup');
                    basicGroup.label = 'Basic Cases';
                    supportedTypes.basic.forEach(caseType => {
                        const option = document.createElement('option');
                        option.value = caseType;
                        option.textContent = window.CaseConverterUtils.formatCaseType(caseType);
                        basicGroup.appendChild(option);
                    });
                    caseTypeSelect.appendChild(basicGroup);
                    
                    // Add programming cases
                    const programmingGroup = document.createElement('optgroup');
                    programmingGroup.label = 'Programming Cases';
                    supportedTypes.programming.forEach(caseType => {
                        const option = document.createElement('option');
                        option.value = caseType;
                        option.textContent = window.CaseConverterUtils.formatCaseType(caseType);
                        programmingGroup.appendChild(option);
                    });
                    caseTypeSelect.appendChild(programmingGroup);
                    
                    // Add special cases
                    const specialGroup = document.createElement('optgroup');
                    specialGroup.label = 'Special Effects';
                    supportedTypes.special.forEach(caseType => {
                        const option = document.createElement('option');
                        option.value = caseType;
                        option.textContent = window.CaseConverterUtils.formatCaseType(caseType);
                        specialGroup.appendChild(option);
                    });
                    caseTypeSelect.appendChild(specialGroup);
                }
            } catch (error) {
                console.error('Error populating case types:', error);
            }
        }

        function convertAllCases() {
            if (!AdvancedCaseConverter) return;
            
            try {
                const text = document.getElementById('case-text').value.trim();
                if (!text) {
                    showError('Please enter text to convert');
                    return;
                }

                const supportedTypes = AdvancedCaseConverter.getSupportedCaseTypes();
                const allTypes = [...supportedTypes.basic, ...supportedTypes.programming, ...supportedTypes.special];
                
                const resultsDiv = document.getElementById('all-conversions');
                const results = [];
                
                allTypes.forEach(caseType => {
                    try {
                        const result = AdvancedCaseConverter.convert(text, caseType);
                        results.push({ caseType, result });
                    } catch (error) {
                        console.error(`Error converting to ${caseType}:`, error);
                    }
                });
                
                // Display all results
                const resultsHtml = results.map(({ caseType, result }) => {
                    const description = window.CaseConverterUtils.getCaseTypeDescription(caseType);
                    const icon = window.CaseConverterUtils.getCaseTypeIcon(caseType);
                    const category = window.CaseConverterUtils.getCaseTypeCategory(caseType);
                    
                    return `
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <span class="text-lg">${icon}</span>
                                    <span class="font-medium text-sm">${window.CaseConverterUtils.formatCaseType(caseType)}</span>
                                    <span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600">${category}</span>
                                </div>
                                <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                        class="text-xs px-2 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">
                                    Copy
                                </button>
                            </div>
                            <div class="font-mono text-sm bg-gray-50 p-2 rounded break-all">${result}</div>
                        </div>
                    `;
                }).join('');
                
                resultsDiv.innerHTML = `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3">🔄 All Case Conversions</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto">
                            ${resultsHtml}
                        </div>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error converting all cases:', error);
                showError(`Error converting all cases: ${error.message}`);
            }
        }

        // Advanced URL Processor Functions
        let AdvancedURLProcessor = null;

        async function initializeAdvancedURLProcessor() {
            try {
                console.log('Initializing Advanced URL Processor...');
                
                // Check if the module is already loaded
                if (typeof window.AdvancedURLProcessor === 'undefined') {
                    console.log('Loading URL Processor module...');
                    try {
                        const module = await import('./src/js/advanced-url-encoder.js');
                        window.AdvancedURLProcessor = module.AdvancedURLProcessor;
                        window.URLProcessorUtils = module.URLProcessorUtils;
                        console.log('URL Processor module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import URL Processor module:', importError);
                        showError('Failed to load URL Processor module');
                        return false;
                    }
                }

                // Create instance
                AdvancedURLProcessor = new window.AdvancedURLProcessor();
                console.log('Advanced URL Processor initialized successfully');
                
                // Populate mode options
                populateURLModes();
                
                return true;
            } catch (error) {
                console.error('Error initializing Advanced URL Processor:', error);
                showError(`Error initializing URL Processor: ${error.message}`);
                return false;
            }
        }

        async function encodeURL() {
            if (!AdvancedURLProcessor) {
                if (!(await initializeAdvancedURLProcessor())) {
                    return;
                }
            }

            try {
                const text = document.getElementById('url-text').value.trim();
                if (!text) {
                    showError('Please enter text to encode');
                    return;
                }

                const mode = document.getElementById('url-mode').value;
                const options = {
                    strictSurrogates: document.getElementById('strict-surrogates').checked
                };

                console.log('Encoding URL with mode:', mode);
                const result = AdvancedURLProcessor.encoder.encode(text, mode, options);
                console.log('Encoding result:', result);

                // Display result
                displayURLResult(result, mode, 'encode');

            } catch (error) {
                console.error('Error encoding URL:', error);
                showError(`Error encoding URL: ${error.message}`);
            }
        }

        async function decodeURL() {
            if (!AdvancedURLProcessor) {
                if (!(await initializeAdvancedURLProcessor())) {
                    return;
                }
            }

            try {
                const text = document.getElementById('url-text').value.trim();
                if (!text) {
                    showError('Please enter text to decode');
                    return;
                }

                const mode = document.getElementById('url-mode').value;
                const options = {
                    strictUnicode: document.getElementById('strict-unicode').checked,
                    strictPercent: document.getElementById('strict-percent').checked
                };

                console.log('Decoding URL with mode:', mode);
                const result = AdvancedURLProcessor.decoder.decode(text, mode, options);
                console.log('Decoding result:', result);

                // Display result
                displayURLResult(result, mode, 'decode');

            } catch (error) {
                console.error('Error decoding URL:', error);
                showError(`Error decoding URL: ${error.message}`);
            }
        }

        function displayURLResult(result, mode, operation) {
            const resultDiv = document.getElementById('url-result');
            const description = window.URLProcessorUtils.getModeDescription(mode);
            const icon = window.URLProcessorUtils.getModeIcon(mode);
            const operationText = operation === 'encode' ? 'Encoded' : 'Decoded';
            
            resultDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">${icon} ${operationText} Result</h4>
                    <div class="mb-3">
                        <label class="block text-sm font-medium mb-2">${description}</label>
                        <div class="flex items-center space-x-2">
                            <textarea id="url-result-text" readonly 
                                      class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm min-h-[100px]">${result}</textarea>
                            <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                    class="btn-secondary px-4 py-2 text-sm">
                                📋 Copy
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function populateURLModes() {
            if (!AdvancedURLProcessor) return;
            
            try {
                const supportedModes = AdvancedURLProcessor.getSupportedModes();
                const modeSelect = document.getElementById('url-mode');
                
                if (modeSelect) {
                    modeSelect.innerHTML = '';
                    
                    // Add encoding modes
                    const encodingGroup = document.createElement('optgroup');
                    encodingGroup.label = 'Encoding Modes';
                    supportedModes.encoding.forEach(mode => {
                        const option = document.createElement('option');
                        option.value = mode;
                        option.textContent = window.URLProcessorUtils.formatMode(mode);
                        encodingGroup.appendChild(option);
                    });
                    modeSelect.appendChild(encodingGroup);
                    
                    // Add decoding modes
                    const decodingGroup = document.createElement('optgroup');
                    decodingGroup.label = 'Decoding Modes';
                    supportedModes.decoding.forEach(mode => {
                        const option = document.createElement('option');
                        option.value = mode;
                        option.textContent = window.URLProcessorUtils.formatMode(mode);
                        decodingGroup.appendChild(option);
                    });
                    modeSelect.appendChild(decodingGroup);
                }
            } catch (error) {
                console.error('Error populating URL modes:', error);
            }
        }

        async function processFormData() {
            if (!AdvancedURLProcessor) return;
            
            try {
                const formDataText = document.getElementById('form-data-input').value.trim();
                if (!formDataText) {
                    showError('Please enter form data');
                    return;
                }

                const operation = document.getElementById('form-operation').value;
                let result;

                if (operation === 'encode') {
                    // Parse as JSON or key=value pairs
                    let data;
                    try {
                        data = JSON.parse(formDataText);
                    } catch {
                        // Try parsing as key=value pairs
                        const pairs = formDataText.split('\n').filter(line => line.trim());
                        data = {};
                        for (const pair of pairs) {
                            if (pair.includes('=')) {
                                const [key, value] = pair.split('=', 2);
                                data[key.trim()] = value.trim();
                            }
                        }
                    }
                    
                    result = AdvancedURLProcessor.formProcessor.encodeFormData(data);
                } else {
                    result = AdvancedURLProcessor.formProcessor.decodeFormData(formDataText);
                }

                // Display result
                const resultDiv = document.getElementById('form-data-result');
                resultDiv.innerHTML = `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3">📝 Form Data ${operation === 'encode' ? 'Encoded' : 'Decoded'}</h4>
                        <div class="flex items-center space-x-2">
                            <textarea id="form-data-result-text" readonly 
                                      class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm min-h-[100px]">${result}</textarea>
                            <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                    class="btn-secondary px-4 py-2 text-sm">
                                📋 Copy
                            </button>
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error('Error processing form data:', error);
                showError(`Error processing form data: ${error.message}`);
            }
        }

        async function processBase64URL() {
            if (!AdvancedURLProcessor) return;
            
            try {
                const text = document.getElementById('base64url-input').value.trim();
                if (!text) {
                    showError('Please enter text for Base64URL processing');
                    return;
                }

                const operation = document.getElementById('base64url-operation').value;
                let result;

                if (operation === 'encode') {
                    result = AdvancedURLProcessor.base64url.encodeBase64url(text);
                } else {
                    const decoded = AdvancedURLProcessor.base64url.decodeBase64url(text);
                    result = new TextDecoder().decode(decoded);
                }

                // Display result
                const resultDiv = document.getElementById('base64url-result');
                resultDiv.innerHTML = `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3">🔐 Base64URL ${operation === 'encode' ? 'Encoded' : 'Decoded'}</h4>
                        <div class="flex items-center space-x-2">
                            <textarea id="base64url-result-text" readonly 
                                      class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm min-h-[100px]">${result}</textarea>
                            <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                    class="btn-secondary px-4 py-2 text-sm">
                                📋 Copy
                            </button>
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error('Error processing Base64URL:', error);
                showError(`Error processing Base64URL: ${error.message}`);
            }
        }

        async function processFullURL() {
            if (!AdvancedURLProcessor) return;
            
            try {
                const urlText = document.getElementById('full-url-input').value.trim();
                if (!urlText) {
                    showError('Please enter a URL');
                    return;
                }

                const operation = document.getElementById('full-url-operation').value;
                const result = AdvancedURLProcessor.processFullUrl(urlText, operation);

                // Display result
                const resultDiv = document.getElementById('full-url-result');
                resultDiv.innerHTML = `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3">🌐 Full URL ${operation === 'encode' ? 'Encoded' : 'Decoded'}</h4>
                        <div class="flex items-center space-x-2">
                            <textarea id="full-url-result-text" readonly 
                                      class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm min-h-[100px]">${result}</textarea>
                            <button onclick="copyToClipboard('${result.replace(/'/g, "\\'")}')" 
                                    class="btn-secondary px-4 py-2 text-sm">
                                📋 Copy
                            </button>
                        </div>
                    </div>
                `;

                // Show URL info
                const urlInfo = window.URLProcessorUtils.getUrlInfo(result);
                if (urlInfo.isValid) {
                    const infoDiv = document.getElementById('url-info');
                    infoDiv.innerHTML = `
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h5 class="font-medium mb-2">🔍 URL Information</h5>
                            <div class="text-sm space-y-1">
                                <div><strong>Scheme:</strong> ${urlInfo.scheme || 'N/A'}</div>
                                <div><strong>Host:</strong> ${urlInfo.host || 'N/A'}</div>
                                <div><strong>Port:</strong> ${urlInfo.port || 'N/A'}</div>
                                <div><strong>Path:</strong> ${urlInfo.path || 'N/A'}</div>
                                <div><strong>Query:</strong> ${urlInfo.query || 'N/A'}</div>
                                <div><strong>Fragment:</strong> ${urlInfo.fragment || 'N/A'}</div>
                            </div>
                        </div>
                    `;
                }

            } catch (error) {
                console.error('Error processing full URL:', error);
                showError(`Error processing full URL: ${error.message}`);
            }
        }

        // Advanced QR Code Generator Functions
        let AdvancedQRGen = null;

        async function initializeAdvancedQRGenerator() {
            try {
                console.log('Initializing Advanced QR Code Generator...');
                
                // Check if the module is already loaded
                if (typeof AdvancedQRGenerator === 'undefined') {
                    console.log('Loading QR Code Generator module...');
                    try {
                        const module = await import('./src/js/advanced-qr-generator.js');
                        window.AdvancedQRGenerator = module.AdvancedQRGenerator;
                        window.QRUtils = module.QRUtils;
                        console.log('QR Code Generator module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import QR Code Generator module:', importError);
                        showError('Failed to load QR Code Generator module');
                        return false;
                    }
                }

                // Create instance
                AdvancedQRGen = new AdvancedQRGenerator();
                console.log('Advanced QR Code Generator initialized successfully');
                return true;
            } catch (error) {
                console.error('Error initializing Advanced QR Code Generator:', error);
                showError(`Error initializing QR Code Generator: ${error.message}`);
                return false;
            }
        }

        async function generateBasicQR() {
            if (!AdvancedQRGen) {
                if (!(await initializeAdvancedQRGenerator())) {
                    return;
                }
            }

            try {
                const input = document.getElementById('qr-input').value.trim();
                if (!input) {
                    showError('Please enter text to encode');
                    return;
                }

                const eccLevel = document.getElementById('qr-ecc-level').value;
                const moduleSize = parseInt(document.getElementById('qr-module-size').value) || 4;
                const foreground = document.getElementById('qr-foreground').value;
                const background = document.getElementById('qr-background').value;

                console.log('Generating basic QR code with:', { input, eccLevel, moduleSize, foreground, background });

                const result = AdvancedQRGen.generate(input, {
                    eccLevel,
                    autoVersion: true,
                    autoMask: true,
                    quietZone: 4
                });

                console.log('QR generation result:', result);
                displayQRResult(result, { moduleSize, foreground, background });
            } catch (error) {
                console.error('Error generating basic QR code:', error);
                showError(`Error generating QR code: ${error.message}`);
            }
        }

        async function generateAdvancedQR() {
            if (!AdvancedQRGen) {
                if (!(await initializeAdvancedQRGenerator())) {
                    return;
                }
            }

            try {
                const input = document.getElementById('qr-advanced-input').value.trim();
                if (!input) {
                    showError('Please enter text to encode');
                    return;
                }

                const version = document.getElementById('qr-version').value;
                const eccLevel = document.getElementById('qr-advanced-ecc').value;
                const maskPattern = document.getElementById('qr-mask-pattern').value;
                const moduleSize = parseInt(document.getElementById('qr-advanced-module-size').value) || 4;
                const quietZone = parseInt(document.getElementById('qr-quiet-zone').value) || 4;
                const foreground = document.getElementById('qr-advanced-foreground').value;
                const background = document.getElementById('qr-advanced-background').value;

                const options = {
                    eccLevel,
                    quietZone,
                    autoVersion: version === 'auto',
                    autoMask: maskPattern === 'auto'
                };

                if (version !== 'auto') {
                    options.version = parseInt(version);
                }

                if (maskPattern !== 'auto') {
                    options.maskPattern = parseInt(maskPattern);
                }

                console.log('Generating advanced QR code with:', { input, options });

                const result = AdvancedQRGen.generate(input, options);
                console.log('Advanced QR generation result:', result);
                displayQRResult(result, { moduleSize, foreground, background });
            } catch (error) {
                console.error('Error generating advanced QR code:', error);
                showError(`Error generating QR code: ${error.message}`);
            }
        }

        function displayQRResult(result, renderOptions) {
            const resultDiv = document.getElementById('qr-result');
            const displayDiv = document.getElementById('qr-display');
            const detailsDiv = document.getElementById('qr-details');

            if (!resultDiv || !displayDiv || !detailsDiv) return;

            try {
                // Generate SVG
                const svg = AdvancedQRGen.renderSVG(result.matrix, renderOptions);
                displayDiv.innerHTML = svg;

                // Display details
                const info = result;
                detailsDiv.innerHTML = `
                    <div class="space-y-2">
                        <div><strong>Version:</strong> ${info.version}</div>
                        <div><strong>Size:</strong> ${info.matrix.size}×${info.matrix.size} modules</div>
                        <div><strong>ECC Level:</strong> ${info.eccLevel} (${getECCDescription(info.eccLevel)})</div>
                        <div><strong>Mask Pattern:</strong> ${info.maskPattern}</div>
                        <div><strong>Data Length:</strong> ${info.data.length} characters</div>
                        <div><strong>Total Bits:</strong> ${info.totalBits}</div>
                        <div><strong>Total Codewords:</strong> ${info.totalCodewords}</div>
                        <div><strong>Segments:</strong> ${info.segments.length}</div>
                    </div>
                `;

                resultDiv.classList.remove('hidden');
            } catch (error) {
                console.error('Error displaying QR result:', error);
                showError(`Error displaying QR result: ${error.message}`);
            }
        }

        function getECCDescription(eccLevel) {
            const descriptions = {
                'L': 'Low (7% recovery)',
                'M': 'Medium (15% recovery)',
                'Q': 'Quartile (25% recovery)',
                'H': 'High (30% recovery)'
            };
            return descriptions[eccLevel] || 'Unknown';
        }

        function switchQRMode(mode) {
            // Hide all modes
            document.querySelectorAll('.qr-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.qr-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'basic') {
                document.getElementById('qr-basic-mode').classList.remove('hidden');
                document.getElementById('qr-basic-tab').classList.add('active');
            } else if (mode === 'advanced') {
                document.getElementById('qr-advanced-mode').classList.remove('hidden');
                document.getElementById('qr-advanced-tab').classList.add('active');
            } else if (mode === 'analysis') {
                document.getElementById('qr-analysis-mode').classList.remove('hidden');
                document.getElementById('qr-analysis-tab').classList.add('active');
            }
        }

        function switchUUIDMode(mode) {
            // Hide all modes
            document.querySelectorAll('.uuid-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.uuid-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'generate') {
                document.getElementById('uuid-generate-mode').classList.remove('hidden');
                document.getElementById('uuid-generate-tab').classList.add('active');
            } else if (mode === 'validate') {
                document.getElementById('uuid-validate-mode').classList.remove('hidden');
                document.getElementById('uuid-validate-tab').classList.add('active');
            }
        }

        function switchHashMode(mode) {
            // Hide all modes
            document.querySelectorAll('.hash-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.hash-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'generate') {
                document.getElementById('hash-generate-mode').classList.remove('hidden');
                document.getElementById('hash-generate-tab').classList.add('active');
            } else if (mode === 'multiple') {
                document.getElementById('hash-multiple-mode').classList.remove('hidden');
                document.getElementById('hash-multiple-tab').classList.add('active');
            } else if (mode === 'validate') {
                document.getElementById('hash-validate-mode').classList.remove('hidden');
                document.getElementById('hash-validate-tab').classList.add('active');
            }
        }

        function switchURLTab(mode) {
            // Hide all tab contents
            document.querySelectorAll('.url-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('[id^="url-"][id$="-tab"]').forEach(tab => {
                tab.classList.remove('bg-white', 'text-blue-600', 'shadow-sm');
                tab.classList.add('text-gray-500', 'hover:text-gray-700');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(`url-${mode}-content`);
            if (selectedContent) {
                selectedContent.classList.remove('hidden');
            }
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(`url-${mode}-tab`);
            if (selectedTab) {
                selectedTab.classList.add('bg-white', 'text-blue-600', 'shadow-sm');
                selectedTab.classList.remove('text-gray-500', 'hover:text-gray-700');
            }
        }

        // Advanced JSON Processor Functions
        let AdvancedJSONProcessor = null;

        async function initializeAdvancedJSONProcessor() {
            try {
                console.log('Initializing Advanced JSON Processor...');
                
                // Check if the module is already loaded
                if (typeof window.AdvancedJSONProcessor === 'undefined') {
                    console.log('Loading JSON Processor module...');
                    try {
                        const module = await import('./src/js/advanced-json-formatter.js');
                        window.AdvancedJSONProcessor = module.AdvancedJSONProcessor;
                        window.JSONUtils = module.JSONUtils;
                        console.log('JSON Processor module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import JSON Processor module:', importError);
                        showError('Failed to load JSON Processor module');
                        return false;
                    }
                }

                // Create instance
                AdvancedJSONProcessor = new window.AdvancedJSONProcessor();
                console.log('Advanced JSON Processor initialized successfully');
                
                return true;
            } catch (error) {
                console.error('Error initializing Advanced JSON Processor:', error);
                showError(`Error initializing JSON Processor: ${error.message}`);
                return false;
            }
        }

        async function formatJSON() {
            if (!AdvancedJSONProcessor) {
                if (!(await initializeAdvancedJSONProcessor())) {
                    return;
                }
            }

            try {
                const jsonText = document.getElementById('json-input').value.trim();
                if (!jsonText) {
                    showError('Please enter JSON to format');
                    return;
                }

                const options = {
                    indent_size: parseInt(document.getElementById('json-indent-size').value) || 2,
                    use_tabs: false, // Not implemented in UI yet
                    sort_keys: document.getElementById('json-sort-keys').checked,
                    max_line_length: parseInt(document.getElementById('json-max-line-length').value) || 80,
                    ensure_ascii: false // Not implemented in UI yet
                };

                console.log('Formatting JSON with options:', options);
                const result = AdvancedJSONProcessor.processJson(jsonText, 'format', options);
                console.log('Formatting result:', result);

                if (result.success) {
                    displayJSONResult(result.output, 'formatted', 'Formatted JSON');
                } else {
                    displayJSONErrors(result.errors);
                }

            } catch (error) {
                console.error('Error formatting JSON:', error);
                showError(`Error formatting JSON: ${error.message}`);
            }
        }

        async function minifyJSON() {
            if (!AdvancedJSONProcessor) {
                if (!(await initializeAdvancedJSONProcessor())) {
                    return;
                }
            }

            try {
                const jsonText = document.getElementById('json-minify-input').value.trim();
                if (!jsonText) {
                    showError('Please enter JSON to minify');
                    return;
                }

                console.log('Minifying JSON...');
                const result = AdvancedJSONProcessor.processJson(jsonText, 'minify');
                console.log('Minification result:', result);

                if (result.success) {
                    displayJSONMinifyResult(result.output, result.metadata.compression_ratio);
                } else {
                    displayJSONErrors(result.errors);
                }

            } catch (error) {
                console.error('Error minifying JSON:', error);
                showError(`Error minifying JSON: ${error.message}`);
            }
        }

        async function validateJSON() {
            if (!AdvancedJSONProcessor) {
                if (!(await initializeAdvancedJSONProcessor())) {
                    return;
                }
            }

            try {
                const jsonText = document.getElementById('json-validate-input').value.trim();
                if (!jsonText) {
                    showError('Please enter JSON to validate');
                    return;
                }

                console.log('Validating JSON...');
                const result = AdvancedJSONProcessor.processJson(jsonText, 'validate');
                console.log('Validation result:', result);

                if (result.success) {
                    const tokenCount = result.metadata.token_count || 0;
                    displayJSONValidationResult(true, [], tokenCount);
                } else {
                    displayJSONValidationResult(false, result.errors, 0);
                }

            } catch (error) {
                console.error('Error validating JSON:', error);
                showError(`Error validating JSON: ${error.message}`);
            }
        }

        async function highlightJSON() {
            if (!AdvancedJSONProcessor) {
                if (!(await initializeAdvancedJSONProcessor())) {
                    return;
                }
            }

            try {
                const jsonText = document.getElementById('json-highlight-input').value.trim();
                if (!jsonText) {
                    showError('Please enter JSON to highlight');
                    return;
                }

                console.log('Highlighting JSON...');
                const result = AdvancedJSONProcessor.processJson(jsonText, 'highlight');
                console.log('Highlighting result:', result);

                if (result.success) {
                    displayJSONHighlight(result.output);
                } else {
                    displayJSONErrors(result.errors);
                }

            } catch (error) {
                console.error('Error highlighting JSON:', error);
                showError(`Error highlighting JSON: ${error.message}`);
            }
        }

        function displayJSONResult(output, type, title) {
            const resultDiv = document.getElementById('json-result');
            const icon = type === 'formatted' ? '📄' : type === 'minified' ? '🗜️' : type === 'valid' ? '✅' : '📄';
            
            resultDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">${icon} ${title}</h4>
                    <div class="flex items-start space-x-2">
                        <textarea id="json-output" readonly 
                                  class="flex-1 p-3 border border-gray-300 rounded-lg bg-white font-mono text-sm min-h-[200px]">${output}</textarea>
                        <button onclick="copyToClipboard('${output.replace(/'/g, "\\'")}')" 
                                class="btn-secondary px-4 py-2 text-sm">
                            📋 Copy
                        </button>
                    </div>
                </div>
            `;
        }

        function displayJSONHighlight(htmlOutput) {
            const resultDiv = document.getElementById('json-result');
            
            resultDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">🎨 Syntax Highlighted JSON</h4>
                    <div class="bg-white border border-gray-300 rounded-lg p-4 font-mono text-sm min-h-[200px] overflow-auto">
                        ${htmlOutput}
                    </div>
                </div>
            `;
        }

        function displayJSONErrors(errors) {
            const resultDiv = document.getElementById('json-result');
            
            if (errors && errors.length > 0) {
                const errorHtml = errors.map(error => `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-3 mb-2">
                        <div class="flex items-start space-x-2">
                            <span class="text-red-500 text-lg">❌</span>
                            <div>
                                <p class="text-red-800 font-medium">${error.message}</p>
                                ${error.line ? `<p class="text-red-600 text-sm">Line ${error.line}, Column ${error.column}</p>` : ''}
                                ${error.token ? `<p class="text-red-600 text-sm">Token: "${error.token}"</p>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                
                resultDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3 text-red-800">❌ JSON Validation Errors</h4>
                        ${errorHtml}
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-3 text-red-800">❌ JSON Processing Error</h4>
                        <p class="text-red-600">An unknown error occurred while processing the JSON.</p>
                    </div>
                `;
            }
        }

        function switchJSONTab(mode) {
            // Hide all tab contents
            document.querySelectorAll('.json-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('[id^="json-"][id$="-tab"]').forEach(tab => {
                tab.classList.remove('bg-white', 'text-blue-600', 'shadow-sm');
                tab.classList.add('text-gray-500', 'hover:text-gray-700');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(`json-${mode}-content`);
            if (selectedContent) {
                selectedContent.classList.remove('hidden');
            }
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(`json-${mode}-tab`);
            if (selectedTab) {
                selectedTab.classList.add('bg-white', 'text-blue-600', 'shadow-sm');
                selectedTab.classList.remove('text-gray-500', 'hover:text-gray-700');
            }
        }

        // JSON Formatter Utility Functions
        function copyJSONResult() {
            const output = document.getElementById('json-output').value;
            if (output) {
                navigator.clipboard.writeText(output).then(() => {
                    showSuccess('Formatted JSON copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showError('Failed to copy to clipboard');
                });
            }
        }

        function copyJSONMinifyResult() {
            const output = document.getElementById('json-minify-output').value;
            if (output) {
                navigator.clipboard.writeText(output).then(() => {
                    showSuccess('Minified JSON copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showError('Failed to copy to clipboard');
                });
            }
        }

        function copyJSONHighlightResult() {
            const output = document.getElementById('json-highlight-output').innerHTML;
            if (output) {
                navigator.clipboard.writeText(output).then(() => {
                    showSuccess('Highlighted JSON HTML copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showError('Failed to copy to clipboard');
                });
            }
        }

        function clearJSONInput() {
            document.getElementById('json-input').value = '';
            document.getElementById('json-output').value = '';
            hideJSONError();
        }

        function showJSONError(message) {
            const errorDiv = document.getElementById('json-error');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideJSONError() {
            const errorDiv = document.getElementById('json-error');
            errorDiv.classList.add('hidden');
        }

        function showSuccess(message) {
            // Create a temporary success message
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        function showError(message) {
            showJSONError(message);
        }

        // Update the display functions to work with the new modal structure
        function displayJSONResult(output, type, title) {
            const outputElement = document.getElementById('json-output');
            if (outputElement) {
                outputElement.value = output;
            }
        }

        function displayJSONMinifyResult(output, compressionRatio) {
            const outputElement = document.getElementById('json-minify-output');
            const infoElement = document.getElementById('json-compression-info');
            
            if (outputElement) {
                outputElement.value = output;
            }
            
            if (infoElement && compressionRatio !== undefined) {
                infoElement.textContent = `Compression ratio: ${compressionRatio}%`;
            }
        }

        function displayJSONValidationResult(isValid, errors, tokenCount) {
            const resultsDiv = document.getElementById('json-validation-results');
            const statusDiv = document.getElementById('json-validation-status');
            const detailsDiv = document.getElementById('json-validation-details');
            
            if (resultsDiv) {
                resultsDiv.classList.remove('hidden');
                
                if (isValid) {
                    resultsDiv.className = 'p-4 rounded-lg border border-green-200 bg-green-50';
                    statusDiv.textContent = '✅ Valid JSON';
                    statusDiv.className = 'font-medium mb-2 text-green-800';
                    detailsDiv.textContent = `Valid JSON structure with ${tokenCount || 0} tokens`;
                    detailsDiv.className = 'text-sm text-green-600';
                } else {
                    resultsDiv.className = 'p-4 rounded-lg border border-red-200 bg-red-50';
                    statusDiv.textContent = '❌ Invalid JSON';
                    statusDiv.className = 'font-medium mb-2 text-red-800';
                    
                    if (errors && errors.length > 0) {
                        detailsDiv.innerHTML = errors.map(error => 
                            `<div class="mb-1">• ${error.message}${error.line ? ` (Line ${error.line}, Column ${error.column})` : ''}</div>`
                        ).join('');
                    } else {
                        detailsDiv.textContent = 'Unknown validation error';
                    }
                    detailsDiv.className = 'text-sm text-red-600';
                }
            }
        }

        function displayJSONHighlight(htmlOutput) {
            const outputElement = document.getElementById('json-highlight-output');
            if (outputElement) {
                outputElement.innerHTML = htmlOutput;
            }
        }

        function displayJSONErrors(errors) {
            if (errors && errors.length > 0) {
                const errorMessage = errors.map(error => 
                    `${error.message}${error.line ? ` (Line ${error.line}, Column ${error.column})` : ''}`
                ).join('; ');
                showJSONError(errorMessage);
            } else {
                showJSONError('An unknown error occurred while processing the JSON.');
            }
        }

        // Advanced Timestamp Converter Functions
        let AdvancedTimestampConverter = null;

        async function initializeAdvancedTimestampConverter() {
            try {
                console.log('Initializing Advanced Timestamp Converter...');
                
                // Check if the module is already loaded
                if (typeof window.AdvancedTimestampConverter === 'undefined') {
                    console.log('Loading Timestamp Converter module...');
                    try {
                        const module = await import('./src/js/advanced-timestamp-converter.js');
                        window.AdvancedTimestampConverter = module.TimestampConverter;
                        window.TimestampUtils = module.TimestampUtils;
                        console.log('Timestamp Converter module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Timestamp Converter module:', importError);
                        showTimestampError('Failed to load Timestamp Converter module');
                        return false;
                    }
                }

                // Create instance
                AdvancedTimestampConverter = new window.AdvancedTimestampConverter();
                console.log('Advanced Timestamp Converter initialized successfully');
                
                return true;
            } catch (error) {
                console.error('Error initializing Advanced Timestamp Converter:', error);
                showTimestampError(`Error initializing Timestamp Converter: ${error.message}`);
                return false;
            }
        }

        async function convertTimestamp() {
            if (!AdvancedTimestampConverter) {
                if (!(await initializeAdvancedTimestampConverter())) {
                    return;
                }
            }

            try {
                const inputValue = document.getElementById('timestamp-input').value.trim();
                if (!inputValue) {
                    showTimestampError('Please enter a timestamp to convert');
                    return;
                }

                const inputFormat = document.getElementById('timestamp-input-format').value || null;
                const outputFormat = document.getElementById('timestamp-output-format').value || 'ISO8601';
                const targetTimezone = document.getElementById('timestamp-timezone').value || 'UTC';

                console.log('Converting timestamp:', { inputValue, inputFormat, outputFormat, targetTimezone });
                const result = AdvancedTimestampConverter.convert(inputValue, inputFormat, outputFormat, targetTimezone);
                console.log('Conversion result:', result);

                document.getElementById('timestamp-output').value = result;
                hideTimestampError();

            } catch (error) {
                console.error('Error converting timestamp:', error);
                showTimestampError(`Error converting timestamp: ${error.message}`);
            }
        }

        async function updateCurrentTime() {
            if (!AdvancedTimestampConverter) {
                if (!(await initializeAdvancedTimestampConverter())) {
                    return;
                }
            }

            try {
                const now = Date.now();
                
                // Update epoch seconds
                document.getElementById('now-epoch-s').textContent = Math.floor(now / 1000);
                
                // Update epoch milliseconds
                document.getElementById('now-epoch-ms').textContent = now;
                
                // Update ISO 8601 UTC
                document.getElementById('now-iso-utc').textContent = AdvancedTimestampConverter.convert(now, null, 'ISO8601', 'UTC');
                
                // Update ISO 8601 Local (using browser's timezone)
                const localOffset = new Date().getTimezoneOffset();
                const localTimezone = localOffset === 0 ? 'UTC' : `+${Math.floor(Math.abs(localOffset) / 60).toString().padStart(2, '0')}:${(Math.abs(localOffset) % 60).toString().padStart(2, '0')}`;
                document.getElementById('now-iso-local').textContent = AdvancedTimestampConverter.convert(now, null, 'ISO8601', localTimezone);

            } catch (error) {
                console.error('Error updating current time:', error);
                showTimestampError(`Error updating current time: ${error.message}`);
            }
        }

        async function calculateRelativeTime() {
            if (!AdvancedTimestampConverter) {
                if (!(await initializeAdvancedTimestampConverter())) {
                    return;
                }
            }

            try {
                const inputValue = document.getElementById('relative-input').value.trim();
                if (!inputValue) {
                    showTimestampError('Please enter a timestamp for relative time calculation');
                    return;
                }

                const result = AdvancedTimestampConverter.convert(inputValue, null, 'relative');
                document.getElementById('relative-output').textContent = result;
                hideTimestampError();

            } catch (error) {
                console.error('Error calculating relative time:', error);
                showTimestampError(`Error calculating relative time: ${error.message}`);
            }
        }

        function switchTimestampTab(mode) {
            // Hide all tab contents
            document.querySelectorAll('.timestamp-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('[id^="timestamp-"][id$="-tab"]').forEach(tab => {
                tab.classList.remove('bg-white', 'text-blue-600', 'shadow-sm');
                tab.classList.add('text-gray-500', 'hover:text-gray-700');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(`timestamp-${mode}-content`);
            if (selectedContent) {
                selectedContent.classList.remove('hidden');
            }
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(`timestamp-${mode}-tab`);
            if (selectedTab) {
                selectedTab.classList.add('bg-white', 'text-blue-600', 'shadow-sm');
                selectedTab.classList.remove('text-gray-500', 'hover:text-gray-700');
            }

            // Auto-update current time when switching to now tab
            if (mode === 'now') {
                updateCurrentTime();
            }
        }

        function copyTimestampResult() {
            const output = document.getElementById('timestamp-output').value;
            if (output) {
                navigator.clipboard.writeText(output).then(() => {
                    showTimestampSuccess('Converted timestamp copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showTimestampError('Failed to copy to clipboard');
                });
            }
        }

        function clearTimestampInput() {
            document.getElementById('timestamp-input').value = '';
            document.getElementById('timestamp-output').value = '';
            document.getElementById('relative-input').value = '';
            document.getElementById('relative-output').textContent = '';
            hideTimestampError();
        }

        function showTimestampError(message) {
            const errorDiv = document.getElementById('timestamp-error');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideTimestampError() {
            const errorDiv = document.getElementById('timestamp-error');
            errorDiv.classList.add('hidden');
        }

        function showTimestampSuccess(message) {
            // Create a temporary success message
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // Advanced Timezone Converter Functions
        let AdvancedTimezoneConverter = null;

        async function initializeAdvancedTimezoneConverter() {
            try {
                console.log('Initializing Advanced Timezone Converter...');
                
                // Check if the module is already loaded
                if (typeof window.TimezoneConverter === 'undefined') {
                    console.log('Loading Timezone Converter module...');
                    try {
                        const module = await import('./src/js/advanced-timezone-converter.js');
                        window.TimezoneConverter = module.TimezoneConverter;
                        window.TimezoneUtils = module.TimezoneUtils;
                        console.log('Timezone Converter module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Timezone Converter module:', importError);
                        showTimezoneError('Failed to load Timezone Converter module');
                        return false;
                    }
                }

                // Create instance
                AdvancedTimezoneConverter = new window.TimezoneConverter();
                console.log('Advanced Timezone Converter initialized successfully');
                
                return true;
            } catch (error) {
                console.error('Error initializing Advanced Timezone Converter:', error);
                showTimezoneError(`Error initializing Timezone Converter: ${error.message}`);
                return false;
            }
        }

        async function convertTimezone() {
            try {
                if (!AdvancedTimezoneConverter) {
                    const initialized = await initializeAdvancedTimezoneConverter();
                    if (!initialized) return;
                }

                const inputValue = document.getElementById('timezone-input').value.trim();
                const inputFormat = document.getElementById('timezone-input-format').value.trim() || null;
                const sourceTz = document.getElementById('timezone-source').value;
                const targetTz = document.getElementById('timezone-target').value;
                const outputFormat = document.getElementById('timezone-output-format').value;

                if (!inputValue) {
                    showTimezoneError('Please enter an input value');
                    return;
                }

                hideTimezoneError();

                const result = AdvancedTimezoneConverter.convert(inputValue, inputFormat, sourceTz, targetTz, outputFormat);
                document.getElementById('timezone-output').value = result;
                
            } catch (error) {
                console.error('Timezone conversion error:', error);
                showTimezoneError(`Conversion failed: ${error.message}`);
            }
        }

        async function updateCurrentTimes() {
            try {
                if (!AdvancedTimezoneConverter) {
                    const initialized = await initializeAdvancedTimezoneConverter();
                    if (!initialized) return;
                }

                const timezones = [
                    { id: 'current-utc', tz: 'UTC' },
                    { id: 'current-ny', tz: 'America/New_York' },
                    { id: 'current-london', tz: 'Europe/London' },
                    { id: 'current-tokyo', tz: 'Asia/Tokyo' },
                    { id: 'current-kolkata', tz: 'Asia/Kolkata' },
                    { id: 'current-sydney', tz: 'Australia/Sydney' }
                ];

                for (const { id, tz } of timezones) {
                    try {
                        const currentTime = window.TimezoneUtils.getCurrentTimeInTimezone(tz, 'YYYY-MM-DD HH:mm:ss z');
                        document.getElementById(id).textContent = currentTime;
                    } catch (error) {
                        document.getElementById(id).textContent = 'Error loading time';
                    }
                }
            } catch (error) {
                console.error('Error updating current times:', error);
            }
        }

        async function showTimezoneInfo() {
            try {
                if (!AdvancedTimezoneConverter) {
                    const initialized = await initializeAdvancedTimezoneConverter();
                    if (!initialized) return;
                }

                const selectedTz = document.getElementById('timezone-info-select').value;
                if (!selectedTz) {
                    document.getElementById('timezone-info-display').classList.add('hidden');
                    return;
                }

                const info = AdvancedTimezoneConverter.getTimezoneInfo(selectedTz);
                if (!info) {
                    document.getElementById('timezone-info-display').classList.add('hidden');
                    return;
                }

                const currentOffset = window.TimezoneUtils.getCurrentTimezoneOffset(selectedTz);
                const observesDST = window.TimezoneUtils.observesDST(selectedTz);
                const currentAbbr = window.TimezoneUtils.getCurrentTimezoneAbbreviation(selectedTz);

                const infoHtml = `
                    <div class="space-y-2">
                        <div><strong>Name:</strong> ${info.name}</div>
                        <div><strong>Current Abbreviation:</strong> ${currentAbbr}</div>
                        <div><strong>Current Offset:</strong> ${currentOffset > 0 ? '+' : ''}${currentOffset / 60} hours</div>
                        <div><strong>Observes DST:</strong> ${observesDST ? 'Yes' : 'No'}</div>
                        ${info.transitions && info.transitions.length > 0 ? `
                            <div><strong>Recent Transitions:</strong></div>
                            <div class="ml-4 text-xs">
                                ${info.transitions.slice(-3).map(t => 
                                    `${new Date(t.at_utc_ms).toLocaleDateString()}: ${t.abbreviation} (${t.offset_minutes / 60 > 0 ? '+' : ''}${t.offset_minutes / 60}h)`
                                ).join('<br>')}
                            </div>
                        ` : ''}
                    </div>
                `;

                document.getElementById('timezone-info-content-display').innerHTML = infoHtml;
                document.getElementById('timezone-info-display').classList.remove('hidden');
            } catch (error) {
                console.error('Error showing timezone info:', error);
            }
        }

        function switchTimezoneTab(mode) {
            // Hide all tab contents
            document.querySelectorAll('.timezone-tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('[id^="timezone-"][id$="-tab"]').forEach(tab => {
                tab.classList.remove('bg-white', 'text-blue-600', 'shadow-sm');
                tab.classList.add('text-gray-500');
            });

            // Show selected tab content
            document.getElementById(`timezone-${mode}-content`).classList.remove('hidden');

            // Add active class to selected tab
            const activeTab = document.getElementById(`timezone-${mode}-tab`);
            activeTab.classList.add('bg-white', 'text-blue-600', 'shadow-sm');
            activeTab.classList.remove('text-gray-500');

            // Auto-update current times when switching to current tab
            if (mode === 'current') {
                updateCurrentTimes();
            }
        }

        function copyTimezoneResult() {
            const output = document.getElementById('timezone-output').value;
            if (output) {
                navigator.clipboard.writeText(output).then(() => {
                    showTimezoneSuccess('Converted timestamp copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showTimezoneError('Failed to copy to clipboard');
                });
            }
        }

        function clearTimezoneInput() {
            document.getElementById('timezone-input').value = '';
            document.getElementById('timezone-input-format').value = '';
            document.getElementById('timezone-output').value = '';
            hideTimezoneError();
        }

        function showTimezoneError(message) {
            const errorDiv = document.getElementById('timezone-error');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideTimezoneError() {
            const errorDiv = document.getElementById('timezone-error');
            errorDiv.classList.add('hidden');
        }

        function showTimezoneSuccess(message) {
            // Create a temporary success message
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // Advanced Lorem Generator Functions
        let loremGenerator = null;

        async function initializeAdvancedLoremGenerator() {
            try {
                console.log('Initializing Advanced Lorem Generator...');
                
                // Check if the module is already loaded
                if (typeof window.LoremGenerator === 'undefined') {
                    console.log('Loading Lorem Generator module...');
                    try {
                        const module = await import('./src/js/advanced-lorem-generator.js');
                        window.LoremGenerator = module.LoremGenerator;
                        window.WordPoolManager = module.WordPoolManager;
                        window.WeightedSelector = module.WeightedSelector;
                        window.TextGenerator = module.TextGenerator;
                        window.OutputFormatter = module.OutputFormatter;
                        console.log('Lorem Generator module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Lorem Generator module:', importError);
                        showLoremError('Failed to load Lorem Generator module. Please refresh the page.');
                        return;
                    }
                }
                
                // Initialize the generator
                loremGenerator = new window.LoremGenerator();
                console.log('Advanced Lorem Generator initialized successfully');
                
                // Populate themes dropdown
                populateLoremThemes();
                
                // Set default tab
                switchLoremTab('generate');
                
            } catch (error) {
                console.error('Error initializing Advanced Lorem Generator:', error);
                showLoremError('Failed to initialize Lorem Generator. Please try again.');
            }
        }

        function populateLoremThemes() {
            if (!loremGenerator) return;
            
            const themeSelect = document.getElementById('lorem-theme');
            if (!themeSelect) return;
            
            // Clear existing options
            themeSelect.innerHTML = '';
            
            const themes = loremGenerator.getAvailableThemes();
            const themeNames = {
                'lorem': 'Classic Lorem Ipsum',
                'bacon': 'Bacon Ipsum',
                'corporate': 'Corporate Ipsum',
                'space': 'Space Ipsum',
                'tech': 'Tech Ipsum'
            };
            
            themes.forEach(theme => {
                const option = document.createElement('option');
                option.value = theme;
                option.textContent = themeNames[theme] || theme.charAt(0).toUpperCase() + theme.slice(1);
                themeSelect.appendChild(option);
            });
        }

        function switchLoremTab(tabName) {
            // Hide all tab contents
            const contents = ['lorem-generate-content', 'lorem-themes-content', 'lorem-options-content'];
            contents.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('hidden');
                }
            });
            
            // Remove active class from all tabs
            const tabs = ['lorem-generate-tab', 'lorem-themes-tab', 'lorem-options-tab'];
            tabs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                    element.classList.add('text-gray-500');
                }
            });
            
            // Show selected tab content
            const contentId = `lorem-${tabName}-content`;
            const contentElement = document.getElementById(contentId);
            if (contentElement) {
                contentElement.classList.remove('hidden');
            }
            
            // Add active class to selected tab
            const tabId = `lorem-${tabName}-tab`;
            const tabElement = document.getElementById(tabId);
            if (tabElement) {
                tabElement.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                tabElement.classList.remove('text-gray-500');
            }
        }

        function generateLorem() {
            if (!loremGenerator) {
                showLoremError('Lorem Generator not initialized. Please refresh the page.');
                return;
            }
            
            try {
                hideLoremError();
                hideLoremSuccess();
                
                const outputType = document.getElementById('lorem-output-type').value;
                const theme = document.getElementById('lorem-theme').value;
                const count = parseInt(document.getElementById('lorem-count').value);
                
                if (isNaN(count) || count < 1 || count > 50) {
                    showLoremError('Count must be between 1 and 50.');
                    return;
                }
                
                // Get options
                const options = {
                    includeHtml: document.getElementById('lorem-include-html').checked,
                    randomFormatting: document.getElementById('lorem-random-formatting').checked,
                    listType: document.getElementById('lorem-list-type').value,
                    minWords: parseInt(document.getElementById('lorem-min-words').value) || 4,
                    maxWords: parseInt(document.getElementById('lorem-max-words').value) || 20,
                    sentencesPerParagraph: parseInt(document.getElementById('lorem-sentences-per-paragraph').value) || 4
                };
                
                // Generate text
                const result = loremGenerator.generate(outputType, count, theme, options);
                
                if (result.error) {
                    showLoremError(result.error);
                    return;
                }
                
                // Display result
                const outputElement = document.getElementById('lorem-output');
                if (outputElement) {
                    outputElement.value = result.content;
                }
                
                // Show success message with metadata
                const metadata = [];
                if (result.metadata.wordCount) metadata.push(`${result.metadata.wordCount} words`);
                if (result.metadata.sentenceCount) metadata.push(`${result.metadata.sentenceCount} sentences`);
                if (result.metadata.paragraphCount) metadata.push(`${result.metadata.paragraphCount} paragraphs`);
                if (result.metadata.itemCount) metadata.push(`${result.metadata.itemCount} items`);
                
                const message = `Generated ${result.outputType} in ${theme} theme${metadata.length ? ` (${metadata.join(', ')})` : ''}`;
                showLoremSuccess(message);
                
            } catch (error) {
                console.error('Error generating Lorem text:', error);
                showLoremError('Failed to generate text. Please try again.');
            }
        }

        function setLoremTheme(theme) {
            const themeSelect = document.getElementById('lorem-theme');
            if (themeSelect) {
                themeSelect.value = theme;
            }
            
            // Switch back to generate tab
            switchLoremTab('generate');
            
            showLoremSuccess(`Theme set to ${theme}`);
        }

        function copyLoremOutput() {
            const outputElement = document.getElementById('lorem-output');
            if (!outputElement || !outputElement.value) {
                showLoremError('No text to copy.');
                return;
            }
            
            navigator.clipboard.writeText(outputElement.value).then(() => {
                showLoremSuccess('Text copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy text:', err);
                showLoremError('Failed to copy text to clipboard.');
            });
        }

        function clearLoremOutput() {
            const outputElement = document.getElementById('lorem-output');
            if (outputElement) {
                outputElement.value = '';
            }
            hideLoremError();
            hideLoremSuccess();
        }

        function showLoremError(message) {
            const errorElement = document.getElementById('lorem-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function hideLoremError() {
            const errorElement = document.getElementById('lorem-error');
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
        }

        function showLoremSuccess(message) {
            const successElement = document.getElementById('lorem-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.remove('hidden');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    hideLoremSuccess();
                }, 3000);
            }
        }

        function hideLoremSuccess() {
            const successElement = document.getElementById('lorem-success');
            if (successElement) {
                successElement.classList.add('hidden');
            }
        }

        // Advanced Markdown Preview Functions
        let markdownPreview = null;

        async function initializeAdvancedMarkdownPreview() {
            try {
                console.log('Initializing Advanced Markdown Preview...');
                
                // Prevent multiple initializations
                if (markdownPreview) {
                    console.log('Markdown Preview already initialized');
                    return;
                }
                
                // Check if the module is already loaded
                if (typeof window.MarkdownPreview === 'undefined') {
                    console.log('Loading Markdown Preview module...');
                    try {
                        const module = await import('./src/js/markdown-preview-index.js');
                        window.MarkdownPreview = module.MarkdownPreview;
                        window.MarkdownLexer = module.MarkdownLexer;
                        window.MarkdownParser = module.MarkdownParser;
                        window.HTMLRenderer = module.HTMLRenderer;
                        window.SyntaxHighlighter = module.SyntaxHighlighter;
                        console.log('Markdown Preview module loaded successfully');
                    } catch (importError) {
                        console.error('Failed to import Markdown Preview module:', importError);
                        showMarkdownError('Failed to load Markdown Preview module. Please refresh the page.');
                        return;
                    }
                }
                
                // Initialize the preview system
                markdownPreview = new window.MarkdownPreview();
                console.log('Advanced Markdown Preview initialized successfully');
                
                // Set default tab
                switchMarkdownTab('editor');
                
                // Set up event listeners
                setupMarkdownEventListeners();
                
            } catch (error) {
                console.error('Error initializing Advanced Markdown Preview:', error);
                showMarkdownError('Failed to initialize Markdown Preview. Please try again.');
            }
        }

        let markdownEventListenersSetup = false;
        
        function setupMarkdownEventListeners() {
            if (markdownEventListenersSetup) {
                return; // Prevent duplicate event listeners
            }
            
            // Set up live preview for split view
            const splitInput = document.getElementById('markdown-split-input');
            if (splitInput) {
                splitInput.addEventListener('input', debounceMarkdownUpdate);
            }
            
            // Set up options change listeners
            const themeSelect = document.getElementById('markdown-theme');
            if (themeSelect) {
                themeSelect.addEventListener('change', updateMarkdownPreview);
            }
            
            const options = ['markdown-syntax-highlighting', 'markdown-sanitize', 'markdown-target-blank'];
            options.forEach(optionId => {
                const element = document.getElementById(optionId);
                if (element) {
                    element.addEventListener('change', updateMarkdownPreview);
                }
            });
            
            markdownEventListenersSetup = true;
        }

        function switchMarkdownTab(tabName) {
            // Hide all tab contents
            const contents = ['markdown-editor-content', 'markdown-preview-content', 'markdown-split-content'];
            contents.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('hidden');
                }
            });
            
            // Remove active class from all tabs
            const tabs = ['markdown-editor-tab', 'markdown-preview-tab', 'markdown-split-tab'];
            tabs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                    element.classList.add('text-gray-500');
                }
            });
            
            // Show selected tab content
            const contentId = `markdown-${tabName}-content`;
            const contentElement = document.getElementById(contentId);
            if (contentElement) {
                contentElement.classList.remove('hidden');
            }
            
            // Add active class to selected tab
            const tabId = `markdown-${tabName}-tab`;
            const tabElement = document.getElementById(tabId);
            if (tabElement) {
                tabElement.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                tabElement.classList.remove('text-gray-500');
            }
            
            // Update preview if switching to preview or split view
            if (tabName === 'preview' || tabName === 'split') {
                updateMarkdownPreview();
            }
        }

        function updateMarkdownPreview() {
            console.log('updateMarkdownPreview called');
            
            try {
                console.log('Starting simple markdown preview...');
                hideMarkdownError();
                hideMarkdownSuccess();
                
                // Get markdown input
                const inputElement = document.getElementById('markdown-input');
                const splitInputElement = document.getElementById('markdown-split-input');
                const markdownText = inputElement?.value || splitInputElement?.value || '';
                
                if (!markdownText.trim()) {
                    const previewElement = document.getElementById('markdown-preview-output');
                    const splitPreviewElement = document.getElementById('markdown-split-preview');
                    
                    if (previewElement) {
                        previewElement.innerHTML = '<div class="text-gray-500 text-center py-8">Enter markdown to see preview...</div>';
                    }
                    if (splitPreviewElement) {
                        splitPreviewElement.innerHTML = '<div class="text-gray-500 text-center py-8">Start typing to see live preview...</div>';
                    }
                    return;
                }
                
                // Simple markdown to HTML conversion
                let html = markdownText
                    // Headers
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    // Bold
                    .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                    // Italic
                    .replace(/\*(.*)\*/gim, '<em>$1</em>')
                    // Code blocks
                    .replace(/```([\s\S]*?)```/gim, '<pre><code>$1</code></pre>')
                    // Inline code
                    .replace(/`(.*?)`/gim, '<code>$1</code>')
                    // Line breaks
                    .replace(/\n/gim, '<br>');
                
                // Update preview elements
                const previewElement = document.getElementById('markdown-preview-output');
                const splitPreviewElement = document.getElementById('markdown-split-preview');
                
                if (previewElement) {
                    previewElement.innerHTML = html;
                }
                if (splitPreviewElement) {
                    splitPreviewElement.innerHTML = html;
                }
                
                showMarkdownSuccess('Preview updated successfully');
                console.log('Simple markdown preview completed');
                
            } catch (error) {
                console.error('Error updating markdown preview:', error);
                showMarkdownError('Failed to update preview. Please try again.');
            }
        }

        let markdownUpdateTimer = null;
        
        function debounceMarkdownUpdate() {
            if (markdownUpdateTimer) {
                clearTimeout(markdownUpdateTimer);
            }
            
            markdownUpdateTimer = setTimeout(() => {
                updateMarkdownPreview();
                markdownUpdateTimer = null;
            }, 300);
        }

        function clearMarkdownInput() {
            const inputElement = document.getElementById('markdown-input');
            const splitInputElement = document.getElementById('markdown-split-input');
            
            if (inputElement) {
                inputElement.value = '';
            }
            if (splitInputElement) {
                splitInputElement.value = '';
            }
            
            updateMarkdownPreview();
            hideMarkdownError();
            hideMarkdownSuccess();
        }


        function loadMarkdownSample() {
            const sampleMarkdown = `# Advanced Markdown Preview

This is a **markdown preview** system with *syntax highlighting* and live updates.

## Features

- **Real-time preview** with live updates
- **Syntax highlighting** for code blocks
- **Multiple themes** (GitHub, Dark)
- **HTML sanitization** for security

## Code Example

\`\`\`javascript
function greet(name) {
    console.log(\`Hello, \${name}!\`);
    return \`Welcome, \${name}!\`;
}
\`\`\`

## Lists

- Item 1
- Item 2
- Item 3

## Links

[Visit GitHub](https://github.com) for more information.

## Blockquote

> This is a blockquote with **bold** text.

## Inline Code

Use \`console.log()\` to output messages.

## Emphasis

This text has **bold**, *italic*, and ***bold italic*** formatting.`;

            try {
                console.log('Loading sample markdown...');
                
                const inputElement = document.getElementById('markdown-input');
                const splitInputElement = document.getElementById('markdown-split-input');
                
                if (inputElement) {
                    inputElement.value = sampleMarkdown;
                    console.log('Set input element value');
                }
                if (splitInputElement) {
                    splitInputElement.value = sampleMarkdown;
                    console.log('Set split input element value');
                }
                
                console.log('Calling updateMarkdownPreview...');
                updateMarkdownPreview();
                console.log('updateMarkdownPreview completed');
                
                showMarkdownSuccess('Sample markdown loaded');
                console.log('Sample markdown loaded successfully');
                
            } catch (error) {
                console.error('Error in loadMarkdownSample:', error);
                showMarkdownError('Failed to load sample markdown: ' + error.message);
            }
        }

        function copyMarkdownHtml() {
            const previewElement = document.getElementById('markdown-preview-output');
            if (!previewElement || !previewElement.innerHTML) {
                showMarkdownError('No HTML to copy. Generate a preview first.');
                return;
            }
            
            navigator.clipboard.writeText(previewElement.innerHTML).then(() => {
                showMarkdownSuccess('HTML copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy HTML:', err);
                showMarkdownError('Failed to copy HTML to clipboard.');
            });
        }

        function downloadMarkdownHtml() {
            const previewElement = document.getElementById('markdown-preview-output');
            if (!previewElement || !previewElement.innerHTML) {
                showMarkdownError('No HTML to download. Generate a preview first.');
                return;
            }
            
            const html = previewElement.innerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'markdown-preview.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMarkdownSuccess('HTML file downloaded');
        }

        function showMarkdownError(message) {
            const errorElement = document.getElementById('markdown-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function hideMarkdownError() {
            const errorElement = document.getElementById('markdown-error');
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
        }

        function showMarkdownSuccess(message) {
            const successElement = document.getElementById('markdown-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.remove('hidden');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    hideMarkdownSuccess();
                }, 3000);
            }
        }

        function hideMarkdownSuccess() {
            const successElement = document.getElementById('markdown-success');
            if (successElement) {
                successElement.classList.add('hidden');
            }
        }

        // Advanced CSS/JS Minifier Functions
        let minifier = null;

        function initializeMinifier() {
            if (!minifier) {
                minifier = new UnifiedMinifier();
            }
        }

        function switchMinifierTab(tab) {
            // Hide all modes
            document.querySelectorAll('.minifier-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('[id^="minifier-"][id$="-tab"]').forEach(tab => tab.classList.remove('bg-white', 'text-gray-900', 'shadow-sm'));
            document.querySelectorAll('[id^="minifier-"][id$="-tab"]').forEach(tab => tab.classList.add('text-gray-500', 'hover:text-gray-700'));
            
            // Show selected mode and activate tab
            if (tab === 'css') {
                document.getElementById('minifier-css-mode').classList.remove('hidden');
                document.getElementById('minifier-css-tab').classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                document.getElementById('minifier-css-tab').classList.remove('text-gray-500', 'hover:text-gray-700');
            } else if (tab === 'js') {
                document.getElementById('minifier-js-mode').classList.remove('hidden');
                document.getElementById('minifier-js-tab').classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                document.getElementById('minifier-js-tab').classList.remove('text-gray-500', 'hover:text-gray-700');
            }
        }

        function minifyCSS() {
            try {
                initializeMinifier();
                hideMinifierError();
                hideMinifierSuccess();
                
                const cssInput = document.getElementById('css-input').value;
                if (!cssInput.trim()) {
                    showMinifierError('Please enter CSS code to minify.');
                    return;
                }
                
                // Get options
                const options = {
                    removeComments: document.getElementById('css-remove-comments').checked,
                    removeWhitespace: document.getElementById('css-remove-whitespace').checked,
                    optimizeColors: document.getElementById('css-optimize-colors').checked,
                    optimizeValues: document.getElementById('css-optimize-values').checked,
                    mergeSelectors: document.getElementById('css-merge-selectors').checked,
                    removeEmptyRules: document.getElementById('css-remove-empty-rules').checked
                };
                
                const result = minifier.minify(cssInput, 'css', options);
                
                if (result.success) {
                    document.getElementById('css-output').value = result.minifiedCode;
                    updateCSSStats(result);
                    showMinifierSuccess('CSS minified successfully!');
                } else {
                    showMinifierError('Minification failed: ' + result.error);
                }
                
            } catch (error) {
                console.error('Error minifying CSS:', error);
                showMinifierError('Failed to minify CSS: ' + error.message);
            }
        }

        function minifyJS() {
            try {
                initializeMinifier();
                hideMinifierError();
                hideMinifierSuccess();
                
                const jsInput = document.getElementById('js-input').value;
                if (!jsInput.trim()) {
                    showMinifierError('Please enter JavaScript code to minify.');
                    return;
                }
                
                // Get options
                const options = {
                    mangleNames: document.getElementById('js-mangle-names').checked,
                    removeDeadCode: document.getElementById('js-remove-dead-code').checked,
                    compressExpressions: document.getElementById('js-compress-expressions').checked,
                    removeConsole: document.getElementById('js-remove-console').checked,
                    optimizeConditionals: document.getElementById('js-optimize-conditionals').checked,
                    removeComments: document.getElementById('js-remove-comments').checked
                };
                
                const result = minifier.minify(jsInput, 'javascript', options);
                
                if (result.success) {
                    document.getElementById('js-output').value = result.minifiedCode;
                    updateJSStats(result);
                    showMinifierSuccess('JavaScript minified successfully!');
                } else {
                    showMinifierError('Minification failed: ' + result.error);
                }
                
            } catch (error) {
                console.error('Error minifying JavaScript:', error);
                showMinifierError('Failed to minify JavaScript: ' + error.message);
            }
        }

        function updateCSSStats(result) {
            document.getElementById('css-original-size').textContent = result.originalSize + ' bytes';
            document.getElementById('css-minified-size').textContent = result.minifiedSize + ' bytes';
            document.getElementById('css-compression-ratio').textContent = result.compressionRatio + '%';
            document.getElementById('css-stats').classList.remove('hidden');
        }

        function updateJSStats(result) {
            document.getElementById('js-original-size').textContent = result.originalSize + ' bytes';
            document.getElementById('js-minified-size').textContent = result.minifiedSize + ' bytes';
            document.getElementById('js-compression-ratio').textContent = result.compressionRatio + '%';
            document.getElementById('js-stats').classList.remove('hidden');
        }

        function loadCSSSample() {
            const sampleCSS = `/* Main styles */
.container {
    background-color: #ffffff;
    margin: 10px 0px 10px 0px;
    padding: 0.0em;
    border: 1px solid #cccccc;
}

.button {
    color: red;
    font-size: 16px;
    background-color: rgb(255, 255, 255);
    border-radius: 4px;
    padding: 8px 16px;
}

/* Unused rule */
.unused-class {
    display: none;
}

/* Media query */
@media (max-width: 768px) {
    .container {
        margin: 5px;
        padding: 10px;
    }
}`;
            
            document.getElementById('css-input').value = sampleCSS;
            showMinifierSuccess('Sample CSS loaded!');
        }

        function loadJSSample() {
            const sampleJS = `function calculateTotal(price, tax) {
    var total = 0;
    
    // Add price
    total = total + price;
    
    // Add tax
    if (tax > 0) {
        total = total + (price * tax);
    }
    
    // Unused variable
    var unused = 42;
    
    console.log("Calculating total:", total);
    
    return total;
}

// Unused function
function unusedFunction() {
    return false;
}

// Complex expression
var result = (true && false) || (10 > 5);
console.log("Result:", result);`;
            
            document.getElementById('js-input').value = sampleJS;
            showMinifierSuccess('Sample JavaScript loaded!');
        }

        function clearCSSInput() {
            document.getElementById('css-input').value = '';
            document.getElementById('css-output').value = '';
            document.getElementById('css-stats').classList.add('hidden');
            hideMinifierError();
            hideMinifierSuccess();
        }

        function clearJSInput() {
            document.getElementById('js-input').value = '';
            document.getElementById('js-output').value = '';
            document.getElementById('js-stats').classList.add('hidden');
            hideMinifierError();
            hideMinifierSuccess();
        }

        function showMinifierError(message) {
            const errorElement = document.getElementById('minifier-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function hideMinifierError() {
            const errorElement = document.getElementById('minifier-error');
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
        }

        function showMinifierSuccess(message) {
            const successElement = document.getElementById('minifier-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.remove('hidden');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    hideMinifierSuccess();
                }, 3000);
            }
        }

        function hideMinifierSuccess() {
            const successElement = document.getElementById('minifier-success');
            if (successElement) {
                successElement.classList.add('hidden');
            }
        }

        // Advanced Regex Tester Functions
        let regexTester = null;
        let currentEngine = 'ECMAScript';

        function initializeRegexTester() {
            if (!regexTester) {
                regexTester = new AdvancedRegexTester();
                setupRegexFlags();
            }
        }

        function setupRegexFlags() {
            const flagsContainer = document.getElementById('regex-flags');
            if (!flagsContainer) return;

            const engine = document.getElementById('regex-engine').value;
            const supportedFlags = regexTester.getEngineFlags(engine);
            
            flagsContainer.innerHTML = '';
            
            Object.entries(supportedFlags).forEach(([flag, description]) => {
                const flagElement = document.createElement('label');
                flagElement.className = 'flex items-center';
                flagElement.innerHTML = `
                    <input type="checkbox" id="regex-flag-${flag}" class="mr-2">
                    <span class="text-sm">${flag}</span>
                    <span class="text-xs text-gray-500 ml-1">(${description})</span>
                `;
                flagsContainer.appendChild(flagElement);
            });
        }

        function switchRegexTab(tab) {
            // Hide all tab contents
            document.querySelectorAll('.regex-tab-content').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('[id^="regex-"][id$="-tab"]').forEach(tab => tab.classList.remove('bg-white', 'text-gray-900', 'shadow-sm'));
            document.querySelectorAll('[id^="regex-"][id$="-tab"]').forEach(tab => tab.classList.add('text-gray-500', 'hover:text-gray-700'));
            
            // Show selected tab content and activate tab
            const contentId = `regex-${tab}-content`;
            const tabId = `regex-${tab}-tab`;
            
            const contentElement = document.getElementById(contentId);
            const tabElement = document.getElementById(tabId);
            
            if (contentElement) {
                contentElement.classList.remove('hidden');
            }
            
            if (tabElement) {
                tabElement.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                tabElement.classList.remove('text-gray-500', 'hover:text-gray-700');
            }
        }

        function testRegex() {
            try {
                initializeRegexTester();
                hideRegexError();
                hideRegexSuccess();
                
                const pattern = document.getElementById('regex-pattern').value;
                const input = document.getElementById('regex-input').value;
                const replacement = document.getElementById('regex-replacement').value;
                const engine = document.getElementById('regex-engine').value;
                
                if (!pattern.trim()) {
                    showRegexError('Please enter a regex pattern.');
                    return;
                }
                
                if (!input.trim()) {
                    showRegexError('Please enter test input.');
                    return;
                }
                
                // Get flags
                const flags = {};
                const flagCheckboxes = document.querySelectorAll('#regex-flags input[type="checkbox"]');
                flagCheckboxes.forEach(checkbox => {
                    const flag = checkbox.id.replace('regex-flag-', '');
                    flags[flag] = checkbox.checked;
                });
                
                // Test the regex
                const result = regexTester.test(pattern, flags, input, replacement || null, engine, 100);
                
                if (result.success) {
                    displayRegexResults(result);
                    showRegexSuccess('Pattern tested successfully!');
                } else {
                    showRegexError(result.error);
                }
                
            } catch (error) {
                console.error('Error testing regex:', error);
                showRegexError('Failed to test pattern: ' + error.message);
            }
        }

        function displayRegexResults(result) {
            // Update statistics
            document.getElementById('regex-execution-time').textContent = result.elapsed.toFixed(2) + 'ms';
            document.getElementById('regex-matches-count').textContent = result.matches.length;
            document.getElementById('regex-current-engine').textContent = currentEngine;
            document.getElementById('regex-stats').classList.remove('hidden');
            
            // Display matches
            displayMatches(result.matches, result.highlights);
            
            // Display groups
            displayGroups(result.matches, result.groupHighlights);
            
            // Display replacement
            if (result.replacement) {
                displayReplacement(result.replacement);
            }
            
            // Display explanation
            if (result.explanation) {
                displayExplanation(result.explanation);
            }
        }

        function displayMatches(matches, highlights) {
            const matchCount = document.getElementById('regex-match-count');
            const matchTbody = document.getElementById('regex-match-tbody');
            const highlightedInput = document.getElementById('regex-highlighted-input');
            
            // Update match count
            matchCount.textContent = `${matches.length} match${matches.length !== 1 ? 'es' : ''} found`;
            
            // Update highlighted input
            if (highlights && highlights.length > 0) {
                highlightedInput.innerHTML = '';
                highlights.forEach(span => {
                    const spanElement = document.createElement('span');
                    spanElement.textContent = span.text;
                    
                    if (span.type === 'match') {
                        spanElement.className = 'px-1 rounded text-white';
                        spanElement.style.backgroundColor = span.color;
                    }
                    
                    highlightedInput.appendChild(spanElement);
                });
            } else {
                highlightedInput.innerHTML = '<div class="text-gray-500">No matches found</div>';
            }
            
            // Update match table
            matchTbody.innerHTML = '';
            
            if (matches.length === 0) {
                matchTbody.innerHTML = '<tr><td colspan="3" class="px-4 py-4 text-center text-gray-500">No matches to display</td></tr>';
            } else {
                matches.forEach((match, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-4 py-2 font-mono">${match.index}</td>
                        <td class="px-4 py-2 font-mono">${match.length}</td>
                        <td class="px-4 py-2 font-mono">${escapeHtml(match.text)}</td>
                    `;
                    matchTbody.appendChild(row);
                });
            }
        }

        function displayGroups(matches, groupHighlights) {
            const groupsTbody = document.getElementById('regex-groups-tbody');
            const groupHighlightsDiv = document.getElementById('regex-group-highlights');
            
            // Update group highlights
            if (groupHighlights && groupHighlights.length > 0) {
                groupHighlightsDiv.innerHTML = '';
                groupHighlights.forEach(span => {
                    const spanElement = document.createElement('span');
                    spanElement.textContent = span.text;
                    
                    if (span.type === 'group') {
                        spanElement.className = 'px-1 rounded text-white';
                        spanElement.style.backgroundColor = span.color;
                    }
                    
                    groupHighlightsDiv.appendChild(spanElement);
                });
            } else {
                groupHighlightsDiv.innerHTML = '<div class="text-gray-500">No groups found</div>';
            }
            
            // Update groups table
            groupsTbody.innerHTML = '';
            
            let hasGroups = false;
            matches.forEach((match, matchIndex) => {
                match.groups.forEach((group, groupIndex) => {
                    if (groupIndex > 0) { // Skip group 0 (full match)
                        hasGroups = true;
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-4 py-2 font-mono">${matchIndex + 1}</td>
                            <td class="px-4 py-2 font-mono">${groupIndex}</td>
                            <td class="px-4 py-2 font-mono">${group.start}</td>
                            <td class="px-4 py-2 font-mono">${group.end}</td>
                            <td class="px-4 py-2 font-mono">${escapeHtml(group.text)}</td>
                        `;
                        groupsTbody.appendChild(row);
                    }
                });
            });
            
            if (!hasGroups) {
                groupsTbody.innerHTML = '<tr><td colspan="5" class="px-4 py-4 text-center text-gray-500">No groups to display</td></tr>';
            }
        }

        function displayReplacement(replacement) {
            const replacementPreview = document.getElementById('regex-replacement-preview');
            if (replacement.success) {
                replacementPreview.innerHTML = escapeHtml(replacement.result);
            } else {
                replacementPreview.innerHTML = '<div class="text-red-500">Replacement failed: ' + escapeHtml(replacement.error) + '</div>';
            }
        }

        function displayExplanation(explanation) {
            const explanationText = document.getElementById('regex-explanation-text');
            if (explanation.success) {
                explanationText.textContent = explanation.explanation;
            } else {
                explanationText.innerHTML = '<div class="text-red-500">Explanation failed: ' + escapeHtml(explanation.error) + '</div>';
            }
        }

        function loadRegexTemplate() {
            const templates = regexTester.getTemplates();
            const templateNames = Object.keys(templates);
            
            // Create a simple template selector
            const templateName = prompt('Select a template:\n' + templateNames.map((name, index) => `${index + 1}. ${name}`).join('\n'));
            
            if (templateName) {
                const index = parseInt(templateName) - 1;
                if (index >= 0 && index < templateNames.length) {
                    const selectedTemplate = templates[templateNames[index]];
                    
                    document.getElementById('regex-pattern').value = selectedTemplate.pattern;
                    
                    // Set flags
                    const flagCheckboxes = document.querySelectorAll('#regex-flags input[type="checkbox"]');
                    flagCheckboxes.forEach(checkbox => {
                        const flag = checkbox.id.replace('regex-flag-', '');
                        checkbox.checked = selectedTemplate.flags[flag] || false;
                    });
                    
                    showRegexSuccess(`Template "${templateNames[index]}" loaded!`);
                }
            }
        }

        function clearRegexPattern() {
            document.getElementById('regex-pattern').value = '';
        }

        function clearRegexInput() {
            document.getElementById('regex-pattern').value = '';
            document.getElementById('regex-input').value = '';
            document.getElementById('regex-replacement').value = '';
            
            // Clear flags
            const flagCheckboxes = document.querySelectorAll('#regex-flags input[type="checkbox"]');
            flagCheckboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Clear results
            document.getElementById('regex-highlighted-input').innerHTML = '<div class="text-gray-500">Enter a pattern and test input to see matches highlighted here...</div>';
            document.getElementById('regex-group-highlights').innerHTML = '<div class="text-gray-500">Enter a pattern with groups to see group highlights here...</div>';
            document.getElementById('regex-replacement-preview').innerHTML = '<div class="text-gray-500">Enter a replacement string to see the preview here...</div>';
            document.getElementById('regex-explanation-text').innerHTML = '<div class="text-gray-500">Enter a pattern to see its explanation here...</div>';
            
            document.getElementById('regex-match-tbody').innerHTML = '<tr><td colspan="3" class="px-4 py-4 text-center text-gray-500">No matches to display</td></tr>';
            document.getElementById('regex-groups-tbody').innerHTML = '<tr><td colspan="5" class="px-4 py-4 text-center text-gray-500">No groups to display</td></tr>';
            
            document.getElementById('regex-stats').classList.add('hidden');
            hideRegexError();
            hideRegexSuccess();
        }

        function showRegexError(message) {
            const errorElement = document.getElementById('regex-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function hideRegexError() {
            const errorElement = document.getElementById('regex-error');
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
        }

        function showRegexSuccess(message) {
            const successElement = document.getElementById('regex-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.remove('hidden');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    hideRegexSuccess();
                }, 3000);
            }
        }

        function hideRegexSuccess() {
            const successElement = document.getElementById('regex-success');
            if (successElement) {
                successElement.classList.add('hidden');
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize regex tester when engine changes
        document.addEventListener('DOMContentLoaded', function() {
            const engineSelect = document.getElementById('regex-engine');
            if (engineSelect) {
                engineSelect.addEventListener('change', function() {
                    currentEngine = this.value;
                    setupRegexFlags();
                });
            }
        });

        // Advanced Background Editor Functions
        let backgroundEditor = null;

        function initializeBackgroundEditor() {
            if (!backgroundEditor) {
                backgroundEditor = new AdvancedBackgroundEditor();
            }
        }

        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            try {
                initializeBackgroundEditor();
                hideBackgroundError();
                hideBackgroundSuccess();

                const mode = document.getElementById('background-mode').value;
                const result = await backgroundEditor.processImage(file, mode);

                if (result.success) {
                    showBackgroundSuccess('Image processed successfully!');
                } else {
                    showBackgroundError(result.error);
                }
            } catch (error) {
                console.error('Error processing image:', error);
                showBackgroundError('Failed to process image: ' + error.message);
            }
        }

        function applyBackgroundTemplate(templateId) {
            console.log('Applying template:', templateId);
            initializeBackgroundEditor();
            if (backgroundEditor) {
                console.log('Background editor initialized, applying template...');
                backgroundEditor.applyTemplate(templateId);
                showBackgroundSuccess(`Template "${templateId}" applied!`);
            } else {
                console.log('Background editor not initialized');
                showBackgroundError('Please upload an image first to apply templates.');
            }
        }

        function updateBackgroundColor() {
            initializeBackgroundEditor();
            const color = document.getElementById('background-color').value;
            if (backgroundEditor) {
                backgroundEditor.setBackground('solid', { color: color });
            }
        }

        function toggleOutline() {
            const enabled = document.getElementById('outline-enabled').checked;
            const controls = document.getElementById('outline-controls');
            
            if (enabled) {
                controls.classList.remove('hidden');
                updateOutline();
            } else {
                controls.classList.add('hidden');
                if (backgroundEditor) {
                    backgroundEditor.setEffects({ outline: { thickness: 0, color: '#000000' } });
                }
            }
        }

        function updateOutline() {
            initializeBackgroundEditor();
            const thickness = document.getElementById('outline-thickness').value;
            const color = document.getElementById('outline-color').value;
            
            if (backgroundEditor) {
                backgroundEditor.setEffects({ outline: { thickness: parseInt(thickness), color: color } });
            }
        }

        function toggleBorder() {
            const enabled = document.getElementById('border-enabled').checked;
            const controls = document.getElementById('border-controls');
            
            if (enabled) {
                controls.classList.remove('hidden');
                updateBorder();
            } else {
                controls.classList.add('hidden');
                if (backgroundEditor) {
                    backgroundEditor.setEffects({ border: { thickness: 0, color: '#ffffff' } });
                }
            }
        }

        function updateBorder() {
            initializeBackgroundEditor();
            const thickness = document.getElementById('border-thickness').value;
            const color = document.getElementById('border-color').value;
            
            if (backgroundEditor) {
                backgroundEditor.setEffects({ border: { thickness: parseInt(thickness), color: color } });
            }
        }

        function toggleShadow() {
            const enabled = document.getElementById('shadow-enabled').checked;
            const controls = document.getElementById('shadow-controls');
            
            if (enabled) {
                controls.classList.remove('hidden');
                updateShadow();
            } else {
                controls.classList.add('hidden');
                if (backgroundEditor) {
                    backgroundEditor.setEffects({ shadow: { offset: { x: 0, y: 0 }, blur: 0, opacity: 0 } });
                }
            }
        }

        function updateShadow() {
            initializeBackgroundEditor();
            const offsetX = document.getElementById('shadow-offset-x').value;
            const offsetY = document.getElementById('shadow-offset-y').value;
            const blur = document.getElementById('shadow-blur').value;
            const opacity = document.getElementById('shadow-opacity').value;
            
            if (backgroundEditor) {
                backgroundEditor.setEffects({
                    shadow: {
                        offset: { x: parseInt(offsetX), y: parseInt(offsetY) },
                        blur: parseInt(blur),
                        opacity: parseFloat(opacity)
                    }
                });
            }
        }

        function undoBackgroundEdit() {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                backgroundEditor.undo();
            }
        }

        function redoBackgroundEdit() {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                backgroundEditor.redo();
            }
        }

        function resetBackgroundEdit() {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                // Reset all controls to default values
                document.getElementById('background-color').value = '#ffffff';
                document.getElementById('outline-enabled').checked = false;
                document.getElementById('border-enabled').checked = false;
                document.getElementById('shadow-enabled').checked = false;
                
                // Hide all effect controls
                document.getElementById('outline-controls').classList.add('hidden');
                document.getElementById('border-controls').classList.add('hidden');
                document.getElementById('shadow-controls').classList.add('hidden');
                
                // Reset background to white
                backgroundEditor.setBackground('solid', { color: '#ffffff' });
                showBackgroundSuccess('Reset to default settings!');
            }
        }

        // Enhanced AI-powered functions
        async function enhanceImageQuality(level) {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                try {
                    showBackgroundSuccess(`Enhancing image quality ${level}...`);
                    const result = await backgroundEditor.enhanceImageQuality(level);
                    if (result.success) {
                        showBackgroundSuccess(`Image enhanced ${level} successfully!`);
                    } else {
                        showBackgroundError('Failed to enhance image: ' + result.error);
                    }
                } catch (error) {
                    console.error('Error enhancing image:', error);
                    showBackgroundError('Error enhancing image: ' + error.message);
                }
            } else {
                showBackgroundError('Please upload an image first to enhance.');
            }
        }

        async function generateAIBackground() {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                const prompt = document.getElementById('ai-background-prompt').value;
                if (!prompt.trim()) {
                    showBackgroundError('Please enter a background description.');
                    return;
                }

                try {
                    showBackgroundSuccess('Generating AI background...');
                    const result = await backgroundEditor.generateAIBackground(prompt, {
                        useDepthControl: true,
                        usePoseControl: true,
                        useCannyControl: false
                    });
                    
                    if (result.success) {
                        showBackgroundSuccess('AI background generated successfully!');
                    } else {
                        showBackgroundError('Failed to generate AI background: ' + result.error);
                    }
                } catch (error) {
                    console.error('Error generating AI background:', error);
                    showBackgroundError('Error generating AI background: ' + error.message);
                }
            } else {
                showBackgroundError('Please upload and process an image first.');
            }
        }

        async function getAISuggestions() {
            initializeBackgroundEditor();
            if (backgroundEditor) {
                try {
                    showBackgroundSuccess('Getting AI suggestions...');
                    const suggestions = await backgroundEditor.getAISuggestions();
                    
                    if (suggestions.length > 0) {
                        let suggestionText = 'AI Suggestions:\n';
                        suggestions.forEach((suggestion, index) => {
                            suggestionText += `${index + 1}. ${suggestion.description} (${Math.round(suggestion.confidence * 100)}% confidence)\n`;
                        });
                        showBackgroundSuccess(suggestionText);
                    } else {
                        showBackgroundSuccess('No specific suggestions at this time. Your image looks good!');
                    }
                } catch (error) {
                    console.error('Error getting AI suggestions:', error);
                    showBackgroundError('Error getting AI suggestions: ' + error.message);
                }
            } else {
                showBackgroundError('Please upload an image first to get AI suggestions.');
            }
        }

        function exportBackgroundImage(format) {
            if (!backgroundEditor) {
                showBackgroundError('No image to export. Please upload an image first.');
                return;
            }

            try {
                const exportSize = document.getElementById('export-size').value;
                const dataUrl = backgroundEditor.exportImage(format, 0.9);
                
                // Create download link
                const link = document.createElement('a');
                link.download = `background-edited.${format}`;
                link.href = dataUrl;
                link.click();
                
                showBackgroundSuccess(`Image exported as ${format.toUpperCase()}!`);
            } catch (error) {
                console.error('Export error:', error);
                showBackgroundError('Failed to export image: ' + error.message);
            }
        }

        function showBackgroundError(message) {
            const errorElement = document.getElementById('background-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function hideBackgroundError() {
            const errorElement = document.getElementById('background-error');
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
        }

        function showBackgroundSuccess(message) {
            const successElement = document.getElementById('background-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.remove('hidden');
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    hideBackgroundSuccess();
                }, 3000);
            }
        }

        function hideBackgroundSuccess() {
            const successElement = document.getElementById('background-success');
            if (successElement) {
                successElement.classList.add('hidden');
            }
        }

        // Initialize background editor when modal opens
        document.addEventListener('DOMContentLoaded', function() {
            const backgroundType = document.getElementById('background-type');
            if (backgroundType) {
                backgroundType.addEventListener('change', function() {
                    const type = this.value;
                    const solidControl = document.getElementById('solid-color-control');
                    const gradientControls = document.getElementById('gradient-controls');
                    
                    if (type === 'solid') {
                        solidControl.classList.remove('hidden');
                        gradientControls.classList.add('hidden');
                    } else if (type === 'gradient') {
                        solidControl.classList.add('hidden');
                        gradientControls.classList.remove('hidden');
                    } else {
                        solidControl.classList.add('hidden');
                        gradientControls.classList.add('hidden');
                    }
                });
            }
        });

        async function testQRModule() {
            console.log('Testing QR Module...');
            let output = '=== QR Module Test ===\n';
            
            try {
                output += `AdvancedQRGenerator available: ${typeof AdvancedQRGenerator !== 'undefined'}\n`;
                output += `AdvancedQRGenerator type: ${typeof AdvancedQRGenerator}\n`;
                
                // Try to initialize the module
                if (await initializeAdvancedQRGenerator()) {
                    output += '✅ AdvancedQRGenerator class is available\n';
                    output += '✅ QR Generator initialized successfully\n';
                    output += `Instance type: ${AdvancedQRGen.constructor.name}\n`;
                    
                    // Test basic generation
                    const testResult = AdvancedQRGen.generate('Test');
                    output += `✅ Basic generation test passed\n`;
                    output += `Generated version: ${testResult.version}\n`;
                    output += `Generated size: ${testResult.matrix.size}×${testResult.matrix.size}\n`;
                    output += `Total bits: ${testResult.totalBits}\n`;
                    output += `Total codewords: ${testResult.totalCodewords}\n`;
                } else {
                    output += '❌ QR Generator initialization failed\n';
                }
            } catch (error) {
                output += `❌ Error during testing: ${error.message}\n`;
                console.error('QR Module test error:', error);
            }
            
            console.log(output);
            alert(output);
        }

        function previewQR() {
            // This would show a preview of the QR code before final generation
            showInfo('Preview functionality coming soon!');
        }

        function analyzeQR() {
            // This would analyze the current QR code
            showInfo('Analysis functionality coming soon!');
        }

        function updateQRInfo() {
            // This would update the analysis information
            showInfo('Update info functionality coming soon!');
        }

        function downloadQR() {
            try {
                const displayDiv = document.getElementById('qr-display');
                if (!displayDiv || !displayDiv.innerHTML) {
                    showError('No QR code to download');
                    return;
                }

                const svg = displayDiv.innerHTML;
                const blob = new Blob([svg], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'qr-code.svg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showSuccess('QR code downloaded successfully!');
            } catch (error) {
                console.error('Error downloading QR code:', error);
                showError(`Error downloading QR code: ${error.message}`);
            }
        }

        function copyQR() {
            try {
                const displayDiv = document.getElementById('qr-display');
                if (!displayDiv || !displayDiv.innerHTML) {
                    showError('No QR code to copy');
                    return;
                }

                const svg = displayDiv.innerHTML;
                navigator.clipboard.writeText(svg).then(() => {
                    showSuccess('QR code SVG copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showError('Failed to copy to clipboard');
                });
            } catch (error) {
                console.error('Error copying QR code:', error);
                showError(`Error copying QR code: ${error.message}`);
            }
        }

        function printQR() {
            try {
                const displayDiv = document.getElementById('qr-display');
                if (!displayDiv || !displayDiv.innerHTML) {
                    showError('No QR code to print');
                    return;
                }

                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                        <head>
                            <title>QR Code Print</title>
                            <style>
                                body { margin: 20px; font-family: Arial, sans-serif; }
                                .qr-container { text-align: center; }
                                .qr-code { max-width: 100%; height: auto; }
                            </style>
                        </head>
                        <body>
                            <div class="qr-container">
                                <h2>QR Code</h2>
                                ${displayDiv.innerHTML}
                            </div>
                        </body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.print();
            } catch (error) {
                console.error('Error printing QR code:', error);
                showError(`Error printing QR code: ${error.message}`);
            }
        }

        // Basic Calculator Functions
        let calcExpression = '';
        let calcDisplay = '0';

        function calcInput(value) {
            const display = document.getElementById('calc-display');
            if (!display) return;

            if (calcDisplay === '0' && value !== '.') {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            calcExpression += value;
            display.value = calcDisplay;
        }

        function clearCalc() {
            const display = document.getElementById('calc-display');
            if (!display) return;

            calcExpression = '';
            calcDisplay = '0';
            display.value = calcDisplay;
        }

        function deleteLast() {
            const display = document.getElementById('calc-display');
            if (!display) return;

            if (calcDisplay.length > 1) {
                calcDisplay = calcDisplay.slice(0, -1);
                calcExpression = calcExpression.slice(0, -1);
            } else {
                calcDisplay = '0';
                calcExpression = '';
            }
            display.value = calcDisplay;
        }

        function calculate() {
            const display = document.getElementById('calc-display');
            if (!display) return;

            try {
                const result = eval(calcExpression.replace(/×/g, '*').replace(/÷/g, '/'));
                calcDisplay = result.toString();
                calcExpression = result.toString();
                display.value = calcDisplay;
                
                // Store result for advanced calculator
                if (window.advancedCalc) {
                    window.advancedCalc.storeMemory(result);
                    updateMemoryDisplay();
                }
            } catch (error) {
                calcDisplay = 'Error';
                calcExpression = '';
                display.value = calcDisplay;
            }
        }

        function updateMemoryDisplay() {
            if (window.advancedCalc) {
                const memoryDisplay = document.getElementById('memory-display');
                if (memoryDisplay) {
                    const memory = window.advancedCalc.getMemory();
                    memoryDisplay.textContent = `Memory: ${memory}`;
                }
            }
        }

        // Percentage Calculator Functions
        function switchPercentageMode(mode) {
            // Hide all modes
            document.querySelectorAll('.percentage-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.percentage-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'percent_of') {
                document.getElementById('percent-of-mode').classList.remove('hidden');
                document.getElementById('percent-of-tab').classList.add('active');
            } else if (mode === 'what_percent') {
                document.getElementById('what-percent-mode').classList.remove('hidden');
                document.getElementById('what-percent-tab').classList.add('active');
            } else if (mode === 'apply_change') {
                document.getElementById('apply-change-mode').classList.remove('hidden');
                document.getElementById('apply-change-tab').classList.add('active');
            } else if (mode === 'percent_change') {
                document.getElementById('percent-change-mode').classList.remove('hidden');
                document.getElementById('percent-change-tab').classList.add('active');
            } else if (mode === 'reverse_percent') {
                document.getElementById('reverse-percent-mode').classList.remove('hidden');
                document.getElementById('reverse-percent-tab').classList.add('active');
            } else if (mode === 'percent_difference') {
                document.getElementById('percent-difference-mode').classList.remove('hidden');
                document.getElementById('percent-difference-tab').classList.add('active');
            }
        }

        // BMI Calculator Functions
        function switchBMIMode(mode) {
            // Hide all modes
            document.querySelectorAll('.bmi-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.bmi-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'adult') {
                document.getElementById('adult-mode').classList.remove('hidden');
                document.getElementById('adult-tab').classList.add('active');
            } else if (mode === 'child_teen') {
                document.getElementById('child-teen-mode').classList.remove('hidden');
                document.getElementById('child-teen-tab').classList.add('active');
            }
            
            // Initialize calculator if needed
            initializeBMICalculator();
            
            // Clear previous results
            clearBMIResults();
        }

        // Age Calculator Functions
        function switchAgeMode(mode) {
            // Hide all modes
            document.querySelectorAll('.age-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.age-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'basic') {
                document.getElementById('basic-age-mode').classList.remove('hidden');
                document.getElementById('basic-age-tab').classList.add('active');
            } else if (mode === 'advanced') {
                document.getElementById('advanced-age-mode').classList.remove('hidden');
                document.getElementById('advanced-age-tab').classList.add('active');
            } else if (mode === 'milestones') {
                document.getElementById('milestones-age-mode').classList.remove('hidden');
                document.getElementById('milestones-age-tab').classList.add('active');
            } else if (mode === 'between') {
                document.getElementById('between-age-mode').classList.remove('hidden');
                document.getElementById('between-age-tab').classList.add('active');
            }
        }

        // Password Generator Functions
        function switchPasswordMode(mode) {
            // Hide all modes
            document.querySelectorAll('.password-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.password-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'characters') {
                document.getElementById('characters-mode').classList.remove('hidden');
                document.getElementById('characters-tab').classList.add('active');
            } else if (mode === 'diceware') {
                document.getElementById('diceware-mode').classList.remove('hidden');
                document.getElementById('diceware-tab').classList.add('active');
            } else if (mode === 'validation') {
                document.getElementById('validation-mode').classList.remove('hidden');
                document.getElementById('validation-tab').classList.add('active');
            }
        }



        // Tool Initialization Functions
        function initializePercentageCalculator() {
            if (!window.percentageCalc) {
                window.percentageCalc = new PercentageCalculator();
                console.log('Percentage Calculator initialized');
            }
        }

        function getGlobalSettings() {
            const decimals = document.getElementById('global-decimals') ? 
                parseInt(document.getElementById('global-decimals').value) : 2;
            const roundingMode = document.getElementById('global-rounding') ? 
                document.getElementById('global-rounding').value : 'round';
            
            return { decimals, roundingMode };
        }

        function calculatePercentOf() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const p = parseFloat(document.getElementById('percent-of-p').value);
            const N = parseFloat(document.getElementById('percent-of-n').value);
            const inputType = document.querySelector('input[name="percent-of-input-type"]:checked').value;
            const settings = getGlobalSettings();

            if (isNaN(p) || isNaN(N)) {
                showPercentageError('Please enter valid numbers');
                return;
            }

            const result = window.percentageCalc.calculate(window.percentageCalc.operations.PERCENT_OF, {
                p: p,
                N: N,
                inputType: inputType,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                showPercentageResult(result.result, result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function calculateWhatPercent() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const A = parseFloat(document.getElementById('what-percent-a').value);
            const B = parseFloat(document.getElementById('what-percent-b').value);
            const settings = getGlobalSettings();

            if (isNaN(A) || isNaN(B)) {
                showPercentageError('Please enter valid numbers');
            }

            const result = window.percentageCalc.calculate(window.percentageCalc.operations.WHAT_PERCENT, {
                A: A,
                B: B,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                showPercentageResult(window.percentageCalc.formatPercentage(result.result), result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function calculateApplyChange() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const N = parseFloat(document.getElementById('apply-change-n').value);
            const p = parseFloat(document.getElementById('apply-change-p').value);
            const changeType = document.querySelector('input[name="apply-change-type"]:checked').value;
            const inputType = document.querySelector('input[name="apply-change-input-type"]:checked').value;
            const settings = getGlobalSettings();

            if (isNaN(N) || isNaN(p)) {
                showPercentageError('Please enter valid numbers');
                return;
            }

            const operation = changeType === 'increase' ? 
                window.percentageCalc.operations.APPLY_INCREASE : 
                window.percentageCalc.operations.APPLY_DECREASE;

            const result = window.percentageCalc.calculate(operation, {
                N: N,
                p: p,
                inputType: inputType,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                showPercentageResult(result.result, result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function calculatePercentChange() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const old = parseFloat(document.getElementById('percent-change-old').value);
            const newVal = parseFloat(document.getElementById('percent-change-new').value);
            const settings = getGlobalSettings();

            if (isNaN(old) || isNaN(newVal)) {
                showPercentageError('Please enter valid numbers');
                return;
            }

            const result = window.percentageCalc.calculate(window.percentageCalc.operations.PERCENT_CHANGE, {
                old: old,
                new: newVal,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                const sign = result.result >= 0 ? '+' : '';
                showPercentageResult(sign + window.percentageCalc.formatPercentage(result.result), result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function calculateReversePercent() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const newVal = parseFloat(document.getElementById('percent-change-new').value);
            const p = parseFloat(document.getElementById('reverse-percent-p').value);
            const changeType = document.querySelector('input[name="reverse-percent-type"]:checked').value;
            const inputType = document.querySelector('input[name="reverse-percent-type"]:checked').value;
            const settings = getGlobalSettings();

            if (isNaN(newVal) || isNaN(p)) {
                showPercentageError('Please enter valid numbers');
                return;
            }

            const result = window.percentageCalc.calculate(window.percentageCalc.operations.REVERSE_PERCENT, {
                new: newVal,
                p: p,
                changeType: changeType,
                inputType: inputType,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                showPercentageResult(result.result, result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function calculatePercentDifference() {
            if (!window.percentageCalc) {
                initializePercentageCalculator();
            }

            const a = parseFloat(document.getElementById('percent-difference-a').value);
            const b = parseFloat(document.getElementById('percent-difference-b').value);
            const settings = getGlobalSettings();

            if (isNaN(a) || isNaN(b)) {
                showPercentageError('Please enter valid numbers');
                return;
            }

            const result = window.percentageCalc.calculate(window.percentageCalc.operations.PERCENT_DIFFERENCE, {
                a: a,
                b: b,
                decimals: settings.decimals,
                roundingMode: settings.roundingMode
            });

            if (result.success) {
                showPercentageResult(window.percentageCalc.formatPercentage(result.result), result.metadata.formula);
            } else {
                showPercentageError(result.error);
            }
        }

        function showPercentageResult(value, formula) {
            const resultDiv = document.getElementById('percentage-result');
            const errorDiv = document.getElementById('percentage-error');
            const resultValue = document.getElementById('percentage-result-value');
            const resultFormula = document.getElementById('percentage-result-formula');

            if (resultDiv && errorDiv && resultValue && resultFormula) {
                resultValue.textContent = value;
                resultFormula.textContent = formula;
                resultDiv.classList.remove('hidden');
                errorDiv.classList.add('hidden');
            }
        }

        function showPercentageError(message) {
            const resultDiv = document.getElementById('percentage-result');
            const errorDiv = document.getElementById('percentage-error');
            const errorMessage = document.getElementById('percentage-error-message');

            if (resultDiv && errorDiv && errorMessage) {
                errorMessage.textContent = message;
                errorDiv.classList.remove('hidden');
                resultDiv.classList.add('hidden');
            }
        }

        function clearPercentageResults() {
            const resultDiv = document.getElementById('percentage-result');
            const errorDiv = document.getElementById('percentage-error');
            
            if (resultDiv) resultDiv.classList.add('hidden');
            if (errorDiv) errorDiv.classList.add('hidden');
        }

        // Age Calculator Functions
        function initializeAgeCalculator() {
            if (!window.ageCalc) {
                window.ageCalc = new AgeCalculator();
                console.log('Age Calculator initialized');
            }
        }

        function calculateBasicAge() {
            if (!window.ageCalc) {
                initializeAgeCalculator();
            }

            const birthDate = document.getElementById('birth-date').value;
            const referenceDate = document.getElementById('reference-date').value || null;
            const feb29Mode = document.getElementById('feb29-mode').value;
            const outputUnits = document.getElementById('output-units').value;

            if (!birthDate) {
                showAgeError('Please enter a birth date');
                return;
            }

            try {
                const result = window.ageCalc.calculateAge(birthDate, referenceDate, 'local', feb29Mode, outputUnits);

                if (result.success) {
                    showAgeResult(result);
                } else {
                    showAgeError(result.error);
                }

            } catch (error) {
                showAgeError('Error calculating age: ' + error.message);
            }
        }

        function calculateAdvancedAge() {
            if (!window.ageCalc) {
                initializeAgeCalculator();
            }

            const birthDateTime = document.getElementById('birth-datetime').value;
            const referenceDateTime = document.getElementById('reference-datetime').value || null;
            const birthTimezone = document.getElementById('birth-timezone').value;
            const referenceTimezone = document.getElementById('reference-timezone').value;

            if (!birthDateTime) {
                showAgeError('Please enter a birth date and time');
                return;
            }

            try {
                // For now, we'll use the basic calculation since timezone handling is complex
                // In a full implementation, you'd convert dates to the same timezone first
                const result = window.ageCalc.calculateAge(birthDateTime, referenceDateTime, birthTimezone, 'march1', 'calendar');

                if (result.success) {
                    showAgeResult(result);
                } else {
                    showAgeError(result.error);
                }

            } catch (error) {
                showAgeError('Error calculating advanced age: ' + error.message);
            }
        }

        function calculateAgeMilestones() {
            if (!window.ageCalc) {
                initializeAgeCalculator();
            }

            const birthDate = document.getElementById('milestones-birth-date').value;
            
            if (!birthDate) {
                showAgeError('Please enter a birth date');
                return;
            }

            // Get selected milestones
            const selectedMilestones = [];
            document.querySelectorAll('#milestones-age-mode input[type="checkbox"]:checked').forEach(checkbox => {
                selectedMilestones.push(parseInt(checkbox.value));
            });

            if (selectedMilestones.length === 0) {
                showAgeError('Please select at least one milestone');
                return;
            }

            try {
                const result = window.ageCalc.calculateAgeMilestones(birthDate, selectedMilestones);

                if (result.success) {
                    showAgeMilestonesResult(result);
                } else {
                    showAgeError(result.error);
                }

            } catch (error) {
                showAgeError('Error calculating milestones: ' + error.message);
            }
        }

        function calculateDateRange() {
            if (!window.ageCalc) {
                initializeAgeCalculator();
            }

            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;

            if (!startDate || !endDate) {
                showAgeError('Please enter both start and end dates');
                return;
            }

            try {
                const result = window.ageCalc.calculateDaysBetween(startDate, endDate);

                if (result.success) {
                    showDateRangeResult(result, startDate, endDate);
                } else {
                    showAgeError(result.error);
                }

            } catch (error) {
                showAgeError('Error calculating date range: ' + error.message);
            }
        }

        function showAgeResult(result) {
            // Hide error, show result
            document.getElementById('age-error').classList.add('hidden');
            document.getElementById('age-result').classList.remove('hidden');

            // Display age value
            const ageValue = `${result.age.years} years, ${result.age.months} months, ${result.age.days} days`;
            document.getElementById('age-value').textContent = ageValue;
            document.getElementById('age-breakdown').textContent = 'Age Breakdown';

            // Display additional info
            document.getElementById('age-birth-date').textContent = result.metadata.birthDate;
            document.getElementById('age-reference-date').textContent = result.metadata.referenceDate;
            document.getElementById('age-next-birthday').textContent = result.nextBirthday.formatted;
            document.getElementById('age-days-until').textContent = result.nextBirthday.daysUntil + ' days';

            // Display totals
            document.getElementById('age-total-days').textContent = result.totals.days;
            document.getElementById('age-total-weeks').textContent = result.totals.weeks;
            document.getElementById('age-total-months').textContent = result.totals.months;
            document.getElementById('age-leap-years').textContent = result.metadata.leapYear ? 'Yes' : 'No';

            // Show additional info section
            document.getElementById('age-additional-info').classList.remove('hidden');
        }

        function showAgeMilestonesResult(result) {
            // Hide error, show result
            document.getElementById('age-error').classList.add('hidden');
            document.getElementById('age-result').classList.remove('hidden');

            // Display milestones
            let milestonesText = '';
            result.milestones.forEach(milestone => {
                milestonesText += `${milestone.age} years: ${milestone.date} (${milestone.daysUntil} days)\n`;
            });

            document.getElementById('age-value').textContent = 'Age Milestones';
            document.getElementById('age-breakdown').textContent = milestonesText;

            // Hide additional info for milestones
            document.getElementById('age-additional-info').classList.add('hidden');
        }

        function showDateRangeResult(result, startDate, endDate) {
            // Hide error, show result
            document.getElementById('age-error').classList.add('hidden');
            document.getElementById('age-result').classList.remove('hidden');

            // Display date range result
            document.getElementById('age-value').textContent = 'Date Range';
            document.getElementById('age-breakdown').textContent = `${result.days} days between ${startDate} and ${endDate}`;

            // Display totals
            document.getElementById('age-total-days').textContent = result.days;
            document.getElementById('age-total-weeks').textContent = result.weeks;
            document.getElementById('age-total-months').textContent = result.months;
            document.getElementById('age-leap-years').textContent = result.years;

            // Show additional info section
            document.getElementById('age-additional-info').classList.remove('hidden');
        }

        function showAgeError(message) {
            document.getElementById('age-error-message').textContent = message;
            document.getElementById('age-error').classList.remove('hidden');
            document.getElementById('age-result').classList.add('hidden');
        }

        function clearAgeResults() {
            document.getElementById('age-result').classList.add('hidden');
            document.getElementById('age-error').classList.add('hidden');
        }

        function initializeBMICalculator() {
            console.log('Initializing BMI Calculator...');
            console.log('BMICalculator class available:', typeof BMICalculator);
            
            if (!window.bmiCalc) {
                try {
                    window.bmiCalc = new BMICalculator();
                    console.log('✅ BMI Calculator initialized successfully');
                    console.log('BMI Calculator instance:', window.bmiCalc);
                } catch (error) {
                    console.error('❌ Error initializing BMI Calculator:', error);
                }
            } else {
                console.log('BMI Calculator already initialized');
            }
        }

        function initializeAgeCalculator() {
            if (!window.ageCalc) {
                window.ageCalc = new AgeCalculator();
                console.log('Age Calculator initialized');
            }
        }

        function initializeUnitConverter() {
            if (!window.unitConverter) {
                window.unitConverter = new UnitConverter();
                console.log('Unit Converter initialized');
                
                // Initialize the first category
                switchUnitCategory();
            }
        }

        function switchUnitCategory() {
            if (!window.unitConverter) {
                initializeUnitConverter();
                return;
            }

            const category = document.getElementById('unit-category').value;
            const fromUnit = document.getElementById('from-unit');
            const toUnit = document.getElementById('to-unit');

            if (!fromUnit || !toUnit) return;

            // Get units for the selected category
            const units = window.unitConverter.getUnitsForDimension(category);
            
            // Populate from unit dropdown
            fromUnit.innerHTML = '';
            units.forEach(unit => {
                const option = document.createElement('option');
                option.value = unit.name;
                option.textContent = unit.displayName;
                fromUnit.appendChild(option);
            });

            // Populate to unit dropdown
            toUnit.innerHTML = '';
            units.forEach(unit => {
                const option = document.createElement('option');
                option.value = unit.name;
                option.textContent = unit.displayName;
                toUnit.appendChild(option);
            });

            // Set default selections
            if (units.length > 0) {
                fromUnit.value = units[0].name;
                toUnit.value = units[1] ? units[1].name : units[0].name;
            }

            // Update conversion info and show common conversions
            updateConversionInfo();
            showCommonConversions();
        }

        function updateConversionInfo() {
            if (!window.unitConverter) return;

            const fromUnit = document.getElementById('from-unit').value;
            const toUnit = document.getElementById('to-unit').value;
            const conversionInfo = document.getElementById('conversion-info');

            if (!fromUnit || !toUnit || !conversionInfo) return;

            try {
                // Get unit information
                const fromUnitInfo = window.unitConverter.registry.getUnit(fromUnit);
                const toUnitInfo = window.unitConverter.registry.getUnit(toUnit);
                
                if (fromUnitInfo && toUnitInfo) {
                    const formula = fromUnitInfo.linear ? 
                        `${fromUnit} × factor = ${toUnit}` : 
                        `${fromUnit} × factor + offset = ${toUnit}`;
                    
                    document.getElementById('conversion-formula').textContent = `Formula: ${formula}`;
                    document.getElementById('conversion-description').textContent = 
                        `Converting from ${fromUnitInfo.system || 'Unknown'} to ${toUnitInfo.system || 'Unknown'} units`;
                    document.getElementById('unit-systems').textContent = 
                        `Systems: ${fromUnitInfo.system || 'Unknown'} → ${toUnitInfo.system || 'Unknown'}`;
                    
                    conversionInfo.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Error updating conversion info:', error);
            }
        }

        function performConversion() {
            if (!window.unitConverter) return;

            const fromValue = parseFloat(document.getElementById('from-value').value);
            const fromUnit = document.getElementById('from-unit').value;
            const toUnit = document.getElementById('to-unit').value;

            if (isNaN(fromValue) || !fromUnit || !toUnit) {
                hideResults();
                return;
            }

            try {
                const result = window.unitConverter.convert(fromValue, fromUnit, toUnit);
                
                if (result.success) {
                    showUnitResult(result);
                } else {
                    showUnitError(result.error);
                }
            } catch (error) {
                showUnitError('Conversion error: ' + error.message);
            }
        }

        function showUnitResult(result) {
            const resultDiv = document.getElementById('conversion-result');
            const errorDiv = document.getElementById('conversion-error');
            const resultValue = document.getElementById('result-value');
            const resultDetails = document.getElementById('result-details');

            if (resultDiv && errorDiv && resultValue && resultDetails) {
                resultValue.textContent = `${result.value} ${result.toUnit}`;
                resultDetails.textContent = `${result.originalValue} ${result.fromUnit} = ${result.value} ${result.toUnit}`;
                
                resultDiv.classList.remove('hidden');
                errorDiv.classList.add('hidden');
            }
        }

        function showUnitError(message) {
            const resultDiv = document.getElementById('conversion-result');
            const errorDiv = document.getElementById('conversion-error');
            const errorMessage = document.getElementById('error-message');

            if (resultDiv && errorDiv && errorMessage) {
                errorMessage.textContent = message;
                
                resultDiv.classList.add('hidden');
                errorDiv.classList.remove('hidden');
            }
        }

        function hideResults() {
            const resultDiv = document.getElementById('conversion-result');
            const errorDiv = document.getElementById('conversion-error');
            
            if (resultDiv) resultDiv.classList.add('hidden');
            if (errorDiv) errorDiv.classList.add('hidden');
        }

        function showCommonConversions() {
            if (!window.unitConverter) return;

            const category = document.getElementById('unit-category').value;
            const conversionsGrid = document.getElementById('conversions-grid');
            const commonConversions = document.getElementById('common-conversions');

            if (!conversionsGrid || !commonConversions) return;

            const units = window.unitConverter.getUnitsForDimension(category);
            if (units.length < 2) return;

            let html = '';
            const testValue = window.unitConverter.getTestValue(units[0].name);

            // Show a few common conversions
            for (let i = 0; i < Math.min(6, units.length - 1); i++) {
                try {
                    const result = window.unitConverter.convert(testValue, units[0].name, units[i + 1].name);
                    if (result.success) {
                        html += `
                            <div class="p-3 bg-white rounded-lg border border-gray-200">
                                <div class="font-medium text-gray-800">${testValue} ${units[0].displayName}</div>
                                <div class="text-sm text-gray-600">= ${result.value} ${units[i + 1].displayName}</div>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('Error in common conversion:', error);
                }
            }

            conversionsGrid.innerHTML = html;
            commonConversions.classList.remove('hidden');
        }

        function testUnitConverter() {
            if (!window.unitConverter) {
                alert('Unit Converter not initialized');
                return;
            }

            try {
                // Test basic conversion
                const result = window.unitConverter.convert(100, 'cm', 'm');
                if (result.success) {
                    alert(`✅ Unit Converter Test Passed!\n100 cm = ${result.value} m`);
                } else {
                    alert(`❌ Unit Converter Test Failed: ${result.error}`);
                }
            } catch (error) {
                alert(`❌ Unit Converter Test Error: ${error.message}`);
            }
        }

        function initializeCurrencyConverter() {
            if (!window.currencyConverter) {
                try {
                    if (typeof AdvancedCurrencyConverter === 'undefined') {
                        console.error('AdvancedCurrencyConverter class not found!');
                        return false;
                    }
                    window.currencyConverter = new AdvancedCurrencyConverter();
                    console.log('Advanced Currency Converter initialized successfully');
                    return true;
                } catch (error) {
                    console.error('Error initializing Advanced Currency Converter:', error);
                    return false;
                }
            }
            return true;
        }

        function initializeColorConverter() {
            if (!window.colorConverter) {
                try {
                    if (typeof AdvancedColorConverter === 'undefined') {
                        console.error('AdvancedColorConverter class not found!');
                        return false;
                    }
                    window.colorConverter = new AdvancedColorConverter();
                    console.log('Advanced Color Converter initialized successfully');
                    return true;
                } catch (error) {
                    console.error('Error initializing Advanced Color Converter:', error);
                    return false;
                }
            }
            return true;
        }

        function initializeBase64Encoder() {
            if (!window.base64Encoder) {
                try {
                    if (typeof AdvancedBase64Encoder === 'undefined') {
                        console.error('AdvancedBase64Encoder class not found!');
                        return false;
                    }
                    window.base64Encoder = new AdvancedBase64Encoder();
                    console.log('Advanced Base64 Encoder initialized successfully');
                    return true;
                } catch (error) {
                    console.error('Error initializing Advanced Base64 Encoder:', error);
                    return false;
                }
            }
            return true;
        }







        // Currency Converter Functions
        async function updateCurrencyConversion() {
            if (!window.currencyConverter) {
                initializeCurrencyConverter();
                return;
            }

            const fromCurrency = document.getElementById('from-currency');
            const toCurrency = document.getElementById('to-currency');
            const amount = document.getElementById('from-amount');
            const markupBps = document.getElementById('markup-bps');
            const feeMode = document.getElementById('fee-mode');
            const feeValue = document.getElementById('fee-value');
            const historicalDate = document.getElementById('historical-date');

            if (!fromCurrency || !toCurrency || !amount || !markupBps || !feeMode || !feeValue || !historicalDate) {
                clearCurrencyResults();
                return;
            }

            const fromCurrencyValue = fromCurrency.value;
            const toCurrencyValue = toCurrency.value;
            const amountValue = parseFloat(amount.value);
            const markupBpsValue = parseInt(markupBps.value) || 0;
            const feeModeValue = feeMode.value;
            const feeValueValue = parseFloat(feeValue.value) || 0;
            const historicalDateValue = historicalDate.value || null;

            if (!fromCurrencyValue || !toCurrencyValue || isNaN(amountValue) || amountValue <= 0) {
                clearCurrencyResults();
                return;
            }

            try {
                const result = await window.currencyConverter.convertAmount(amountValue, fromCurrencyValue, toCurrencyValue, {
                    markupBps: markupBpsValue,
                    feeMode: feeModeValue,
                    feeValue: feeValueValue,
                    asOf: historicalDateValue
                });

                if (result.success) {
                    showCurrencyResult(result);
                } else {
                    showCurrencyError(result.error);
                }
            } catch (error) {
                showCurrencyError('Error performing conversion: ' + error.message);
            }
        }

        function showCurrencyResult(result) {
            // Hide error, show result
            const currencyError = document.getElementById('currency-error');
            const currencyResult = document.getElementById('currency-result');
            const rateInfo = document.getElementById('rate-info');
            
            if (currencyError) currencyError.classList.add('hidden');
            if (currencyResult) currencyResult.classList.remove('hidden');
            if (rateInfo) rateInfo.classList.remove('hidden');

            // Display result
            const resultAmount = document.getElementById('result-amount');
            if (resultAmount) {
                resultAmount.textContent = `${result.to.symbol}${result.to.amount.toLocaleString()} ${result.to.currency}`;
            }

            const resultDetails = document.getElementById('result-details');
            if (resultDetails) {
                resultDetails.textContent = `${result.from.symbol}${result.from.amount.toLocaleString()} ${result.from.currency} = ${result.to.symbol}${result.to.amount.toLocaleString()} ${result.to.currency}`;
            }

            // Display rate information
            const rawRate = document.getElementById('raw-rate');
            const effectiveRate = document.getElementById('effective-rate');
            const markupInfo = document.getElementById('markup-info');
            const feesInfo = document.getElementById('fees-info');
            
            if (rawRate) rawRate.textContent = result.rate.raw.toFixed(6);
            if (effectiveRate) effectiveRate.textContent = result.rate.effective.toFixed(6);
            
            if (markupInfo) {
                if (result.rate.markup > 0) {
                    markupInfo.textContent = `${result.rate.markup} bps (${(result.rate.markup / 100).toFixed(2)}%)`;
                } else {
                    markupInfo.textContent = 'None';
                }
            }

            if (feesInfo) {
                if (result.fees.amount > 0) {
                    feesInfo.textContent = `${result.fees.mode}: ${result.fees.amount.toFixed(2)}`;
                } else {
                    feesInfo.textContent = 'None';
                }
            }

            // Update to amount field
            const toAmount = document.getElementById('to-amount');
            if (toAmount) toAmount.value = result.to.amount;
        }

        function showCurrencyError(message) {
            // Hide result, show error
            const currencyResult = document.getElementById('currency-result');
            const rateInfo = document.getElementById('rate-info');
            const currencyError = document.getElementById('currency-error');
            const currencyErrorMessage = document.getElementById('currency-error-message');
            
            if (currencyResult) currencyResult.classList.add('hidden');
            if (rateInfo) rateInfo.classList.add('hidden');
            if (currencyError) currencyError.classList.remove('hidden');
            if (currencyErrorMessage) currencyErrorMessage.textContent = message;
        }

        function clearCurrencyResults() {
            const currencyResult = document.getElementById('currency-result');
            const currencyError = document.getElementById('currency-error');
            const rateInfo = document.getElementById('rate-info');
            const toAmount = document.getElementById('to-amount');
            
            if (currencyResult) currencyResult.classList.add('hidden');
            if (currencyError) currencyError.classList.add('hidden');
            if (rateInfo) rateInfo.classList.add('hidden');
            if (toAmount) toAmount.value = '';
        }

        function setQuickConversion(fromCurrency, toCurrency, amount) {
            const fromCurrencyEl = document.getElementById('from-currency');
            const toCurrencyEl = document.getElementById('to-currency');
            const amountEl = document.getElementById('from-amount');
            
            if (fromCurrencyEl) fromCurrencyEl.value = fromCurrency;
            if (toCurrencyEl) toCurrencyEl.value = toCurrency;
            if (amountEl) amountEl.value = amount;
            
            updateCurrencyConversion();
        }

        // Initialize currency converter when currency modal is opened
        function openCurrencyModal() {
            console.log('Opening currency modal...');
            openModal('currency');
            // Initialize and populate dropdowns
            setTimeout(() => {
                console.log('Initializing currency converter...');
                const initSuccess = initializeCurrencyConverter();
                if (initSuccess) {
                    console.log('Populating currency dropdowns...');
                    populateCurrencyDropdowns();
                } else {
                    console.error('Failed to initialize currency converter');
                }
            }, 100);
        }

        // Debug functions for currency converter
        function testCurrencyConverter() {
            const debugOutput = document.getElementById('debug-output');
            debugOutput.classList.remove('hidden');
            
            let output = '=== Currency Converter Test ===\n';
            
            // Check if class is available
            output += `AdvancedCurrencyConverter available: ${typeof AdvancedCurrencyConverter !== 'undefined'}\n`;
            output += `AdvancedCurrencyConverter type: ${typeof AdvancedCurrencyConverter}\n`;
            
            // Check if instance exists
            output += `window.currencyConverter exists: ${!!window.currencyConverter}\n`;
            
            if (window.currencyConverter) {
                output += `Currency converter instance: ${window.currencyConverter.constructor.name}\n`;
                
                // Test methods
                try {
                    const currencies = window.currencyConverter.getSupportedCurrencies();
                    output += `Supported currencies: ${currencies.length} found\n`;
                    output += `First 5 currencies: ${currencies.slice(0, 5).join(', ')}\n`;
                } catch (error) {
                    output += `Error getting currencies: ${error.message}\n`;
                }
                
                try {
                    const popular = window.currencyConverter.getPopularCurrencies();
                    output += `Popular currencies: ${popular.length} found\n`;
                    output += `Popular: ${popular.join(', ')}\n`;
                } catch (error) {
                    output += `Error getting popular currencies: ${error.message}\n`;
                }
            }
            
            // Check DOM elements
            const fromSelect = document.getElementById('from-currency');
            const toSelect = document.getElementById('to-currency');
            output += `From select exists: ${!!fromSelect}\n`;
            output += `To select exists: ${!!toSelect}\n`;
            
            if (fromSelect) {
                output += `From select options: ${fromSelect.options.length}\n`;
            }
            if (toSelect) {
                output += `To select options: ${toSelect.options.length}\n`;
            }
            
            debugOutput.textContent = output;
        }

        function debugCurrencyDropdowns() {
            const debugOutput = document.getElementById('debug-output');
            debugOutput.classList.remove('hidden');
            
            let output = '=== Currency Dropdowns Debug ===\n';
            
            // Check initialization
            output += `Currency converter initialized: ${!!window.currencyConverter}\n`;
            
            if (window.currencyConverter) {
                output += `Converter class: ${window.currencyConverter.constructor.name}\n`;
                
                // Test population
                try {
                    populateCurrencyDropdowns();
                    output += 'Dropdown population attempted\n';
                    
                    const fromSelect = document.getElementById('from-currency');
                    const toSelect = document.getElementById('to-currency');
                    
                    if (fromSelect && toSelect) {
                        output += `From options: ${fromSelect.options.length}\n`;
                        output += `To options: ${toSelect.options.length}\n`;
                        
                        if (fromSelect.options.length > 0) {
                            output += `First option: ${fromSelect.options[0].textContent}\n`;
                        }
                    }
                } catch (error) {
                    output += `Error populating dropdowns: ${error.message}\n`;
                }
            } else {
                output += 'Currency converter not initialized\n';
                output += 'Attempting to initialize...\n';
                
                try {
                    initializeCurrencyConverter();
                    output += 'Initialization attempted\n';
                    
                    if (window.currencyConverter) {
                        output += 'Now initialized, attempting to populate...\n';
                        populateCurrencyDropdowns();
                        output += 'Population attempted\n';
                    }
                } catch (error) {
                    output += `Error during initialization: ${error.message}\n`;
                }
            }
            
            debugOutput.textContent = output;
        }

        // Color Converter Functions
        function updateColorInputs() {
            if (!window.colorConverter) {
                initializeColorConverter();
                return;
            }

            const fromSpace = document.getElementById('from-color-space').value;
            const inputsContainer = document.getElementById('color-inputs');
            
            if (!inputsContainer) return;
            
            inputsContainer.innerHTML = '';
            
            switch (fromSpace) {
                case 'hex':
                    inputsContainer.innerHTML = `
                        <div>
                            <label class="block text-sm font-medium mb-2">HEX Color</label>
                            <input type="text" id="hex-input" placeholder="#FF0000" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent font-mono" oninput="updateColorPreview()">
                        </div>
                    `;
                    break;
                    
                case 'srgb8':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Red (0-255)</label>
                                <input type="number" id="r-input" min="0" max="255" value="255" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Green (0-255)</label>
                                <input type="number" id="g-input" min="0" max="255" value="255" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Blue (0-255)</label>
                                <input type="number" id="b-input" min="0" max="255" value="255" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'srgb':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Red (0-1)</label>
                                <input type="number" id="r-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Green (0-1)</label>
                                <input type="number" id="g-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Blue (0-1)</label>
                                <input type="number" id="b-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'hsl':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Hue (0-360°)</label>
                                <input type="number" id="h-input" min="0" max="360" value="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Saturation (0-1)</label>
                                <input type="number" id="s-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Lightness (0-1)</label>
                                <input type="number" id="l-input" min="0" max="1" step="0.01" value="0.5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'hsv':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Hue (0-360°)</label>
                                <input type="number" id="h-input" min="0" max="360" value="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Saturation (0-1)</label>
                                <input type="number" id="s-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Value (0-1)</label>
                                <input type="number" id="v-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'cmyk':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-4 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Cyan (0-1)</label>
                                <input type="number" id="c-input" min="0" max="1" step="0.01" value="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Magenta (0-1)</label>
                                <input type="number" id="m-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Yellow (0-1)</label>
                                <input type="number" id="y-input" min="0" max="1" step="0.01" value="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Key (0-1)</label>
                                <input type="number" id="k-input" min="0" max="1" step="0.01" value="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'xyz':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">X (0-100)</label>
                                <input type="number" id="x-input" min="0" max="100" step="0.01" value="41.25" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Y (0-100)</label>
                                <input type="number" id="y-input" min="0" max="100" step="0.01" value="21.27" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Z (0-100)</label>
                                <input type="number" id="z-input" min="0" max="100" step="0.01" value="1.93" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'lab':
                    inputsContainer.innerHTML = `
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">L* (0-100)</label>
                                <input type="number" id="l-input" min="0" max="100" step="0.01" value="53.24" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">a* (-128 to 127)</label>
                                <input type="number" id="a-input" min="-128" max="127" step="0.01" value="80.09" class="w-full p-3 border border-gray-300 rounded-lg focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">b* (-128 to 127)</label>
                                <input type="number" id="b-input" min="-128" max="127" step="0.01" value="67.20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent" oninput="updateColorPreview()">
                            </div>
                        </div>
                    `;
                    break;
            }
            
            // Add alpha slider
            inputsContainer.innerHTML += `
                <div class="mt-4">
                    <label class="block text-sm font-medium mb-2">Alpha (0-1)</label>
                    <input type="range" id="alpha-slider" min="0" max="1" step="0.01" value="1" class="w-full" oninput="updateColorPreview()">
                    <span id="alpha-value" class="text-sm text-gray-600">1.0</span>
                </div>
            `;
            
            // Update alpha value display
            const alphaSlider = document.getElementById('alpha-slider');
            const alphaValue = document.getElementById('alpha-value');
            if (alphaSlider && alphaValue) {
                alphaSlider.addEventListener('input', function() {
                    alphaValue.textContent = this.value;
                });
            }
            
            // Initialize with default values
            updateColorPreview();
        }

        function updateColorPreview() {
            if (!window.colorConverter) {
                initializeColorConverter();
                return;
            }

            try {
                const fromSpace = document.getElementById('from-color-space').value;
                const toSpace = document.getElementById('to-color-space').value;
                const alphaSlider = document.getElementById('alpha-slider');
                const alpha = alphaSlider ? parseFloat(alphaSlider.value) : 1.0;
                
                let input;
                
                // Get input values based on color space
                switch (fromSpace) {
                    case 'hex':
                        const hexInput = document.getElementById('hex-input');
                        if (hexInput && hexInput.value) {
                            input = hexInput.value;
                        } else {
                            input = '#FF0000';
                        }
                        break;
                        
                    case 'srgb8':
                        const r8 = parseInt(document.getElementById('r-input')?.value || 255);
                        const g8 = parseInt(document.getElementById('g-input')?.value || 255);
                        const b8 = parseInt(document.getElementById('b-input')?.value || 255);
                        input = [r8, g8, b8, alpha];
                        break;
                        
                    case 'srgb':
                        const r = parseFloat(document.getElementById('r-input')?.value || 1);
                        const g = parseFloat(document.getElementById('g-input')?.value || 1);
                        const b = parseFloat(document.getElementById('b-input')?.value || 1);
                        input = [r, g, b, alpha];
                        break;
                        
                    case 'hsl':
                        const h = parseFloat(document.getElementById('h-input')?.value || 0);
                        const s = parseFloat(document.getElementById('s-input')?.value || 1);
                        const l = parseFloat(document.getElementById('l-input')?.value || 0.5);
                        input = [h, s, l, alpha];
                        break;
                        
                    case 'hsv':
                        const hsv_h = parseFloat(document.getElementById('h-input')?.value || 0);
                        const s_hsv = parseFloat(document.getElementById('s-input')?.value || 1);
                        const v = parseFloat(document.getElementById('v-input')?.value || 1);
                        input = [hsv_h, s_hsv, v, alpha];
                        break;
                        
                    case 'cmyk':
                        const c = parseFloat(document.getElementById('c-input')?.value || 0);
                        const m = parseFloat(document.getElementById('m-input')?.value || 1);
                        const y_cmyk = parseFloat(document.getElementById('y-input')?.value || 1);
                        const k = parseFloat(document.getElementById('k-input')?.value || 0);
                        input = [c, m, y_cmyk, k, alpha];
                        break;
                        
                    case 'xyz':
                        const x = parseFloat(document.getElementById('x-input')?.value || 41.25);
                        const y = parseFloat(document.getElementById('y-input')?.value || 21.27);
                        const z = parseFloat(document.getElementById('z-input')?.value || 1.93);
                        input = [x, y, z, alpha];
                        break;
                        
                    case 'lab':
                        const l_lab = parseFloat(document.getElementById('l-input')?.value || 53.24);
                        const a_lab = parseFloat(document.getElementById('a-input')?.value || 80.09);
                        const b_lab = parseFloat(document.getElementById('b-input')?.value || 67.20);
                        input = [l_lab, a_lab, b_lab, alpha];
                        break;
                        
                    default:
                        input = [1, 0, 0, alpha];
                }
                
                // Convert color
                const result = window.colorConverter.convertColor(input, fromSpace, toSpace, alpha);
                
                if (result && !result.error) {
                    // Update preview
                    const preview = document.getElementById('color-preview');
                    if (preview) {
                        const srgb = window.colorConverter.convertColor(input, fromSpace, 'srgb', alpha);
                        if (srgb && !srgb.error) {
                            const r = Math.round(srgb[0] * 255);
                            const g = Math.round(srgb[1] * 255);
                            const b = Math.round(srgb[2] * 255);
                            const a = srgb[3] || 1;
                            preview.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${a})`;
                        }
                    }
                    
                    // Update result display
                    const resultDisplay = document.getElementById('color-result');
                    if (resultDisplay) {
                        if (Array.isArray(result)) {
                            resultDisplay.textContent = result.map(v => typeof v === 'number' ? v.toFixed(4) : v).join(', ');
                        } else {
                            resultDisplay.textContent = result;
                        }
                    }
                    
                    // Update all color space displays
                    updateAllColorSpaces(input, fromSpace, alpha);
                } else {
                    console.error('Color conversion error:', result?.error);
                }
                
            } catch (error) {
                console.error('Error updating color preview:', error);
            }
        }

        function updateAllColorSpaces(input, fromSpace, alpha) {
            if (!window.colorConverter) return;
            
            try {
                const colorInfo = window.colorConverter.getColorInfo(input, fromSpace);
                
                if (colorInfo && !colorInfo.error) {
                    // Update HEX display
                    const hexDisplay = document.getElementById('hex-display');
                    if (hexDisplay) hexDisplay.textContent = colorInfo.hex;
                    
                    // Update RGB display
                    const rgbDisplay = document.getElementById('rgb-display');
                    if (rgbDisplay) {
                        const rgb = colorInfo.rgb;
                        rgbDisplay.textContent = `rgb(${Math.round(rgb[0] * 255)}, ${Math.round(rgb[1] * 255)}, ${Math.round(rgb[2] * 255)})`;
                    }
                    
                    // Update HSL display
                    const hslDisplay = document.getElementById('hsl-display');
                    if (hslDisplay) {
                        const hsl = colorInfo.hsl;
                        hslDisplay.textContent = `hsl(${hsl[0].toFixed(1)}°, ${(hsl[1] * 100).toFixed(1)}%, ${(hsl[2] * 100).toFixed(1)}%)`;
                    }
                    
                    // Update HSV display
                    const hsvDisplay = document.getElementById('hsv-display');
                    if (hsvDisplay) {
                        const hsv = colorInfo.hsv;
                        hsvDisplay.textContent = `hsv(${hsv[0].toFixed(1)}°, ${(hsv[1] * 100).toFixed(1)}%, ${(hsv[2] * 100).toFixed(1)}%)`;
                    }
                    
                    // Update CMYK display
                    const cmykDisplay = document.getElementById('cmyk-display');
                    if (cmykDisplay) {
                        const cmyk = colorInfo.cmyk;
                        cmykDisplay.textContent = `cmyk(${cmyk[0].toFixed(3)}, ${cmyk[1].toFixed(3)}, ${cmyk[2].toFixed(3)}, ${cmyk[3].toFixed(3)})`;
                    }
                    
                    // Update XYZ display
                    const xyzDisplay = document.getElementById('xyz-display');
                    if (xyzDisplay) {
                        const xyz = colorInfo.xyz;
                        xyzDisplay.textContent = `xyz(${xyz[0].toFixed(3)}, ${xyz[1].toFixed(3)}, ${xyz[2].toFixed(3)})`;
                    }
                    
                    // Update LAB display
                    const labDisplay = document.getElementById('lab-display');
                    if (labDisplay) {
                        const lab = colorInfo.lab;
                        labDisplay.textContent = `lab(${lab[0].toFixed(2)}, ${lab[1].toFixed(2)}, ${lab[2].toFixed(2)})`;
                    }
                }
            } catch (error) {
                console.error('Error updating all color spaces:', error);
            }
        }

        // Initialize color converter when color modal is opened
        function openColorModal() {
            openModal('color');
            setTimeout(() => {
                if (initializeColorConverter()) {
                    updateColorInputs();
                }
            }, 100);
        }

        // Utility functions for color converter
        function setQuickColor(color, space) {
            document.getElementById('from-color-space').value = space;
            updateColorInputs();
            
            if (space === 'hex') {
                document.getElementById('hex-input').value = color;
            }
            
            updateColorPreview();
        }

        function clearColorResults() {
            const resultElement = document.getElementById('color-result');
            const errorElement = document.getElementById('color-error');
            const infoElement = document.getElementById('color-info');
            
            if (resultElement) resultElement.classList.add('hidden');
            if (errorElement) errorElement.classList.add('hidden');
            if (infoElement) infoElement.classList.add('hidden');
        }

        function getCurrentColorInput(space, alpha) {
            try {
                switch (space) {
                    case 'hex':
                        const hexInput = document.getElementById('hex-input');
                        return hexInput && hexInput.value ? hexInput.value : null;
                        
                    case 'srgb8':
                    case 'srgb':
                    case 'srgb-linear':
                        const r = parseFloat(document.getElementById('r-input')?.value || 0);
                        const g = parseFloat(document.getElementById('g-input')?.value || 0);
                        const b = parseFloat(document.getElementById('b-input')?.value || 0);
                        return [r, g, b, alpha];
                        
                    case 'hsl':
                        const h = parseFloat(document.getElementById('h-input')?.value || 0);
                        const s = parseFloat(document.getElementById('s-input')?.value || 0);
                        const l = parseFloat(document.getElementById('l-input')?.value || 1);
                        return [h, s, l, alpha];
                        
                    case 'hsv':
                        const hh = parseFloat(document.getElementById('h-input')?.value || 0);
                        const ss = parseFloat(document.getElementById('s-input')?.value || 0);
                        const v = parseFloat(document.getElementById('v-input')?.value || 1);
                        return [hh, ss, v, alpha];
                        
                    case 'cmyk':
                        const c = parseFloat(document.getElementById('c-input')?.value || 0);
                        const m = parseFloat(document.getElementById('m-input')?.value || 0);
                        const y = parseFloat(document.getElementById('y-input')?.value || 0);
                        const k = parseFloat(document.getElementById('k-input')?.value || 0);
                        return [c, m, y, k, alpha];
                        
                    case 'xyz':
                        const x = parseFloat(document.getElementById('x-input')?.value || 0);
                        const yy = parseFloat(document.getElementById('y-input')?.value || 0);
                        const z = parseFloat(document.getElementById('z-input')?.value || 0);
                        return [x, yy, z, alpha];
                        
                    case 'lab':
                        const ll = parseFloat(document.getElementById('l-input')?.value || 0);
                        const aa = parseFloat(document.getElementById('a-input')?.value || 0);
                        const bb = parseFloat(document.getElementById('b-input')?.value || 0);
                        return [ll, aa, bb, alpha];
                        
                    default:
                        return null;
                }
            } catch (error) {
                return null;
            }
        }

        // Color harmony functions
        function generateComplementary() {
            if (!window.colorConverter) return;
            
            try {
                const fromSpace = document.getElementById('from-color-space').value;
                const alphaSlider = document.getElementById('alpha-slider');
                const alpha = alphaSlider ? parseFloat(alphaSlider.value) : 1.0;
                let input = getCurrentColorInput(fromSpace, alpha);
                
                if (!input) return;
                
                const result = window.colorConverter.generateComplementary(input, fromSpace);
                if (result.error) {
                    console.error('Error generating complementary color:', result.error);
                } else {
                    // Set the complementary color as input
                    setColorInput(result.complementary, fromSpace);
                    updateColorPreview();
                }
            } catch (error) {
                console.error('Error generating complementary color:', error);
            }
        }

        function generateAnalogous() {
            if (!window.colorConverter) return;
            
            try {
                const fromSpace = document.getElementById('from-color-space').value;
                const alphaSlider = document.getElementById('alpha-slider');
                const alpha = alphaSlider ? parseFloat(alphaSlider.value) : 1.0;
                let input = getCurrentColorInput(fromSpace, alpha);
                
                if (!input) return;
                
                const result = window.colorConverter.generateAnalogous(input, fromSpace, 3);
                if (result.error) {
                    console.error('Error generating analogous colors:', result.error);
                } else {
                    // Show analogous colors in info section
                    const infoElement = document.getElementById('color-info');
                    if (infoElement) {
                        infoElement.classList.remove('hidden');
                        const infoContent = document.getElementById('info-content');
                        if (infoContent) {
                            infoContent.innerHTML = `
                                <div><strong>Original:</strong> ${JSON.stringify(result.original)}</div>
                                <div><strong>Analogous 1:</strong> ${JSON.stringify(result.analogous[0])}</div>
                                <div><strong>Analogous 2:</strong> ${JSON.stringify(result.analogous[1])}</div>
                                <div><strong>Analogous 3:</strong> ${JSON.stringify(result.analogous[2])}</div>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error('Error generating analogous colors:', error);
            }
        }

        function generateTriadic() {
            if (!window.colorConverter) return;
            
            try {
                const fromSpace = document.getElementById('from-color-space').value;
                const alphaSlider = document.getElementById('alpha-slider');
                const alpha = alphaSlider ? parseFloat(alphaSlider.value) : 1.0;
                let input = getCurrentColorInput(fromSpace, alpha);
                
                if (!input) return;
                
                const result = window.colorConverter.generateTriadic(input, fromSpace);
                if (result.error) {
                    console.error('Error generating triadic colors:', result.error);
                } else {
                    // Show triadic colors in info section
                    const infoElement = document.getElementById('color-info');
                    if (infoElement) {
                        infoElement.classList.remove('hidden');
                        const infoContent = document.getElementById('info-content');
                        if (infoContent) {
                            infoContent.innerHTML = `
                                <div><strong>Original:</strong> ${JSON.stringify(result.original)}</div>
                                <div><strong>Triadic 1:</strong> ${JSON.stringify(result.triadic1)}</div>
                                <div><strong>Triadic 2:</strong> ${JSON.stringify(result.triadic2)}</div>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error('Error generating triadic colors:', error);
            }
        }

        function setColorInput(color, space) {
            try {
                switch (space) {
                    case 'hex':
                        if (document.getElementById('hex-input')) {
                            document.getElementById('hex-input').value = color;
                        }
                        break;
                        
                    case 'srgb8':
                    case 'srgb':
                    case 'srgb-linear':
                        if (color.length >= 3) {
                            if (document.getElementById('r-input')) document.getElementById('r-input').value = color[0];
                            if (document.getElementById('g-input')) document.getElementById('g-input').value = color[1];
                            if (document.getElementById('b-input')) document.getElementById('b-input').value = color[2];
                        }
                        break;
                        
                    case 'hsl':
                        if (color.length >= 3) {
                            if (document.getElementById('h-input')) document.getElementById('h-input').value = color[0];
                            if (document.getElementById('s-input')) document.getElementById('s-input').value = color[1];
                            if (document.getElementById('l-input')) document.getElementById('l-input').value = color[2];
                        }
                        break;
                        
                    case 'hsv':
                        if (color.length >= 3) {
                            if (document.getElementById('h-input')) document.getElementById('h-input').value = color[0];
                            if (document.getElementById('s-input')) document.getElementById('s-input').value = color[1];
                            if (document.getElementById('v-input')) document.getElementById('v-input').value = color[2];
                        }
                        break;
                        
                    case 'cmyk':
                        if (color.length >= 4) {
                            if (document.getElementById('c-input')) document.getElementById('c-input').value = color[0];
                            if (document.getElementById('m-input')) document.getElementById('m-input').value = color[1];
                            if (document.getElementById('y-input')) document.getElementById('y-input').value = color[2];
                            if (document.getElementById('k-input')) document.getElementById('k-input').value = color[3];
                        }
                        break;
                        
                    case 'xyz':
                        if (color.length >= 3) {
                            if (document.getElementById('x-input')) document.getElementById('x-input').value = color[0];
                            if (document.getElementById('y-input')) document.getElementById('y-input').value = color[1];
                            if (document.getElementById('z-input')) document.getElementById('z-input').value = color[2];
                        }
                        break;
                        
                    case 'lab':
                        if (color.length >= 3) {
                            if (document.getElementById('l-input')) document.getElementById('l-input').value = color[0];
                            if (document.getElementById('a-input')) document.getElementById('a-input').value = color[1];
                            if (document.getElementById('b-input')) document.getElementById('b-input').value = color[2];
                        }
                        break;
                }
            } catch (error) {
                console.error('Error setting color input:', error);
            }
        }

        function updateAlphaValue() {
            const slider = document.getElementById('alpha-slider');
            const value = document.getElementById('alpha-value');
            if (slider && value) {
                value.textContent = slider.value;
                updateColorPreview();
            }
        }

        function updateAlphaSlider() {
            const slider = document.getElementById('alpha-slider');
            const value = document.getElementById('alpha-value');
            if (slider && value) {
                slider.value = value.textContent;
                updateColorPreview();
            }
        }

        function convertColor() {
            if (!window.colorConverter) {
                initializeColorConverter();
                return;
            }

            try {
                const fromSpace = document.getElementById('from-color-space').value;
                const toSpace = document.getElementById('to-color-space').value;
                const alphaSlider = document.getElementById('alpha-slider');
                const alpha = alphaSlider ? parseFloat(alphaSlider.value) : 1.0;

                let input = getCurrentColorInput(fromSpace, alpha);
                if (!input) {
                    console.error('No valid input color found');
                    return;
                }

                const result = window.colorConverter.convertColor(input, fromSpace, toSpace, alpha);
                
                if (result && !result.error) {
                    // Update result display
                    const resultDisplay = document.getElementById('color-result');
                    if (resultDisplay) {
                        if (Array.isArray(result)) {
                            resultDisplay.textContent = result.map(v => typeof v === 'number' ? v.toFixed(4) : v).join(', ');
                        } else {
                            resultDisplay.textContent = result;
                        }
                        resultDisplay.classList.remove('hidden');
                    }
                    
                    // Hide error if it was showing
                    const errorElement = document.getElementById('color-error');
                    if (errorElement) errorElement.classList.add('hidden');
                    
                    // Update all color space displays
                    updateAllColorSpaces(input, fromSpace, alpha);
                } else {
                    console.error('Color conversion error:', result?.error);
                    // Show error
                    const errorElement = document.getElementById('color-error');
                    if (errorElement) errorElement.classList.remove('hidden');
                    const errorMessage = document.getElementById('error-message');
                    if (errorMessage) errorMessage.textContent = result?.error || 'Unknown error';
                }
                
            } catch (error) {
                console.error('Error converting color:', error);
                // Show error
                const errorElement = document.getElementById('color-error');
                if (errorElement) {
                    errorElement.classList.remove('hidden');
                    const errorMessage = document.getElementById('error-message');
                    if (errorMessage) errorMessage.textContent = error.message;
                }
            }
        }

        function showColorError(message) {
            const resultElement = document.getElementById('color-result');
            const errorElement = document.getElementById('color-error');
            const infoElement = document.getElementById('color-info');
            
            if (resultElement) resultElement.classList.add('hidden');
            if (infoElement) infoElement.classList.add('hidden');
            if (errorElement) {
                errorElement.classList.remove('hidden');
                const errorMessage = document.getElementById('error-message');
                if (errorMessage) errorMessage.textContent = message;
            }
        }

        function showColorInfo(input, fromSpace) {
            try {
                if (!window.colorConverter) return;
                
                const info = window.colorConverter.getColorInfo(input, fromSpace);
                if (info.error) {
                    return;
                }

                const infoElement = document.getElementById('color-info');
                if (infoElement) {
                    infoElement.classList.remove('hidden');
                    const infoContent = document.getElementById('info-content');
                    
                    if (infoContent) {
                        infoContent.innerHTML = `
                            <div><strong>HEX:</strong> ${info.hex}</div>
                            <div><strong>sRGB:</strong> [${info.srgb[0].toFixed(4)}, ${info.srgb[1].toFixed(4)}, ${info.srgb[2].toFixed(4)}]</div>
                            <div><strong>HSL:</strong> [${info.hsl[0].toFixed(1)}°, ${info.hsl[1].toFixed(4)}, ${info.hsl[2].toFixed(4)}]</div>
                            <div><strong>HSV:</strong> [${info.hsv[0].toFixed(1)}°, ${info.hsv[1].toFixed(4)}, ${info.hsv[2].toFixed(4)}]</div>
                            <div><strong>CMYK:</strong> [${info.cmyk[0].toFixed(4)}, ${info.cmyk[1].toFixed(4)}, ${info.cmyk[2].toFixed(4)}, ${info.cmyk[3].toFixed(4)}]</div>
                            <div><strong>XYZ:</strong> [${info.xyz[0].toFixed(4)}, ${info.xyz[1].toFixed(4)}, ${info.xyz[2].toFixed(4)}]</div>
                            <div><strong>CIELAB:</strong> [${info.lab[0].toFixed(4)}, ${info.lab[1].toFixed(4)}, ${info.lab[2].toFixed(4)}]</div>
                        `;
                    }
                }

            } catch (error) {
                console.error('Error showing color info:', error);
            }
        }

        function updateColorConversion() {
            // This function is called when the target color space changes
            // We can add logic here if needed
            updateColorPreview();
        }

        // Base64 Encoder Functions
        function encodeBase64() {
            if (!window.base64Encoder) {
                initializeBase64Encoder();
                return;
            }

            try {
                const inputType = document.getElementById('base64-input-type').value;
                let input, data;

                if (inputType === 'text') {
                    input = document.getElementById('base64-text').value;
                    if (!input) {
                        showBase64Error('Please enter text to encode');
                        return;
                    }
                    data = input;
                } else if (inputType === 'hex') {
                    input = document.getElementById('base64-hex').value;
                    if (!input) {
                        showBase64Error('Please enter hex string to encode');
                        return;
                    }
                    // Convert hex string to bytes
                    if (input.length % 2 !== 0) {
                        showBase64Error('Hex string must have even length');
                        return;
                    }
                    data = new Uint8Array(input.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));
                } else if (inputType === 'file') {
                    const fileInput = document.getElementById('base64-file');
                    if (!fileInput.files[0]) {
                        showBase64Error('Please select a file to encode');
                        return;
                    }
                    // For file encoding, we'll need to handle it differently
                    showBase64Error('File encoding not yet implemented');
                    return;
                } else {
                    showBase64Error('Invalid input type');
                    return;
                }

                const urlSafe = document.getElementById('base64-url-safe').checked;
                const wrapMime = document.getElementById('base64-mime-wrap').checked;
                const omitPadding = document.getElementById('base64-omit-padding').checked;

                const encoded = window.base64Encoder.encode(data, {
                    urlSafe,
                    wrapMime,
                    omitPadding
                });

                // Show result
                document.getElementById('base64-result-content').textContent = encoded;
                document.getElementById('base64-result').classList.remove('hidden');
                document.getElementById('base64-error').classList.add('hidden');

                // Show statistics
                const stats = window.base64Encoder.getStats(data);
                showBase64Stats(stats);

                // Show all variants
                const variants = window.base64Encoder.encodeAllVariants(data);
                showBase64Variants(variants);

            } catch (error) {
                showBase64Error('Encoding error: ' + error.message);
            }
        }

        function decodeBase64() {
            if (!window.base64Encoder) {
                initializeBase64Encoder();
                return;
            }

            try {
                const inputType = document.getElementById('base64-input-type').value;
                let input;

                if (inputType === 'text') {
                    input = document.getElementById('base64-text').value;
                } else if (inputType === 'hex') {
                    input = document.getElementById('base64-hex').value;
                } else {
                    showBase64Error('Please select text or hex input type for decoding');
                    return;
                }

                if (!input) {
                    showBase64Error('Please enter Base64 data to decode');
                    return;
                }

                const urlSafe = document.getElementById('base64-url-safe').checked;
                const strict = document.getElementById('base64-strict-mode').checked;

                const decoded = window.base64Encoder.decode(input, {
                    urlSafe,
                    strict
                });

                // Convert to string representation
                const decodedString = window.base64Encoder.bytesToString(decoded);
                const hexString = Array.from(decoded).map(b => b.toString(16).padStart(2, '0')).join('');

                // Show results
                document.getElementById('base64-result-content').textContent = `Decoded: ${decodedString}\nHex: ${hexString}\nBytes: ${decoded.length}`;
                document.getElementById('base64-result').classList.remove('hidden');
                document.getElementById('base64-error').classList.add('hidden');

            } catch (error) {
                showBase64Error('Decoding error: ' + error.message);
            }
        }

        function validateBase64() {
            if (!window.base64Encoder) {
                initializeBase64Encoder();
                return;
            }

            try {
                const inputType = document.getElementById('base64-input-type').value;
                let input;

                if (inputType === 'text') {
                    input = document.getElementById('base64-text').value;
                } else if (inputType === 'hex') {
                    input = document.getElementById('base64-hex').value;
                } else {
                    showBase64Error('Please select text or hex input type for validation');
                    return;
                }

                if (!input) {
                    showBase64Error('Please enter Base64 data to validate');
                    return;
                }

                const urlSafe = document.getElementById('base64-url-safe').checked;

                const validation = window.base64Encoder.validate(input, {
                    urlSafe,
                    allowPadding: true,
                    allowWhitespace: true
                });

                if (validation.isValid) {
                    document.getElementById('base64-result-content').textContent = `Valid Base64: ${validation.length} characters, ${validation.padding} padding characters`;
                    document.getElementById('base64-result').classList.remove('hidden');
                    document.getElementById('base64-error').classList.add('hidden');
                } else {
                    showBase64Error('Invalid Base64: ' + validation.error);
                }

            } catch (error) {
                showBase64Error('Validation error: ' + error.message);
            }
        }

        function showBase64Stats(stats) {
            const statsElement = document.getElementById('base64-stats');
            if (statsElement) {
                statsElement.innerHTML = `
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div><strong>Input:</strong> ${stats.inputBytes} bytes (${stats.inputBits} bits)</div>
                        <div><strong>Standard:</strong> ${stats.standardEncodedLength} chars</div>
                        <div><strong>URL-Safe:</strong> ${stats.urlSafeEncodedLength} chars</div>
                        <div><strong>MIME:</strong> ${stats.mimeEncodedLength} chars</div>
                        <div><strong>Expansion:</strong> ${stats.expansionRatio.toFixed(2)}x</div>
                        <div><strong>Padding:</strong> ${stats.paddingCharacters} chars</div>
                    </div>
                `;
                statsElement.classList.remove('hidden');
            }
        }

        function showBase64Variants(variants) {
            const variantsElement = document.getElementById('base64-variants');
            if (variantsElement) {
                variantsElement.innerHTML = `
                    <div class="space-y-2 text-sm">
                        <div><strong>Standard:</strong> <code class="bg-gray-100 px-1 rounded">${variants.standard}</code></div>
                        <div><strong>URL-Safe:</strong> <code class="bg-gray-100 px-1 rounded">${variants.urlSafe}</code></div>
                        <div><strong>URL-Safe (No Padding):</strong> <code class="bg-gray-100 px-1 rounded">${variants.urlSafeNoPadding}</code></div>
                        <div><strong>MIME:</strong> <code class="bg-gray-100 px-1 rounded">${variants.mime}</code></div>
                        <div><strong>MIME URL-Safe:</strong> <code class="bg-gray-100 px-1 rounded">${variants.mimeUrlSafe}</code></div>
                    </div>
                `;
                variantsElement.classList.remove('hidden');
            }
        }

        function showBase64Error(message) {
            const errorElement = document.getElementById('base64-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
            
            // Hide result sections
            document.getElementById('base64-result').classList.add('hidden');
            document.getElementById('base64-stats').classList.add('hidden');
            document.getElementById('base64-variants').classList.add('hidden');
            document.getElementById('validation-result').classList.add('hidden');
        }

        function clearBase64Results() {
            document.getElementById('base64-text').value = '';
            document.getElementById('base64-hex').value = '';
            document.getElementById('base64-result').classList.add('hidden');
            document.getElementById('base64-error').classList.add('hidden');
            document.getElementById('base64-stats').classList.add('hidden');
            document.getElementById('base64-variants').classList.add('hidden');
        }

        function updateBase64Inputs() {
            const inputType = document.getElementById('base64-input-type').value;
            
            // Hide all input containers
            document.getElementById('base64-text-input').classList.add('hidden');
            document.getElementById('base64-hex-input').classList.add('hidden');
            document.getElementById('base64-file-input').classList.add('hidden');
            
            // Show the selected input type
            if (inputType === 'text') {
                document.getElementById('base64-text-input').classList.remove('hidden');
            } else if (inputType === 'hex') {
                document.getElementById('base64-hex-input').classList.remove('hidden');
            } else if (inputType === 'file') {
                document.getElementById('base64-file-input').classList.remove('hidden');
            }
            
            // Clear results when switching input types
            clearBase64Results();
        }

        function runBase64Tests() {
            if (!window.base64Encoder) {
                initializeBase64Encoder();
                return;
            }

            try {
                const results = window.base64Encoder.runSelfTests();
                
                let output = `Base64 Encoder Self-Tests\n`;
                output += `Passed: ${results.passed}, Failed: ${results.failed}\n\n`;
                
                for (const test of results.tests) {
                    if (test.passed) {
                        output += `✅ ${test.name}\n`;
                    } else {
                        output += `❌ ${test.name}: ${test.error || 'Failed'}\n`;
                    }
                }
                
                alert(output);
                
            } catch (error) {
                showBase64Error('Test error: ' + error.message);
            }
        }

        function populateCurrencyDropdowns() {
            if (!window.currencyConverter) {
                console.log('Currency converter not initialized, initializing now...');
                initializeCurrencyConverter();
                // Wait a bit for initialization to complete
                setTimeout(() => {
                    populateCurrencyDropdowns();
                }, 200);
                return;
            }

            try {
                console.log('Populating currency dropdowns...');
                const currencies = window.currencyConverter.getSupportedCurrencies();
                const popularCurrencies = window.currencyConverter.getPopularCurrencies();
                
                console.log('Available currencies:', currencies);
                console.log('Popular currencies:', popularCurrencies);
                
                const fromSelect = document.getElementById('from-currency');
                const toSelect = document.getElementById('to-currency');
                
                if (fromSelect && toSelect) {
                    // Clear existing options
                    fromSelect.innerHTML = '';
                    toSelect.innerHTML = '';
                    
                    // Add popular currencies first
                    popularCurrencies.forEach(currency => {
                        const fromOption = document.createElement('option');
                        fromOption.value = currency;
                        fromOption.textContent = `${currency} - ${window.currencyConverter.getCurrencyName(currency)}`;
                        fromSelect.appendChild(fromOption);
                        
                        const toOption = document.createElement('option');
                        toOption.value = currency;
                        toOption.textContent = `${currency} - ${window.currencyConverter.getCurrencyName(currency)}`;
                        toSelect.appendChild(toOption);
                    });
                    
                    // Add separator
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = '──────────';
                    fromSelect.appendChild(separator);
                    toSelect.appendChild(separator);
                    
                    // Add all other currencies
                    currencies.filter(c => !popularCurrencies.includes(c)).forEach(currency => {
                        const fromOption = document.createElement('option');
                        fromOption.value = currency;
                        fromOption.textContent = `${currency} - ${window.currencyConverter.getCurrencyName(currency)}`;
                        fromSelect.appendChild(fromOption);
                        
                        const toOption = document.createElement('option');
                        toOption.value = currency;
                        toOption.textContent = `${currency} - ${window.currencyConverter.getCurrencyName(currency)}`;
                        toSelect.appendChild(toOption);
                    });
                    
                    // Set default values
                    fromSelect.value = 'USD';
                    toSelect.value = 'EUR';
                    
                    console.log('Currency dropdowns populated successfully');
                } else {
                    console.error('Currency select elements not found');
                }
            } catch (error) {
                console.error('Error populating currency dropdowns:', error);
            }
        }

        // BMI Calculator Functions
        function switchBMIUnits() {
            const unitSystem = document.querySelector('input[name="bmi-unit-system"]:checked').value;
            const adultHeightInput = document.getElementById('adult-height-input');
            const childHeightInput = document.getElementById('child-height-input');
            
            if (unitSystem === 'metric') {
                // Switch to metric (kg, m/cm)
                if (adultHeightInput) {
                    adultHeightInput.innerHTML = `
                        <input type="number" id="adult-height-metric" placeholder="1.75" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    `;
                }
                if (childHeightInput) {
                    childHeightInput.innerHTML = `
                        <input type="number" id="child-height-metric" placeholder="1.40" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    `;
                }
                
                // Update weight placeholders
                const adultWeightMetric = document.getElementById('adult-weight-metric');
                const childWeightMetric = document.getElementById('child-weight-metric');
                if (adultWeightMetric) adultWeightMetric.placeholder = '70';
                if (childWeightMetric) childWeightMetric.placeholder = '35';
            } else {
                // Switch to US customary (lb, ft/in)
                if (adultHeightInput) {
                    adultHeightInput.innerHTML = `
                        <div class="grid grid-cols-2 gap-2">
                            <input type="number" id="adult-height-ft" placeholder="5" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <input type="number" id="adult-height-in" placeholder="9" min="0" max="11" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    `;
                }
                if (childHeightInput) {
                    childHeightInput.innerHTML = `
                        <div class="grid grid-cols-2 gap-2">
                            <input type="number" id="child-height-ft" placeholder="4" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <input type="number" id="child-height-in" placeholder="7" min="0" max="11" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    `;
                }
                
                // Update weight placeholders
                const adultWeightMetric = document.getElementById('adult-weight-metric');
                const childWeightMetric = document.getElementById('child-weight-metric');
                if (adultWeightMetric) adultWeightMetric.placeholder = '154';
                if (childWeightMetric) childWeightMetric.placeholder = '77';
            }
        }

        function calculateAdultBMI() {
            console.log('calculateAdultBMI called');
            console.log('window.bmiCalc available:', !!window.bmiCalc);
            
            if (!window.bmiCalc) {
                console.log('BMI Calculator not initialized, initializing...');
                initializeBMICalculator();
                return;
            }

            const unitSystem = document.querySelector('input[name="bmi-unit-system"]:checked').value;
            let height, weight, heightDetail = null;

            if (unitSystem === 'metric') {
                height = parseFloat(document.getElementById('adult-height-metric').value);
                weight = parseFloat(document.getElementById('adult-weight-metric').value);
            } else {
                const heightFt = parseInt(document.getElementById('adult-height-ft').value) || 0;
                const heightIn = parseInt(document.getElementById('adult-height-in').value) || 0;
                height = heightFt * 12 + heightIn; // Total inches
                weight = parseFloat(document.getElementById('adult-weight-metric').value); // Pounds
                heightDetail = { feet: heightFt, inches: heightIn };
            }

            if (!height || !weight || height <= 0 || weight <= 0) {
                alert('Please enter valid height and weight values');
                return;
            }

            try {
                const result = window.bmiCalc.calculateBMI({
                    weight: weight,
                    height: height,
                    units: unitSystem,
                    population: 'adult',
                    heightDetail: heightDetail
                });
                showBMIResult(result);
            } catch (error) {
                showBMIError('Error calculating BMI: ' + error.message);
            }
        }

        function calculateChildBMI() {
            console.log('calculateChildBMI called');
            console.log('window.bmiCalc available:', !!window.bmiCalc);
            
            if (!window.bmiCalc) {
                console.log('BMI Calculator not initialized, initializing...');
                initializeBMICalculator();
                return;
            }

            const age = parseInt(document.getElementById('child-age').value);
            const sex = document.getElementById('child-sex').value;
            const unitSystem = document.querySelector('input[name="bmi-unit-system"]:checked').value;
            let height, weight, heightDetail = null;

            if (unitSystem === 'metric') {
                height = parseFloat(document.getElementById('child-height-metric').value);
                weight = parseFloat(document.getElementById('child-weight-metric').value);
            } else {
                const heightFt = parseInt(document.getElementById('child-height-ft').value) || 0;
                const heightIn = parseInt(document.getElementById('child-height-in').value) || 0;
                height = heightFt * 12 + heightIn; // Total inches
                weight = parseFloat(document.getElementById('child-weight-metric').value); // Pounds
                heightDetail = { feet: heightFt, inches: heightIn };
            }

            if (!age || !height || !weight || age < 2 || age > 19 || height <= 0 || weight <= 0) {
                alert('Please enter valid age (2-19), height, and weight values');
                return;
            }

            try {
                const result = window.bmiCalc.calculateBMI({
                    weight: weight,
                    height: height,
                    units: unitSystem,
                    population: 'child_teen',
                    heightDetail: heightDetail,
                    ageYears: age,
                    sex: sex
                });
                showBMIResult(result);
            } catch (error) {
                showBMIError('Error calculating BMI: ' + error.message);
            }
        }

        function showBMIResult(result) {
            if (!result || !result.success) {
                showBMIError(result?.error || 'Unknown error occurred');
                return;
            }

            // Hide error, show result
            const bmiResult = document.getElementById('bmi-result');
            const bmiError = document.getElementById('bmi-error');
            if (bmiResult) bmiResult.classList.remove('hidden');
            if (bmiError) bmiError.classList.add('hidden');

            // Display BMI value
            const bmiValue = document.getElementById('bmi-value');
            if (bmiValue && result.bmi) {
                bmiValue.textContent = result.bmi.toFixed(1);
            }
            
            // Display category and description
            const bmiCategory = document.getElementById('bmi-category');
            const bmiDescription = document.getElementById('bmi-description');
            if (bmiCategory && result.classification) {
                bmiCategory.textContent = result.classification.category;
                // Update category color
                bmiCategory.style.color = getCategoryColor(result.classification.color);
            }
            
            if (bmiDescription && result.classification) {
                bmiDescription.textContent = result.classification.description;
            }

            // Display additional information
            const bmiPopulation = document.getElementById('bmi-population');
            const bmiAgeGroup = document.getElementById('bmi-age-group');
            const bmiRecommendation = document.getElementById('bmi-recommendation');
            
            if (bmiPopulation && result.additionalInfo) {
                bmiPopulation.textContent = result.additionalInfo.population;
            }
            
            if (bmiAgeGroup && result.additionalInfo) {
                bmiAgeGroup.textContent = result.additionalInfo.ageGroup;
            }
            
            if (bmiRecommendation && result.additionalInfo) {
                bmiRecommendation.textContent = result.additionalInfo.recommendation;
            }

            // Show/hide child-specific info
            const sexInfo = document.getElementById('bmi-sex-info');
            const percentileInfo = document.getElementById('bmi-percentile-info');
            const bmiSex = document.getElementById('bmi-sex');
            const bmiPercentile = document.getElementById('bmi-percentile');

            if (result.additionalInfo && result.additionalInfo.population === 'Child/Teen') {
                if (bmiSex && result.additionalInfo.sex) {
                    bmiSex.textContent = result.additionalInfo.sex;
                }
                if (bmiPercentile && result.additionalInfo.percentile) {
                    bmiPercentile.textContent = result.additionalInfo.percentile + 'th percentile';
                }
                if (sexInfo) sexInfo.classList.remove('hidden');
                if (percentileInfo) percentileInfo.classList.remove('hidden');
            } else {
                if (sexInfo) sexInfo.classList.add('hidden');
                if (percentileInfo) percentileInfo.classList.add('hidden');
            }
        }

        function showBMIError(message) {
            const bmiResult = document.getElementById('bmi-result');
            const bmiError = document.getElementById('bmi-error');
            if (bmiResult) bmiResult.classList.add('hidden');
            if (bmiError) {
                const errorMessage = document.getElementById('bmi-error-message');
                if (errorMessage) errorMessage.textContent = message;
                bmiError.classList.remove('hidden');
            }
        }

        function getCategoryColor(colorName) {
            const colors = {
                'blue': '#3b82f6',
                'green': '#10b981',
                'yellow': '#f59e0b',
                'orange': '#f97316',
                'red': '#ef4444',
                'purple': '#8b5cf6',
                'gray': '#6b7280'
            };
            return colors[colorName] || '#6b7280';
        }

        function populateBMICategories() {
            if (!window.bmiCalc) return;

            const adultCategories = window.bmiCalc.getAdultCategories();
            const childCategories = window.bmiCalc.getChildCategories();
            const displayElement = document.getElementById('bmi-categories-display');

            if (!displayElement) return;

            let html = '';

            // Adult categories
            html += '<div class="col-span-1 md:col-span-2"><h5 class="font-medium text-gray-700 mb-2">Adult Categories (20+ years):</h5></div>';
            adultCategories.forEach(category => {
                html += `
                    <div class="p-2 rounded border-l-4" style="border-left-color: ${getCategoryColor(category.color)}">
                        <div class="font-medium text-gray-800">${category.category}</div>
                        <div class="text-xs text-gray-600">${category.bmiRange}</div>
                    </div>
                `;
            });

            // Child categories
            html += '<div class="col-span-1 md:col-span-2 mt-3"><h5 class="font-medium text-gray-700 mb-2">Child/Teen Categories (2-19 years):</h5></div>';
            childCategories.forEach(category => {
                html += `
                    <div class="p-2 rounded border-l-4" style="border-left-color: ${getCategoryColor(category.color)}">
                        <div class="font-medium text-gray-800">${category.category}</div>
                        <div class="text-xs text-gray-600">${category.percentileRange}</div>
                    </div>
                `;
            });

            displayElement.innerHTML = html;
        }

        function clearBMIResults() {
            const bmiResult = document.getElementById('bmi-result');
            const bmiError = document.getElementById('bmi-error');
            if (bmiResult) bmiResult.classList.add('hidden');
            if (bmiError) bmiError.classList.add('hidden');
        }

        function switchBMIUnits() {
            const unitSystem = document.querySelector('input[name="bmi-unit-system"]:checked').value;
            updateHeightInputs(unitSystem);
        }

        function updateHeightInputs(unitSystem) {
            const adultHeightInput = document.getElementById('adult-height-input');
            const childHeightInput = document.getElementById('child-height-input');
            
            if (unitSystem === 'metric') {
                // Metric inputs
                if (adultHeightInput) {
                    adultHeightInput.innerHTML = '<input type="number" id="adult-height-metric" placeholder="1.75" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">';
                }
                if (childHeightInput) {
                    childHeightInput.innerHTML = '<input type="number" id="child-height-metric" placeholder="1.40" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">';
                }
                
                // Update weight placeholders
                const adultWeightMetric = document.getElementById('adult-weight-metric');
                const childWeightMetric = document.getElementById('child-weight-metric');
                if (adultWeightMetric) adultWeightMetric.placeholder = '70';
                if (childWeightMetric) childWeightMetric.placeholder = '35';
            } else {
                // US inputs
                if (adultHeightInput) {
                    adultHeightInput.innerHTML = `
                        <div class="grid grid-cols-2 gap-2">
                            <input type="number" id="adult-height-ft" placeholder="5" min="3" max="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <input type="number" id="adult-height-in" placeholder="8" min="0" max="11" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div class="text-xs text-gray-500 mt-1">feet and inches</div>
                    `;
                }
                if (childHeightInput) {
                    childHeightInput.innerHTML = `
                        <div class="grid grid-cols-2 gap-2">
                            <input type="number" id="child-height-ft" placeholder="4" min="2" max="7" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <input type="number" id="child-height-in" placeholder="6" min="0" max="11" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div class="text-xs text-gray-500 mt-1">feet and inches</div>
                    `;
                }
                
                // Update weight placeholders
                const adultWeightMetric = document.getElementById('adult-weight-metric');
                const childWeightMetric = document.getElementById('child-weight-metric');
                if (adultWeightMetric) adultWeightMetric.placeholder = '154';
                if (childWeightMetric) childWeightMetric.placeholder = '77';
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            position: relative;
        }
        
        .hero-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
        }
        
        .tool-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        
        .tool-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .tool-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            animation: float 8s ease-in-out infinite;
        }

        /* Calculator Styles */
        .calc-tab {
            transition: all 0.2s ease;
        }

        .calc-tab.active {
            background: white;
            color: #7c3aed;
        }

        /* Password Generator Styles */
        .password-tab {
            transition: all 0.2s ease;
            background: transparent;
            color: #6b7280;
        }

        .password-tab.active {
            background: #3b82f6;
            color: white;
        }

        .password-tab:hover:not(.active) {
            background: #e5e7eb;
            color: #374151;
        }

        .password-mode {
            transition: all 0.3s ease;
        }

        .password-mode.hidden {
            display: none;
        }

        /* QR Code Generator Styles */
        .qr-tab {
            transition: all 0.2s ease;
            background: transparent;
            color: #6b7280;
        }

        .qr-tab.active {
            background: #8b5cf6;
            color: white;
        }

        .qr-tab:hover:not(.active) {
            background: #e5e7eb;
            color: #374151;
        }

        .qr-mode {
            transition: all 0.3s ease;
        }

        .qr-mode.hidden {
            display: none;
        }

        .calc-tab.active {
            background: white;
            color: #7c3aed;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .calc-tab:not(.active) {
            background: transparent;
            color: #6b7280;
        }

        .calc-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: #374151;
        }

        .calc-mode {
            transition: all 0.3s ease;
        }

        .calc-mode.hidden {
            display: none;
        }

        /* Percentage Calculator Styles */
        .percentage-tab {
            transition: all 0.2s ease;
        }

        .percentage-tab.active {
            background: white;
            color: #10b981;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .percentage-tab:not(.active) {
            background: transparent;
            color: #6b7280;
        }

        .percentage-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: #374151;
        }

        .percentage-mode {
            transition: all 0.3s ease;
        }

        .percentage-mode.hidden {
            display: none;
        }

        /* BMI Calculator Styles */
        .bmi-tab {
            transition: all 0.2s ease;
        }

        .bmi-tab.active {
            background: white;
            color: #8b5cf6;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .bmi-tab:not(.active) {
            background: transparent;
            color: #6b7280;
        }

        .bmi-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: #374151;
        }

        .bmi-mode {
            transition: all 0.3s ease;
        }

        .bmi-mode.hidden {
            display: none;
        }

        /* Age Calculator Styles */
        .age-tab {
            transition: all 0.2s ease;
        }

        .age-tab.active {
            background: white;
            color: #f97316;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .age-tab:not(.active) {
            background: transparent;
            color: #6b7280;
        }

        .age-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: #374151;
        }

        .age-mode {
            transition: all 0.3s ease;
        }

        .age-mode.hidden {
            display: none;
        }

        /* Password Generator Styles */
        .password-tab {
            transition: all 0.2s ease;
        }

        .password-tab.active {
            background: white;
            color: #dc2626;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .password-tab:not(.active) {
            background: transparent;
            color: #6b7280;
        }

        .password-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.5);
            color: #374151;
        }

        .password-mode {
            transition: all 0.3s ease;
        }

        .password-mode.hidden {
            display: none;
        }


        
        .orb-1 {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .orb-2 {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 15%;
            animation-delay: -4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.6);
        }
        
        .input-field {
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
    </style>
    

</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Navigation -->
    <nav class="fixed w-full z-40 bg-white/90 backdrop-blur-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="text-2xl font-bold">
                    <span class="text-gradient">FreeTool</span>Hub
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#home" class="text-gray-700 hover:text-purple-600 transition-colors font-medium">Home</a>
                    <a href="#tools" class="text-gray-700 hover:text-purple-600 transition-colors font-medium">Tools</a>
                    <a href="#about" class="text-gray-700 hover:text-purple-600 transition-colors font-medium">About</a>
                    <a href="#contact" class="text-gray-700 hover:text-purple-600 transition-colors font-medium">Contact</a>
                </div>
                <button class="btn-primary text-white px-6 py-2 rounded-full font-semibold">
                    Get Started
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-gradient min-h-screen flex items-center justify-center relative overflow-hidden">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        
        <div class="text-center text-white z-10 px-6 max-w-6xl mx-auto">
            <h1 class="text-6xl md:text-8xl font-bold mb-8">
                Free Online
                <span class="block text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-pink-300 to-purple-300">
                    Tools Hub
                </span>
            </h1>
            <p class="text-xl md:text-2xl mb-12 max-w-3xl mx-auto leading-relaxed">
                Access 20+ powerful tools for free. Calculate, convert, generate, and optimize - all in one beautiful platform.
            </p>
            <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
                <button onclick="document.getElementById('tools').scrollIntoView({behavior: 'smooth'})" class="btn-primary text-white px-10 py-4 rounded-full font-semibold text-lg">
                    Explore Tools
                </button>
                <button class="bg-white/20 backdrop-blur-lg text-white px-10 py-4 rounded-full font-semibold text-lg hover:bg-white/30 transition-all">
                    Learn More
                </button>
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section id="tools" class="py-24 px-6 bg-white">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-20">
                <h2 class="text-5xl font-bold mb-6 text-gradient">Our Tools Collection</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Discover our comprehensive collection of free online tools designed to make your life easier.
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Background Editor Tool -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('background')">
                    <div class="tool-icon bg-gradient-to-r from-pink-500 to-rose-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🎨 Advanced Background Editor</h3>
                    <p class="text-gray-600 text-sm">AI-powered background removal with layered editing and templates</p>
                </div>

                <!-- Calculator Tools -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('calculator')">
                    <div class="tool-icon bg-gradient-to-r from-blue-500 to-purple-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🧮 Advanced Calculator</h3>
                    <p class="text-gray-600 text-sm">Scientific calculator with Shunting-Yard algorithm & RPN evaluation</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('percentage')">
                    <div class="tool-icon bg-gradient-to-r from-green-500 to-blue-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">📊 Advanced Percentage Calculator</h3>
                    <p class="text-gray-600 text-sm">Calculate percentages, discounts, increases, and more</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('bmi')">
                    <div class="tool-icon bg-gradient-to-r from-purple-500 to-pink-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">⚖️ Advanced BMI Calculator</h3>
                    <p class="text-gray-600 text-sm">Calculate BMI with CDC classification standards</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('age')">
                    <div class="tool-icon bg-gradient-to-r from-orange-500 to-red-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">⏰ Advanced Age Calculator</h3>
                    <p class="text-gray-600 text-sm">Calculate age with leap year logic & ISO 8601 support</p>
                </div>

                <!-- Converter Tools -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('unit')">
                    <div class="tool-icon bg-gradient-to-r from-teal-500 to-green-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">📏 Advanced Unit Converter</h3>
                    <p class="text-gray-600 text-sm">Convert units with exact constants & dimensional validation</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openCurrencyModal()">
                    <div class="tool-icon bg-gradient-to-r from-yellow-500 to-orange-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">💱 Advanced Currency Converter</h3>
                    <p class="text-gray-600 text-sm">Convert currencies with ECB rates & ISO 4217 standards</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openColorModal()">
                    <div class="tool-icon bg-gradient-to-r from-pink-500 to-purple-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a4 4 0 004-4V5z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🎨 Advanced Color Converter</h3>
                    <p class="text-gray-600 text-sm">Convert colors with sRGB, XYZ, CIELAB & transfer functions</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('base64')">
                    <div class="tool-icon bg-gradient-to-r from-indigo-500 to-blue-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🔐 Advanced Base64 Encoder</h3>
                    <p class="text-gray-600 text-sm">RFC 4648 compliant with URL-safe variants & MIME wrapping</p>
                </div>

                <!-- Generator Tools -->
                
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('password')">
                    <div class="tool-icon bg-gradient-to-r from-green-600 to-emerald-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🔒 Advanced Password Generator</h3>
                    <p class="text-gray-600 text-sm">CSPRNG-based generation with entropy-driven sizing, Diceware support, and modern security standards</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('qr')">
                    <div class="tool-icon bg-gradient-to-r from-purple-600 to-pink-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">📱 Advanced QR Code Generator</h3>
                    <p class="text-gray-600 text-sm">ISO/IEC 18004:2024 compliant QR codes with optimal segmentation, ECC levels, and mask selection</p>
                </div>



                <div class="tool-card p-6 rounded-2xl" onclick="openModal('uuid')">
                    <div class="tool-icon bg-gradient-to-r from-cyan-500 to-blue-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🆔 Advanced UUID Generator</h3>
                    <p class="text-gray-600 text-sm">RFC 4122 compliant UUIDs with versions 1, 3, 4, 5, and 7 support</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('hash')">
                    <div class="tool-icon bg-gradient-to-r from-emerald-500 to-teal-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🔐 Advanced Hash Generator</h3>
                    <p class="text-gray-600 text-sm">SHA-256, BLAKE2, Argon2, bcrypt, PBKDF2, xxHash, CRC32 with security best practices</p>
                </div>

                <!-- Text Tools -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('wordcount')">
                    <div class="tool-icon bg-gradient-to-r from-violet-500 to-purple-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">📊 Advanced Word Counter</h3>
                    <p class="text-gray-600 text-sm">Comprehensive text analysis with Unicode support, readability scores, and frequency analysis</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('case')">
                    <div class="tool-icon bg-gradient-to-r from-rose-500 to-pink-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🔄 Advanced Case Converter</h3>
                    <p class="text-gray-600 text-sm">Unicode-aware text case conversion with programming naming conventions and special effects</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('url')">
                    <div class="tool-icon bg-gradient-to-r from-blue-600 to-indigo-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">🔗 Advanced URL Encoder/Decoder</h3>
                    <p class="text-gray-600 text-sm">RFC 3986 compliant URL encoding with form data processing and Base64URL support</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('json')">
                    <div class="tool-icon bg-gradient-to-r from-green-600 to-emerald-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">📄 Advanced JSON Formatter</h3>
                    <p class="text-gray-600 text-sm">Comprehensive JSON processing with validation, formatting, minification, and syntax highlighting</p>
                </div>

                <!-- Time Tools -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('timestamp')">
                    <div class="tool-icon bg-gradient-to-r from-amber-500 to-orange-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced Timestamp Converter</h3>
                    <p class="text-gray-600 text-sm">Convert Unix timestamps to dates</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('timezone')">
                    <div class="tool-icon bg-gradient-to-r from-sky-500 to-blue-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced Timezone Converter</h3>
                    <p class="text-gray-600 text-sm">Convert time between timezones with DST support</p>
                </div>

                <!-- More Tools -->
                <div class="tool-card p-6 rounded-2xl" onclick="openModal('lorem')">
                    <div class="tool-icon bg-gradient-to-r from-slate-600 to-gray-700 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced Lorem Generator</h3>
                    <p class="text-gray-600 text-sm">Generate themed placeholder text with multiple formats</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('markdown')">
                    <div class="tool-icon bg-gradient-to-r from-neutral-600 to-stone-700 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced Markdown Preview</h3>
                    <p class="text-gray-600 text-sm">Preview markdown with syntax highlighting and live updates</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('minify')">
                    <div class="tool-icon bg-gradient-to-r from-red-600 to-rose-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced CSS/JS Minifier</h3>
                    <p class="text-gray-600 text-sm">Minify CSS and JavaScript with advanced optimization techniques</p>
                </div>

                <div class="tool-card p-6 rounded-2xl" onclick="openModal('regex')">
                    <div class="tool-icon bg-gradient-to-r from-fuchsia-600 to-purple-600 mx-auto">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Advanced Regex Tester</h3>
                    <p class="text-gray-600 text-sm">Test regex with multiple engines, live highlighting, and capture groups</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-24 px-6 bg-gray-50">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-5xl font-bold mb-8 text-gradient">Why Choose ToolHub?</h2>
            <p class="text-xl text-gray-600 mb-16 leading-relaxed">
                We've created the most comprehensive collection of free online tools to help you work smarter, not harder.
            </p>
            
            <div class="grid md:grid-cols-3 gap-12">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold mb-4">Lightning Fast</h3>
                    <p class="text-gray-600">All tools work instantly in your browser. No downloads, no waiting.</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full mx-auto mb-6 flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold mb-4">100% Free</h3>
                    <p class="text-gray-600">All tools are completely free to use. No hidden fees or subscriptions.</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mx-auto mb-6 flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold mb-4">Privacy First</h3>
                    <p class="text-gray-600">Your data stays in your browser. We don't store or track anything.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 px-6 hero-gradient">
        <div class="max-w-4xl mx-auto text-center text-white">
            <h2 class="text-5xl font-bold mb-8">Get In Touch</h2>
            <p class="text-xl mb-12 leading-relaxed">
                Have a suggestion for a new tool? Found a bug? We'd love to hear from you!
            </p>
            
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-2xl mx-auto">
                <form class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <input type="text" placeholder="Your Name" class="input-field w-full px-4 py-3 rounded-lg bg-white/90 text-gray-800 focus:outline-none">
                        <input type="email" placeholder="Your Email" class="input-field w-full px-4 py-3 rounded-lg bg-white/90 text-gray-800 focus:outline-none">
                    </div>
                    <textarea placeholder="Your Message" rows="4" class="input-field w-full px-4 py-3 rounded-lg bg-white/90 text-gray-800 focus:outline-none resize-none"></textarea>
                    <button type="button" class="btn-primary w-full py-3 rounded-lg font-semibold text-white" onclick="showContactSuccess()">
                        Send Message
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 px-6">
        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4">
                        <span class="text-gradient">FreeTool</span>Hub
                    </h3>
                    <p class="text-gray-400">Your one-stop destination for free online tools.</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Popular Tools</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Calculator</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Password Generator</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">QR Code Generator</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Unit Converter</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Categories</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Calculators</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Converters</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Generators</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Text Tools</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-purple-600 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-purple-600 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 FreeToolHub. All rights reserved. Made with ❤️ for productivity.</p>
                <p class="mt-2">Created by <span class="text-purple-400 font-semibold">SHIVAM</span></p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Advanced Background Editor Modal -->
    <div id="background" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🎨 Advanced Background Editor</h3>
                <button onclick="closeModal('background')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Upload Section -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Upload Image</label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                    <input type="file" id="background-upload" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
                    <button onclick="document.getElementById('background-upload').click()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Choose Image
                    </button>
                    <p class="text-sm text-gray-500 mt-2">JPG, PNG up to 10MB</p>
                </div>
            </div>

            <!-- AI Processing Mode -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">🤖 AI Processing Mode</label>
                <select id="background-mode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="auto">Auto (Multi-Model Ensemble)</option>
                    <option value="u2net">U²-Net (General Purpose)</option>
                    <option value="modnet">MODNet (Portrait Matting)</option>
                    <option value="sam">SAM (Interactive)</option>
                    <option value="isnet">ISNet (High Accuracy)</option>
                    <option value="rembg_new">RemBG v2 (Latest)</option>
                </select>
            </div>

            <!-- AI Enhancement Options -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">🚀 AI Enhancement</label>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="enhanceImageQuality('2x')" class="px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-colors text-sm font-medium">
                        ⚡ 2x Super-Resolution
                    </button>
                    <button onclick="enhanceImageQuality('4x')" class="px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-colors text-sm font-medium">
                        🚀 4x Super-Resolution
                    </button>
                </div>
            </div>

            <!-- AI Background Generation -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">🎨 AI Background Generation</label>
                <div class="space-y-3">
                    <input type="text" id="ai-background-prompt" placeholder="Describe your background (e.g., 'sunset beach, professional office, modern studio')" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm">
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="generateAIBackground()" class="px-4 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-lg hover:from-pink-600 hover:to-rose-700 transition-colors text-sm font-medium">
                            🎨 Generate AI Background
                        </button>
                        <button onclick="getAISuggestions()" class="px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-colors text-sm font-medium">
                            💡 AI Suggestions
                                </button>
                            </div>
                        </div>
                    </div>

            <!-- Main Editor Area -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <!-- Canvas Area -->
                <div class="lg:col-span-2">
                    <div class="border border-gray-300 rounded-lg p-4">
                        <canvas id="background-editor-canvas" class="max-w-full h-auto border border-gray-200 rounded"></canvas>
                    </div>
                    
                    <!-- Canvas Controls -->
                    <div class="flex space-x-2 mt-4">
                        <button onclick="undoBackgroundEdit()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            ↶ Undo
                        </button>
                        <button onclick="redoBackgroundEdit()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            ↷ Redo
                        </button>
                        <button onclick="resetBackgroundEdit()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            ↻ Reset
                        </button>
                    </div>
                </div>

                <!-- Controls Panel -->
                <div class="space-y-6">
                    <!-- Templates -->
                    <div>
                        <h4 class="font-semibold mb-3">Templates</h4>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="applyBackgroundTemplate('professional')" class="p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                                Professional
                            </button>
                            <button onclick="applyBackgroundTemplate('creative')" class="p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                                Creative
                            </button>
                            <button onclick="applyBackgroundTemplate('minimal')" class="p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                                Minimal
                            </button>
                            <button onclick="applyBackgroundTemplate('vibrant')" class="p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                                Vibrant
                                </button>
                            </div>
                        </div>

                    <!-- Background Options -->
                    <div>
                        <h4 class="font-semibold mb-3">Background</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Type</label>
                                <select id="background-type" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                                    <option value="solid">Solid Color</option>
                                    <option value="gradient">Gradient</option>
                                    <option value="transparent">Transparent</option>
                                </select>
                    </div>

                            <div id="solid-color-control" class="background-control">
                                <label class="block text-sm text-gray-600 mb-1">Color</label>
                                <input type="color" id="background-color" value="#ffffff" class="w-full h-10 border border-gray-300 rounded" onchange="updateBackgroundColor()">
                </div>

                            <div id="gradient-controls" class="background-control hidden">
                                <label class="block text-sm text-gray-600 mb-1">Gradient</label>
                                <select id="gradient-type" class="w-full p-2 border border-gray-300 rounded mb-2">
                                    <option value="linear">Linear</option>
                                    <option value="radial">Radial</option>
                                </select>
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="color" id="gradient-color-1" value="#ff6b6b" class="h-8 border border-gray-300 rounded">
                                    <input type="color" id="gradient-color-2" value="#4ecdc4" class="h-8 border border-gray-300 rounded">
                                </div>
                            </div>
                    </div>
                </div>

                    <!-- Effects -->
                    <div>
                        <h4 class="font-semibold mb-3">Effects</h4>
                        <div class="space-y-3">
                            <!-- Outline -->
                            <div>
                                <label class="flex items-center mb-2">
                                    <input type="checkbox" id="outline-enabled" class="mr-2" onchange="toggleOutline()">
                                    <span class="text-sm">Outline</span>
                                </label>
                                <div id="outline-controls" class="ml-6 space-y-2 hidden">
                                    <div>
                                        <label class="block text-xs text-gray-600">Thickness</label>
                                        <input type="range" id="outline-thickness" min="0" max="10" value="2" class="w-full" onchange="updateOutline()">
                    </div>
                    <div>
                                        <label class="block text-xs text-gray-600">Color</label>
                                        <input type="color" id="outline-color" value="#000000" class="w-full h-8 border border-gray-300 rounded" onchange="updateOutline()">
                    </div>
                    </div>
                </div>

                            <!-- Border -->
                    <div>
                                <label class="flex items-center mb-2">
                                    <input type="checkbox" id="border-enabled" class="mr-2" onchange="toggleBorder()">
                                    <span class="text-sm">Border</span>
                                </label>
                                <div id="border-controls" class="ml-6 space-y-2 hidden">
                                    <div>
                                        <label class="block text-xs text-gray-600">Thickness</label>
                                        <input type="range" id="border-thickness" min="0" max="20" value="4" class="w-full" onchange="updateBorder()">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-600">Color</label>
                                        <input type="color" id="border-color" value="#ffffff" class="w-full h-8 border border-gray-300 rounded" onchange="updateBorder()">
                                    </div>
                    </div>
                </div>

                            <!-- Shadow -->
                    <div>
                                <label class="flex items-center mb-2">
                                    <input type="checkbox" id="shadow-enabled" class="mr-2" onchange="toggleShadow()">
                                    <span class="text-sm">Shadow</span>
                                </label>
                                <div id="shadow-controls" class="ml-6 space-y-2 hidden">
                                    <div>
                                        <label class="block text-xs text-gray-600">Offset X</label>
                                        <input type="range" id="shadow-offset-x" min="-20" max="20" value="2" class="w-full" onchange="updateShadow()">
                    </div>
                    <div>
                                        <label class="block text-xs text-gray-600">Offset Y</label>
                                        <input type="range" id="shadow-offset-y" min="-20" max="20" value="2" class="w-full" onchange="updateShadow()">
                    </div>
                    <div>
                                        <label class="block text-xs text-gray-600">Blur</label>
                                        <input type="range" id="shadow-blur" min="0" max="20" value="4" class="w-full" onchange="updateShadow()">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-600">Opacity</label>
                                        <input type="range" id="shadow-opacity" min="0" max="1" step="0.1" value="0.5" class="w-full" onchange="updateShadow()">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

            <!-- Export Section -->
            <div class="border-t pt-6">
                <h4 class="font-semibold mb-3">Export</h4>
                <div class="flex space-x-3">
                    <button onclick="exportBackgroundImage('png')" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        Export PNG
                    </button>
                    <button onclick="exportBackgroundImage('jpeg')" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Export JPEG
                    </button>
                    <select id="export-size" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="original">Original Size</option>
                        <option value="profile">Profile (400x400)</option>
                        <option value="cover">Cover (1200x630)</option>
                        <option value="square">Square (1080x1080)</option>
                    </select>
                </div>
            </div>

            <!-- Error/Success Messages -->
            <div id="background-error" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            <div id="background-success" class="hidden mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg"></div>
        </div>
    </div>

    <div id="calculator" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🧮 Advanced Calculator</h3>
                <button onclick="closeModal('calculator')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Advanced Calculator Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchCalcMode('basic')" id="basic-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors calc-tab active">Basic</button>
                <button onclick="switchCalcMode('advanced')" id="advanced-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors calc-tab">Advanced</button>
                <button onclick="switchCalcMode('scientific')" id="scientific-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors calc-tab">Scientific</button>
                <button onclick="switchCalcMode('complex')" id="complex-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors calc-tab">Complex</button>
                <button onclick="switchCalcMode('numerical')" id="numerical-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors calc-tab">Numerical</button>
            </div>

            <!-- Basic Calculator Mode -->
            <div id="basic-calc" class="calc-mode">
            <div class="bg-gray-100 p-4 rounded-lg mb-4">
                <input type="text" id="calc-display" class="w-full text-right text-2xl font-mono bg-transparent border-none outline-none" value="0" readonly>
            </div>
            <div class="grid grid-cols-4 gap-3">
                <button onclick="clearCalc()" class="btn-primary text-white p-4 rounded-lg font-semibold">C</button>
                <button onclick="calcInput('/')" class="bg-gray-200 hover:bg-gray-300 p-4 rounded-lg font-semibold">÷</button>
                <button onclick="calcInput('*')" class="bg-gray-200 hover:bg-gray-300 p-4 rounded-lg font-semibold">×</button>
                <button onclick="deleteLast()" class="bg-gray-200 hover:bg-gray-300 p-4 rounded-lg font-semibold">⌫</button>
                
                <button onclick="calcInput('7')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">7</button>
                <button onclick="calcInput('8')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">8</button>
                <button onclick="calcInput('9')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">9</button>
                <button onclick="calcInput('-')" class="bg-gray-200 hover:bg-gray-300 p-4 rounded-lg font-semibold">-</button>
                
                <button onclick="calcInput('4')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">4</button>
                <button onclick="calcInput('5')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">5</button>
                <button onclick="calcInput('6')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">6</button>
                <button onclick="calcInput('+')" class="bg-gray-200 hover:bg-gray-300 p-4 rounded-lg font-semibold">+</button>
                
                <button onclick="calcInput('1')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">1</button>
                <button onclick="calcInput('2')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">2</button>
                <button onclick="calcInput('3')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">3</button>
                <button onclick="calculate()" class="btn-primary text-white p-4 rounded-lg font-semibold row-span-2">=</button>
                
                <button onclick="calcInput('0')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border col-span-2">0</button>
                <button onclick="calcInput('.')" class="bg-white hover:bg-gray-50 p-4 rounded-lg font-semibold border">.</button>
            </div>
        </div>

            <!-- Advanced Expression Mode -->
            <div id="advanced-calc" class="calc-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Expression Input</label>
                    <input type="text" id="expr-input" placeholder="e.g., 2+3*4, sin(90), sqrt(16)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
    </div>

                <div class="flex space-x-2 mb-4">
                    <button onclick="addToExpr('(')" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded text-sm">(</button>
                    <button onclick="addToExpr(')')" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded text-sm">)</button>
                    <button onclick="addToExpr('^')" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded text-sm">^</button>
                    <button onclick="addToExpr('%')" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded text-sm">%</button>
                    <button onclick="addToExpr('pi')" class="bg-blue-200 hover:bg-blue-300 px-3 py-2 rounded text-sm">π</button>
                    <button onclick="addToExpr('e')" class="bg-blue-200 hover:bg-blue-300 px-3 py-2 rounded text-sm">e</button>
                </div>

                <div class="grid grid-cols-3 gap-2 mb-4">
                    <button onclick="addToExpr('sin(')" class="bg-purple-200 hover:bg-purple-300 px-3 py-2 rounded text-sm">sin</button>
                    <button onclick="addToExpr('cos(')" class="bg-purple-200 hover:bg-purple-300 px-3 py-2 rounded text-sm">cos</button>
                    <button onclick="addToExpr('tan(')" class="bg-purple-200 hover:bg-purple-300 px-3 py-2 rounded text-sm">tan</button>
                    <button onclick="addToExpr('sqrt(')" class="bg-green-200 hover:bg-green-300 px-3 py-2 rounded text-sm">√</button>
                    <button onclick="addToExpr('log(')" class="bg-green-200 hover:bg-green-300 px-3 py-2 rounded text-sm">log</button>
                    <button onclick="addToExpr('ln(')" class="bg-green-200 hover:bg-green-300 px-3 py-2 rounded text-sm">ln</button>
                </div>

                <div class="flex space-x-2 mb-4">
                    <button onclick="evaluateExpression()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">Calculate</button>
                    <button onclick="clearExpression()" class="bg-gray-500 text-white px-4 py-2 rounded-lg">Clear</button>
                </div>

                <div id="expr-result" class="hidden bg-gray-100 p-4 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1">Result:</div>
                    <div id="expr-result-value" class="text-2xl font-mono font-bold"></div>
                </div>
            </div>

            <!-- Scientific Calculator Mode -->
            <div id="scientific-calc" class="calc-mode hidden">
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-3">
                        <label class="text-sm font-medium">Angle Mode:</label>
                        <div class="flex space-x-2">
                            <button onclick="setCalcMode('radians')" id="radians-btn" class="px-3 py-1 rounded text-sm bg-purple-600 text-white">Radians</button>
                            <button onclick="setCalcMode('degrees')" id="degrees-btn" class="px-3 py-1 rounded text-sm bg-gray-200 text-gray-700">Degrees</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Input A</label>
                            <input type="number" id="calc-a" placeholder="Enter first number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Input B</label>
                            <input type="number" id="calc-b" placeholder="Enter second number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label class="block text-sm font-medium mb-2">Operation</label>
                        <select id="calc-operation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="+">Addition (+)</option>
                            <option value="-">Subtraction (-)</option>
                            <option value="*">Multiplication (×)</option>
                            <option value="/">Division (÷)</option>
                            <option value="%">Modulo (%)</option>
                            <option value="^">Power (^)</option>
                        </select>
                    </div>

                    <div class="flex space-x-2 mt-4">
                        <button onclick="calculateTwoOperand()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">Calculate</button>
                        <button onclick="clearTwoOperand()" class="bg-gray-500 text-white px-4 py-2 rounded-lg">Clear</button>
                    </div>

                    <div id="two-op-result" class="hidden mt-4 bg-gray-100 p-4 rounded-lg">
                        <div class="text-sm text-gray-600 mb-1">Result:</div>
                        <div id="two-op-result-value" class="text-2xl font-mono font-bold"></div>
                    </div>
                </div>
            </div>

            <!-- Complex Number Mode -->
            <div id="complex-calc" class="calc-mode hidden">
                <div class="mb-4">
                    <h4 class="font-medium text-gray-800 mb-3">🔢 Complex Number Operations</h4>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Real Part A</label>
                            <input type="number" id="complex-real-a" placeholder="Real part" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Imaginary Part A</label>
                            <input type="number" id="complex-imag-a" placeholder="Imaginary part" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Real Part B</label>
                            <input type="number" id="complex-real-b" placeholder="Real part" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Imaginary Part B</label>
                            <input type="number" id="complex-imag-b" placeholder="Imaginary part" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Operation</label>
                        <select id="complex-operation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="+">Addition (+)</option>
                            <option value="-">Subtraction (-)</option>
                            <option value="*">Multiplication (×)</option>
                            <option value="/">Division (÷)</option>
                            <option value="^">Power (^)</option>
                            <option value="conjugate">Conjugate</option>
                            <option value="magnitude">Magnitude</option>
                            <option value="angle">Angle</option>
                        </select>
                    </div>

                    <div class="flex space-x-2 mb-4">
                        <button onclick="calculateComplex()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">Calculate</button>
                        <button onclick="clearComplex()" class="bg-gray-500 text-white px-4 py-2 rounded-lg">Clear</button>
                    </div>

                    <div id="complex-result" class="hidden bg-gray-100 p-4 rounded-lg">
                        <div class="text-sm text-gray-600 mb-1">Result:</div>
                        <div id="complex-result-value" class="text-2xl font-mono font-bold"></div>
                    </div>
                </div>
            </div>

            <!-- Numerical Methods Mode -->
            <div id="numerical-calc" class="calc-mode hidden">
                <div class="mb-4">
                    <h4 class="font-medium text-gray-800 mb-3">🔬 Advanced Numerical Methods</h4>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Function f(x)</label>
                        <input type="text" id="numerical-function" placeholder="e.g., x^2 - 4, sin(x), exp(x)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Method</label>
                            <select id="numerical-method" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="solve">Root Finding (Solve)</option>
                                <option value="integrate">Integration</option>
                                <option value="derivative">Derivative</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Lower Bound</label>
                            <input type="number" id="numerical-lower" placeholder="a" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Upper Bound</label>
                            <input type="number" id="numerical-upper" placeholder="b" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Initial Guess (for solve)</label>
                        <input type="number" id="numerical-guess" placeholder="x₀" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>

                    <div class="flex space-x-2 mb-4">
                        <button onclick="calculateNumerical()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">Calculate</button>
                        <button onclick="clearNumerical()" class="bg-gray-500 text-white px-4 py-2 rounded-lg">Clear</button>
                    </div>

                    <div id="numerical-result" class="hidden bg-gray-100 p-4 rounded-lg">
                        <div class="text-sm text-gray-600 mb-1">Result:</div>
                        <div id="numerical-result-value" class="text-2xl font-mono font-bold"></div>
                    </div>
                </div>
            </div>

            <!-- Advanced Settings -->
            <div class="mt-6 p-4 bg-purple-50 rounded-lg">
                <h4 class="font-semibold text-purple-800 mb-3">⚙️ Advanced Settings</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Angle Mode</label>
                        <select id="calc-angle-mode" onchange="setCalcAngleMode()" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option value="radians">Radians</option>
                            <option value="degrees">Degrees</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Complex Mode</label>
                        <select id="calc-complex-mode" onchange="setCalcComplexMode()" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option value="false">Disabled</option>
                            <option value="true">Enabled</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Precision</label>
                        <select id="calc-precision" onchange="setCalcPrecision()" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option value="32">32-bit (Float)</option>
                            <option value="64" selected>64-bit (Double)</option>
                            <option value="128">128-bit (Quad)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Memory and History -->
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-semibold text-blue-800">Memory & History</h4>
                    <div class="flex space-x-2">
                        <button onclick="storeMemory()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">M+</button>
                        <button onclick="recallMemory()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">MR</button>
                        <button onclick="clearMemory()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">MC</button>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div>
                        <span class="text-blue-600 font-medium">Last Result:</span>
                        <span id="last-result" class="ml-2">0</span>
                    </div>
                    <div>
                        <span class="text-blue-600 font-medium">Memory:</span>
                        <span id="memory-value" class="ml-2">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Password Generator Modal -->
    <div id="password" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔐 Advanced Password Generator</h3>
                <button onclick="closeModal('password')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Generator Mode Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchPasswordMode('characters')" id="characters-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors password-tab active">Characters</button>
                <button onclick="switchPasswordMode('diceware')" id="diceware-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors password-tab">Diceware</button>
                <button onclick="switchPasswordMode('validation')" id="validation-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors password-tab">Validation</button>
            </div>

                        <!-- Character Mode -->
            <div id="characters-mode" class="password-mode">
                <input type="hidden" id="password-mode" value="characters">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                        <h4 class="font-medium text-gray-800 mb-3">🎯 Entropy & Length</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Target Entropy (bits)</label>
                                <select id="target-entropy" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="80">80 bits (Good)</option>
                                    <option value="96" selected>96 bits (Strong)</option>
                                    <option value="128">128 bits (Very Strong)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Character Set</label>
                                <select id="alphabet-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="full-ascii" selected>Full ASCII (A-Z, a-z, 0-9, symbols)</option>
                                    <option value="alphanumeric">Alphanumeric (A-Z, a-z, 0-9)</option>
                                    <option value="letters-only">Letters Only (A-Z, a-z)</option>
                                    <option value="custom">Custom Character Set</option>
                                </select>
                            </div>
                            <div id="custom-chars-container" class="hidden">
                                <label class="block text-sm font-medium mb-2">Custom Characters</label>
                                <input type="text" id="custom-chars" placeholder="Enter custom characters" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">⚙️ Policy Settings</h4>
                        <div class="space-y-3">
                                                        <div>
                                <label class="block text-sm font-medium mb-2">Length Constraints</label>
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="number" id="min-length" placeholder="Min" value="8" min="1" max="128" class="p-2 border border-gray-300 rounded-lg text-sm">
                                    <input type="number" id="max-length" placeholder="Max" value="128" min="1" max="256" class="p-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Password Count (for multiple generation)</label>
                                <input type="number" id="password-count" placeholder="5" value="5" min="1" max="20" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                </div>
                <div class="space-y-2">
                    <label class="flex items-center">
                                    <input type="checkbox" id="screen-breached" checked class="mr-2">
                                    <span class="text-sm">Screen against breached passwords</span>
                    </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateAdvancedPassword()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        🔒 Generate Password
                </button>
                    <button onclick="generateMultiplePasswords()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700">
                        🔄 Generate Multiple
                    </button>
                </div>
            </div>

            <!-- Diceware Mode -->
            <div id="diceware-mode" class="password-mode hidden">
                <input type="hidden" id="password-mode" value="diceware">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">🎲 Passphrase Settings</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Target Entropy (bits)</label>
                                <select id="diceware-target-entropy" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="77">77 bits (~6 words)</option>
                                    <option value="90" selected>90 bits (~7 words)</option>
                                    <option value="103">103 bits (~8 words)</option>
                                    <option value="128">128 bits (~10 words)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Word Separator</label>
                                <input type="text" id="passphrase-separator" value=" " class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                    <label class="flex items-center">
                                    <input type="checkbox" id="add-random-chars" class="mr-2">
                                    <span class="text-sm">Add random symbols/digits (legacy compliance)</span>
                    </label>
                </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">📊 Entropy Information</h4>
                        <div class="bg-gray-50 p-4 rounded-lg text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                <div><strong>Words:</strong> <span id="diceware-word-count">7</span></div>
                                <div><strong>Bits per word:</strong> <span id="diceware-bits-per-word">12.9</span></div>
                                <div><strong>Total entropy:</strong> <span id="diceware-total-entropy">90.3</span> bits</div>
                                <div><strong>Estimated time:</strong> <span id="diceware-crack-time">Centuries</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateDicewarePassphrase()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        🎲 Generate Passphrase
                </button>
                    <button onclick="generateMultiplePassphrases()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700">
                        🔄 Generate Multiple
                        </button>
                    </div>
                </div>

            <!-- Validation Mode -->
            <div id="validation-mode" class="password-mode hidden">
                <input type="hidden" id="password-mode" value="validation">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔍 Password Validation</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">Enter Password to Validate</label>
                            <input type="text" id="password-input" placeholder="Enter password to check" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <button onclick="validatePassword()" class="btn-primary text-white py-3 px-6 rounded-lg font-semibold">
                            ✅ Validate Password
                        </button>
            </div>
        </div>
    </div>

            <!-- Error Display -->
            <div id="password-error" class="hidden mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg"></div>

            <!-- Results Display -->
            <div id="password-result" class="hidden">
                <div id="password-result-content"></div>
            </div>

            <!-- Entropy Information Panel -->
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-800 mb-3">📊 Entropy Information</h4>
                <div id="entropy-info" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <!-- Entropy info will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced BMI Calculator Modal -->
    <div id="bmi" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">⚖️ Advanced BMI Calculator</h3>
                <button onclick="closeModal('bmi')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Calculator Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchBMIMode('adult')" id="adult-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors bmi-tab active">Adult (20+ years)</button>
                <button onclick="switchBMIMode('child_teen')" id="child-teen-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors bmi-tab">Child/Teen (2-19 years)</button>
            </div>

            <!-- Unit System Selection -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">Unit System</label>
                <div class="flex space-x-4">
                    <label class="flex items-center">
                        <input type="radio" name="bmi-unit-system" value="metric" checked class="mr-2" onchange="switchBMIUnits()">
                        Metric (kg, m/cm)
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="bmi-unit-system" value="us" class="mr-2" onchange="switchBMIUnits()">
                        US Customary (lb, ft/in)
                    </label>
                </div>
            </div>

            <!-- Adult Mode -->
            <div id="adult-mode" class="bmi-mode">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Height</label>
                        <div id="adult-height-input">
                            <input type="number" id="adult-height-metric" placeholder="1.75" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Weight</label>
                        <input type="number" id="adult-weight-metric" placeholder="70" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                </div>
                <button onclick="calculateAdultBMI()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate BMI
                </button>
                </div>

            <!-- Child/Teen Mode -->
            <div id="child-teen-mode" class="bmi-mode hidden">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Age (years)</label>
                        <input type="number" id="child-age" placeholder="10" min="2" max="19" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
            </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Sex</label>
                        <select id="child-sex" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
        </div>
    </div>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Height</label>
                        <div id="child-height-input">
                            <input type="number" id="child-height-metric" placeholder="1.40" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
            </div>
                    </div>
                <div>
                        <label class="block text-sm font-medium mb-2">Weight</label>
                        <input type="number" id="child-weight-metric" placeholder="35" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                </div>
                </div>
                <button onclick="calculateChildBMI()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate BMI
                </button>
                </div>

            <!-- Results Display -->
            <div id="bmi-result" class="hidden mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <div class="text-center mb-4">
                    <div class="text-4xl font-bold text-green-800 mb-2" id="bmi-value"></div>
                    <div class="text-lg font-semibold text-green-700 mb-2" id="bmi-category"></div>
                    <div class="text-sm text-green-600" id="bmi-description"></div>
            </div>
                
                <div id="bmi-additional-info" class="hidden text-left">
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="font-medium text-green-700">Population:</span>
                            <span id="bmi-population" class="ml-2"></span>
                        </div>
                        <div>
                            <span class="font-medium text-green-700">Age Group:</span>
                            <span id="bmi-age-group" class="ml-2"></span>
                        </div>
                        <div id="bmi-sex-info" class="hidden">
                            <span class="font-medium text-green-700">Sex:</span>
                            <span id="bmi-sex" class="ml-2"></span>
                        </div>
                        <div id="bmi-percentile-info" class="hidden">
                            <span class="font-medium text-green-700">Percentile:</span>
                            <span id="bmi-percentile" class="ml-2"></span>
                        </div>
        </div>
    </div>
                
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <div class="font-medium text-blue-800 mb-2">💡 Recommendation:</div>
                    <div class="text-sm text-blue-700" id="bmi-recommendation"></div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="bmi-error" class="hidden mt-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <div class="text-sm text-red-600 mb-2">Error:</div>
                <div id="bmi-error-message" class="text-red-800"></div>
            </div>

            <!-- BMI Categories Reference -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <h4 class="font-semibold text-gray-800 mb-3">📊 BMI Categories Reference</h4>
                <div id="bmi-categories-display" class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                    <!-- Categories will be populated by JavaScript -->
                </div>
            </div>

            <!-- Examples Section -->
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-700">
                    <div>
                        <strong>Adult Metric:</strong> 70 kg, 1.75 m = BMI 22.9 (Healthy)
                    </div>
                    <div>
                        <strong>Adult US:</strong> 154 lb, 5'8" = BMI 23.4 (Healthy)
                    </div>
                    <div>
                        <strong>Child:</strong> 10 y male, 35 kg, 1.40 m = BMI 17.9
                    </div>
                    <div>
                        <strong>Teen:</strong> 16 y female, 55 kg, 1.65 m = BMI 20.2
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- Advanced Word Counter Modal -->
    <div id="wordcount" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📊 Advanced Word Counter</h3>
                <button onclick="closeModal('wordcount')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Text Input -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">📝 Text Input</h4>
                <textarea id="word-text" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent" rows="8" placeholder="Type or paste your text here for comprehensive analysis..."></textarea>
            </div>

            <!-- Analysis Options -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">⚙️ Analysis Options</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="space-y-3">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="include-frequency" checked class="rounded">
                            <span class="text-sm">Frequency Analysis</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="include-readability" class="rounded">
                            <span class="text-sm">Readability Scores</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="include-reading-time" checked class="rounded">
                            <span class="text-sm">Reading Time</span>
                        </label>
                    </div>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="exclude-stop-words" class="rounded">
                            <span class="text-sm">Exclude Stop Words</span>
                        </label>
                        <div>
                            <label class="block text-sm font-medium mb-1">Min Word Length</label>
                            <input type="number" id="min-word-length" value="1" min="1" max="10" class="w-full p-2 border border-gray-300 rounded text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Top N Words</label>
                            <input type="number" id="top-n-words" value="20" min="5" max="100" class="w-full p-2 border border-gray-300 rounded text-sm">
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1">Reading Speed (WPM)</label>
                            <select id="reading-speed" class="w-full p-2 border border-gray-300 rounded text-sm">
                                <option value="150">Slow (150 WPM)</option>
                                <option value="200" selected>Average (200 WPM)</option>
                                <option value="250">Fast (250 WPM)</option>
                                <option value="300">Very Fast (300 WPM)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analyze Button -->
            <div class="mb-6">
                <button onclick="analyzeText()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    📊 Analyze Text
                </button>
            </div>

            <!-- Results -->
            <div class="space-y-6">
                <!-- Basic Statistics -->
                <div id="word-stats"></div>
                
                <!-- Frequency Analysis -->
                <div id="frequency-analysis"></div>
                
                <!-- Readability Scores -->
                <div id="readability-scores"></div>
                
                <!-- Reading Time -->
                <div id="reading-time"></div>
                
                <!-- Processing Information -->
                <div id="processing-info"></div>
            </div>
        </div>
    </div>

    <!-- Advanced Percentage Calculator Modal -->
    <div id="percentage" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📊 Advanced Percentage Calculator</h3>
                <button onclick="closeModal('percentage')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Calculator Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchPercentageMode('percent_of')" id="percent-of-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab active">Percent Of</button>
                <button onclick="switchPercentageMode('what_percent')" id="what-percent-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab">What Percent</button>
                <button onclick="switchPercentageMode('apply_change')" id="apply-change-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab">Apply Change</button>
                <button onclick="switchPercentageMode('percent_change')" id="percent-change-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab">Percent Change</button>
                <button onclick="switchPercentageMode('reverse_percent')" id="reverse-percent-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab">Reverse</button>
                <button onclick="switchPercentageMode('percent_difference')" id="percent-difference-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors percentage-tab">Difference</button>
            </div>

            <!-- Percent Of Mode -->
            <div id="percent-of-mode" class="percentage-mode">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Calculate what is X% of a number</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Percentage (%)</label>
                            <input type="number" id="percent-of-p" placeholder="e.g., 15" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Number</label>
                            <input type="number" id="percent-of-n" placeholder="e.g., 200" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium mb-2">Input Type</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="percent-of-input-type" value="percent" checked class="mr-2">
                                Percent (e.g., 15 = 15%)
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="percent-of-input-type" value="decimal" class="mr-2">
                                Decimal (e.g., 0.15 = 15%)
                            </label>
                        </div>
                    </div>
                    <button onclick="calculatePercentOf()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold mt-4">
                        Calculate
                    </button>
        </div>
    </div>

            <!-- What Percent Mode -->
            <div id="what-percent-mode" class="percentage-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Calculate what percent A is of B</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Value A</label>
                            <input type="number" id="what-percent-a" placeholder="e.g., 25" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Value B</label>
                            <input type="number" id="what-percent-b" placeholder="e.g., 200" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <button onclick="calculateWhatPercent()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold mt-4">
                        Calculate
                    </button>
                </div>
            </div>

            <!-- Apply Change Mode -->
            <div id="apply-change-mode" class="percentage-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Apply percentage increase or decrease to a number</label>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Number</label>
                            <input type="number" id="apply-change-n" placeholder="e.g., 100" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Percentage (%)</label>
                            <input type="number" id="apply-change-p" placeholder="e.g., 20" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Change Type</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="apply-change-type" value="increase" checked class="mr-2">
                                Increase
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="apply-change-type" value="decrease" class="mr-2">
                                Decrease
                            </label>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Input Type</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="apply-change-input-type" value="percent" checked class="mr-2">
                                Percent (e.g., 20 = 20%)
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="apply-change-input-type" value="decimal" class="mr-2">
                                Decimal (e.g., 0.20 = 20%)
                            </label>
                        </div>
                    </div>
                    <button onclick="calculateApplyChange()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                        Calculate
                    </button>
                </div>
            </div>

            <!-- Percent Change Mode -->
            <div id="percent-change-mode" class="percentage-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Calculate percent change from old to new value</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Old Value</label>
                            <input type="number" id="percent-change-old" placeholder="e.g., 100" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">New Value</label>
                            <input type="number" id="percent-change-new" placeholder="e.g., 120" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <button onclick="calculatePercentChange()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold mt-4">
                        Calculate
                    </button>
                </div>
            </div>

            <!-- Reverse Percent Mode -->
            <div id="reverse-percent-mode" class="percentage-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Find original value given new value and percent change</label>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">New Value</label>
                            <input type="number" id="reverse-percent-new" placeholder="e.g., 85" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Percentage (%)</label>
                            <input type="number" id="reverse-percent-p" placeholder="e.g., 15" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Change Type</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="reverse-percent-type" value="increase" class="mr-2">
                                Increase
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="reverse-percent-type" value="decrease" checked class="mr-2">
                                Decrease
                            </label>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Input Type</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="reverse-percent-input-type" value="percent" checked class="mr-2">
                                Percent (e.g., 15 = 15%)
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="reverse-percent-input-type" value="decimal" class="mr-2">
                                Decimal (e.g., 0.15 = 15%)
                            </label>
                        </div>
                    </div>
                    <button onclick="calculateReversePercent()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                        Calculate
                    </button>
                </div>
            </div>

            <!-- Percent Difference Mode -->
            <div id="percent-difference-mode" class="percentage-mode hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Calculate percent difference between two values</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Value A</label>
                            <input type="number" id="percent-difference-a" placeholder="e.g., 20" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Value B</label>
                            <input type="number" id="percent-difference-b" placeholder="e.g., 30" step="0.01" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    <button onclick="calculatePercentDifference()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold mt-4">
                        Calculate
                    </button>
                </div>
            </div>

            <!-- Global Settings -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Decimal Places</label>
                        <select id="global-decimals" class="w-full p-2 border border-gray-300 rounded-lg">
                            <option value="2">2 decimal places</option>
                            <option value="4">4 decimal places</option>
                            <option value="6">6 decimal places</option>
                            <option value="8">8 decimal places</option>
                            <option value="null">No rounding</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Rounding Mode</label>
                        <select id="global-rounding" class="w-full p-2 border border-gray-300 rounded-lg">
                            <option value="round">Round</option>
                            <option value="floor">Floor</option>
                            <option value="ceil">Ceiling</option>
                            <option value="none">No rounding</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div id="percentage-result" class="hidden mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <div class="text-sm text-green-600 mb-2">Result:</div>
                <div id="percentage-result-value" class="text-2xl font-mono font-bold text-green-800"></div>
                <div id="percentage-result-formula" class="text-sm text-green-700 mt-2"></div>
            </div>

            <!-- Error Display -->
            <div id="percentage-error" class="hidden mt-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <div class="text-sm text-red-600 mb-2">Error:</div>
                <div id="percentage-error-message" class="text-red-800"></div>
            </div>

            <!-- Examples Section -->
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-700">
                    <div>
                        <strong>Percent Of:</strong> 15% of 200 = 30
                    </div>
                    <div>
                        <strong>What Percent:</strong> 25 is 12.5% of 200
                    </div>
                    <div>
                        <strong>Increase:</strong> 100 + 20% = 120
                    </div>
                    <div>
                        <strong>Decrease:</strong> 100 - 15% = 85
                    </div>
                    <div>
                        <strong>Change:</strong> 80 to 100 = +25%
                    </div>
                    <div>
                        <strong>Reverse:</strong> 85 after 15% off = 100
                    </div>
                </div>
                

            </div>
        </div>
    </div>

    <!-- Advanced Age Calculator Modal -->
    <div id="age" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">⏰ Advanced Age Calculator</h3>
                <button onclick="closeModal('age')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Calculator Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchAgeMode('basic')" id="basic-age-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors age-tab active">Basic Age</button>
                <button onclick="switchAgeMode('advanced')" id="advanced-age-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors age-tab">Advanced</button>
                <button onclick="switchAgeMode('milestones')" id="milestones-age-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors age-tab">Milestones</button>
                <button onclick="switchAgeMode('between')" id="between-age-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors age-tab">Date Range</button>
            </div>

            <!-- Basic Age Mode -->
            <div id="basic-age-mode" class="age-mode">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Birth Date</label>
                        <input type="date" id="birth-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">ISO 8601 format (YYYY-MM-DD)</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Reference Date (Optional)</label>
                        <input type="date" id="reference-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Leave empty for today's date</p>
                    </div>
                </div>

                <!-- Advanced Options -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-medium text-gray-800 mb-3">⚙️ Advanced Options</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">February 29 Handling</label>
                            <select id="feb29-mode" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="march1">March 1st (Default)</option>
                                <option value="feb28">February 28th</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">For leap year births in non-leap years</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Output Units</label>
                            <select id="output-units" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="calendar">Calendar (Years-Months-Days)</option>
                                <option value="duration">Duration (Total Days/Weeks)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button onclick="calculateBasicAge()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate Age
                </button>
            </div>

            <!-- Advanced Age Mode -->
            <div id="advanced-age-mode" class="age-mode hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Birth Date & Time</label>
                        <input type="datetime-local" id="birth-datetime" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Include time for precise calculations</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Reference Date & Time</label>
                        <input type="datetime-local" id="reference-datetime" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Leave empty for current time</p>
                    </div>
                </div>

                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-medium text-gray-800 mb-3">🌍 Timezone Settings</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Birth Timezone</label>
                            <select id="birth-timezone" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="local">Local Timezone</option>
                                <option value="UTC">UTC</option>
                                <option value="Asia/Kolkata">Asia/Kolkata</option>
                                <option value="America/New_York">America/New_York</option>
                                <option value="Europe/London">Europe/London</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Reference Timezone</label>
                            <select id="reference-timezone" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="local">Local Timezone</option>
                                <option value="UTC">UTC</option>
                                <option value="Asia/Kolkata">Asia/Kolkata</option>
                                <option value="America/New_York">America/New_York</option>
                                <option value="Europe/London">Europe/London</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button onclick="calculateAdvancedAge()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate Advanced Age
                </button>
            </div>

            <!-- Milestones Mode -->
            <div id="milestones-age-mode" class="age-mode hidden">
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Birth Date</label>
                    <input type="date" id="milestones-birth-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                </div>

                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-medium text-gray-800 mb-3">🎯 Age Milestones</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                        <label class="flex items-center">
                            <input type="checkbox" value="18" checked class="mr-2"> 18 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="21" checked class="mr-2"> 21 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="25" checked class="mr-2"> 25 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="30" checked class="mr-2"> 30 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="40" checked class="mr-2"> 40 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="50" checked class="mr-2"> 50 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="65" checked class="mr-2"> 65 years
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" value="100" checked class="mr-2"> 100 years
                        </label>
                    </div>
                </div>

                <button onclick="calculateAgeMilestones()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate Milestones
                </button>
            </div>

            <!-- Date Range Mode -->
            <div id="between-age-mode" class="age-mode hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Start Date</label>
                        <input type="date" id="start-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">End Date</label>
                        <input type="date" id="end-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                </div>

                <button onclick="calculateDateRange()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                    Calculate Range
                </button>
            </div>

            <!-- Results Display -->
            <div id="age-result" class="hidden mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <div class="text-center mb-4">
                    <div class="text-3xl font-bold text-green-800 mb-2" id="age-value"></div>
                    <div class="text-lg font-semibold text-green-700 mb-2" id="age-breakdown"></div>
                </div>
                
                <div id="age-additional-info" class="hidden text-left">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-4">
                        <div>
                            <span class="font-medium text-green-700">Birth Date:</span>
                            <span id="age-birth-date" class="ml-2"></span>
                        </div>
                        <div>
                            <span class="font-medium text-green-700">Reference Date:</span>
                            <span id="age-reference-date" class="ml-2"></span>
                        </div>
                        <div>
                            <span class="font-medium text-green-700">Next Birthday:</span>
                            <span id="age-next-birthday" class="ml-2"></span>
                        </div>
                        <div>
                            <span class="font-medium text-green-700">Days Until:</span>
                            <span id="age-days-until" class="ml-2"></span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-blue-800" id="age-total-days"></div>
                            <div class="text-xs text-blue-600">Total Days</div>
                        </div>
                        <div class="bg-purple-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-purple-800" id="age-total-weeks"></div>
                            <div class="text-xs text-purple-600">Total Weeks</div>
                        </div>
                        <div class="bg-indigo-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-indigo-800" id="age-total-months"></div>
                            <div class="text-xs text-indigo-600">Total Months</div>
                        </div>
                        <div class="bg-teal-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-teal-800" id="age-leap-years"></div>
                            <div class="text-xs text-teal-600">Leap Years</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="age-error" class="hidden mt-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <div class="text-sm text-red-600 mb-2">Error:</div>
                <div id="age-error-message" class="text-red-800"></div>
            </div>

            <!-- Leap Year Info -->
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-800 mb-3">🔍 Leap Year Information</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700">
                    <div>
                        <strong>Gregorian Calendar Rule:</strong> A year is a leap year if it's divisible by 4, but not by 100, unless it's also divisible by 400.
                    </div>
                    <div>
                        <strong>February 29:</strong> In non-leap years, February 29 birthdays can be observed on February 28 or March 1.
                    </div>
                    <div>
                        <strong>ISO 8601 Support:</strong> Accepts dates in YYYY-MM-DD format with optional time components.
                    </div>
                    <div>
                        <strong>Borrowing Algorithm:</strong> Uses real month lengths and leap year logic for accurate age calculations.
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="mt-6 p-4 bg-orange-50 rounded-lg">
                <h4 class="font-semibold text-orange-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-orange-700">
                    <div>
                        <strong>Basic:</strong> Born 1990-06-15, today = 33 years, 6 months, 15 days
                    </div>
                    <div>
                        <strong>Leap Year:</strong> Born 2000-02-29, 2023 = 23 years, 0 months, 0 days
                    </div>
                    <div>
                        <strong>Date Range:</strong> 2020-01-01 to 2023-12-31 = 3 years, 11 months, 30 days
                    </div>
                    <div>
                        <strong>Milestones:</strong> 18th birthday on 2008-06-15, 21st on 2011-06-15
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add more placeholder modals for remaining tools -->
    <!-- Advanced Unit Converter Modal -->
    <div id="unit" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📏 Advanced Unit Converter</h3>
                <button onclick="closeModal('unit')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Unit Category Selection -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">Unit Category</label>
                <select id="unit-category" onchange="switchUnitCategory()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                    <option value="length">Length & Distance</option>
                    <option value="mass">Mass & Weight</option>
                    <option value="volume">Volume & Capacity</option>
                    <option value="area">Area</option>
                    <option value="pressure">Pressure</option>
                    <option value="temperature">Temperature</option>
                    <option value="speed">Speed & Velocity</option>
                    <option value="time">Time</option>
                    <option value="data">Data Storage</option>
                </select>
                
                <!-- Debug Test Button -->
                <button onclick="testUnitConverter()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                    🧪 Test Unit Converter
                </button>
            </div>

            <!-- Conversion Interface -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label class="block text-sm font-medium mb-2">From</label>
                    <select id="from-unit" onchange="updateConversionInfo()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                    <div class="mt-2">
                        <input type="number" id="from-value" placeholder="Enter value" step="any" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" oninput="performConversion()">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">To</label>
                    <select id="to-unit" onchange="updateConversionInfo()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                    <div class="mt-2">
                        <input type="number" id="to-value" placeholder="Result" readonly class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50">
                    </div>
                </div>
            </div>

            <!-- Conversion Info -->
            <div id="conversion-info" class="hidden mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <h4 class="font-medium text-blue-800 mb-2">🔍 Conversion Information</h4>
                <div id="conversion-formula" class="text-sm text-blue-700 mb-2"></div>
                <div id="conversion-description" class="text-sm text-blue-600"></div>
                <div id="unit-systems" class="text-xs text-blue-500 mt-2"></div>
            </div>

            <!-- Results Display -->
            <div id="conversion-result" class="hidden mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-800 mb-2" id="result-value"></div>
                    <div class="text-sm text-green-600" id="result-details"></div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="conversion-error" class="hidden mb-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <div class="text-sm text-red-600 mb-2">Error:</div>
                <div id="error-message" class="text-red-800"></div>
            </div>

            <!-- Common Conversions -->
            <div id="common-conversions" class="hidden mb-6">
                <h4 class="font-medium text-gray-800 mb-3">📊 Common Conversions</h4>
                <div id="conversions-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                    <!-- Common conversions will be populated by JavaScript -->
                </div>
            </div>

            <!-- Unit System Information -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <h4 class="font-semibold text-gray-800 mb-3">🌍 Unit Systems</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                    <div>
                        <strong>SI:</strong> International System of Units (metric)
                    </div>
                    <div>
                        <strong>US:</strong> United States Customary Units
                    </div>
                    <div>
                        <strong>Imperial:</strong> British Imperial Units
                    </div>
                    <div>
                        <strong>IEC:</strong> International Electrotechnical Commission (binary)
                    </div>
                    <div>
                        <strong>Physical:</strong> Physical constants and standards
                    </div>
                    <div>
                        <strong>International:</strong> International standards
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="mt-6 p-4 bg-teal-50 rounded-lg">
                <h4 class="font-semibold text-teal-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-teal-700">
                    <div>
                        <strong>Length:</strong> 5 miles = 8.047 km (exact: 1 mi = 1609.344 m)
                    </div>
                    <div>
                        <strong>Mass:</strong> 150 lb = 68.039 kg (exact: 1 lb = 0.45359237 kg)
                    </div>
                    <div>
                        <strong>Volume:</strong> 2 US gal = 7.571 L (exact: 1 US gal = 231 in³)
                    </div>
                    <div>
                        <strong>Temperature:</strong> 72°F = 22.22°C (affine: °C = (°F - 32) × 5/9)
                    </div>
                    <div>
                        <strong>Pressure:</strong> 2 atm = 202,650 Pa (exact: 1 atm = 101,325 Pa)
                    </div>
                    <div>
                        <strong>Data:</strong> 5000 MB = 4.657 GiB (decimal vs binary prefixes)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Currency Converter Modal -->
    <div id="currency" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">💱 Advanced Currency Converter</h3>
                <button onclick="closeModal('currency')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Conversion Interface -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label class="block text-sm font-medium mb-2">From</label>
                    <select id="from-currency" onchange="updateCurrencyConversion()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                    <div class="mt-2">
                        <input type="number" id="from-amount" placeholder="Enter amount" step="any" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" oninput="updateCurrencyConversion()">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">To</label>
                    <select id="to-currency" onchange="updateCurrencyConversion()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                    <div class="mt-2">
                        <input type="number" id="to-amount" placeholder="Result" readonly class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50">
                    </div>
                </div>
            </div>

            <!-- Advanced Options -->
            <div class="mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                <h4 class="font-medium text-yellow-800 mb-3">⚙️ Advanced Options</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Markup (Basis Points)</label>
                        <input type="number" id="markup-bps" placeholder="0" min="0" max="1000" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-transparent" oninput="updateCurrencyConversion()">
                        <p class="text-xs text-gray-600 mt-1">1 bps = 0.01% (e.g., 50 = 0.5%)</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Fee Mode</label>
                        <select id="fee-mode" onchange="updateCurrencyConversion()" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                            <option value="rate_markup">Rate Markup</option>
                            <option value="amount_fee_percent">Amount Fee (%)</option>
                            <option value="amount_fee_fixed">Fixed Fee</option>
                            <option value="amount_fee_none">No Fee</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Fee Value</label>
                        <input type="number" id="fee-value" placeholder="0" step="any" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-transparent" oninput="updateCurrencyConversion()">
                        <p class="text-xs text-gray-600 mt-1">Fee value (decimal for %, fixed amount)</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Historical Date (Optional)</label>
                        <input type="date" id="historical-date" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-transparent" onchange="updateCurrencyConversion()">
                        <p class="text-xs text-gray-600 mt-1">Leave empty for latest rates</p>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div id="currency-result" class="hidden mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-800 mb-2" id="result-amount"></div>
                    <div class="text-sm text-green-600" id="result-details"></div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="currency-error" class="hidden mb-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <div class="text-sm text-red-600 mb-2">Error:</div>
                <div id="currency-error-message" class="text-red-800"></div>
            </div>

            <!-- Rate Information -->
            <div id="rate-info" class="hidden mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <h4 class="font-medium text-blue-800 mb-2">📊 Rate Information</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700">
                    <div>
                        <strong>Raw Rate:</strong> <span id="raw-rate"></span>
                    </div>
                    <div>
                        <strong>Effective Rate:</strong> <span id="effective-rate"></span>
                    </div>
                    <div>
                        <strong>Markup:</strong> <span id="markup-info"></span>
                    </div>
                    <div>
                        <strong>Fees:</strong> <span id="fees-info"></span>
                    </div>
                </div>
            </div>

            <!-- Debug Section -->
            <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <h4 class="font-medium text-gray-800 mb-3">🔧 Debug & Test</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="testCurrencyConverter()" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Test Currency Converter
                    </button>
                    <button onclick="debugCurrencyDropdowns()" class="p-2 bg-green-500 text-white rounded hover:bg-green-600">
                        Debug Dropdowns
                    </button>
                </div>
                <div id="debug-output" class="mt-3 p-2 bg-gray-100 rounded text-xs font-mono hidden"></div>
            </div>

            <!-- Popular Currency Pairs -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">💡 Popular Conversions</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button onclick="setQuickConversion('USD', 'EUR', 100)" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-yellow-400 transition-colors text-sm">
                        <div class="font-medium">$100 → €</div>
                        <div class="text-gray-600">USD to EUR</div>
                    </button>
                    <button onclick="setQuickConversion('EUR', 'GBP', 100)" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-yellow-400 transition-colors text-sm">
                        <div class="font-medium">€100 → £</div>
                        <div class="text-gray-600">EUR to GBP</div>
                    </button>
                    <button onclick="setQuickConversion('USD', 'JPY', 100)" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-yellow-400 transition-colors text-sm">
                        <div class="font-medium">$100 → ¥</div>
                        <div class="text-gray-600">USD to JPY</div>
                    </button>
                    <button onclick="setQuickConversion('GBP', 'USD', 100)" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-yellow-400 transition-colors text-sm">
                        <div class="font-medium">£100 → $</div>
                        <div class="text-gray-600">GBP to USD</div>
                    </button>
                </div>
            </div>

            <!-- Rate Source Information -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <h4 class="font-semibold text-gray-800 mb-3">🌍 Rate Sources</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                    <div>
                        <strong>Primary Source:</strong> ECB (European Central Bank) reference rates
                    </div>
                    <div>
                        <strong>Base Currency:</strong> EUR (Euro)
                    </div>
                    <div>
                        <strong>Update Schedule:</strong> Daily around 16:00 CET
                    </div>
                    <div>
                        <strong>Fallback:</strong> Development rates for offline testing
                    </div>
                </div>
                <div class="mt-3 text-xs text-gray-600">
                    <strong>Note:</strong> ECB rates are for information only and not intended for transactional pricing.
                </div>
            </div>

            <!-- ISO 4217 Information -->
            <div class="mt-6 p-4 bg-yellow-50 rounded-lg">
                <h4 class="font-semibold text-yellow-800 mb-3">📋 ISO 4217 Standards</h4>
                <div class="text-sm text-yellow-700">
                    <p class="mb-2">This converter follows international currency standards:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Minor Units:</strong> Proper decimal places (USD: 2, JPY: 0, BHD: 3)</li>
                        <li><strong>Banker's Rounding:</strong> Minimizes rounding bias</li>
                        <li><strong>Currency Validation:</strong> Only supported ISO 4217 codes</li>
                        <li><strong>Cross-Rate Accuracy:</strong> Via EUR base triangulation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Color Converter Modal -->
    <div id="color" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🎨 Advanced Color Converter</h3>
                <button onclick="closeModal('color')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Color Input Section -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">🎯 Input Color</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">From Color Space</label>
                        <select id="from-color-space" onchange="updateColorInputs()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent">
                            <option value="hex">HEX (#RRGGBB)</option>
                            <option value="srgb8">sRGB 8-bit (0-255)</option>
                            <option value="srgb">sRGB (0-1)</option>
                            <option value="srgb-linear">sRGB Linear (0-1)</option>
                            <option value="hsl">HSL (H°, S%, L%)</option>
                            <option value="hsv">HSV (H°, S%, V%)</option>
                            <option value="cmyk">CMYK (0-1)</option>
                            <option value="xyz">XYZ (D65)</option>
                            <option value="lab">CIELAB (D65)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">To Color Space</label>
                        <select id="to-color-space" onchange="updateColorConversion()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent">
                            <option value="hex">HEX (#RRGGBB)</option>
                            <option value="srgb8">sRGB 8-bit (0-255)</option>
                            <option value="srgb">sRGB (0-1)</option>
                            <option value="srgb-linear">sRGB Linear (0-1)</option>
                            <option value="hsl">HSL (H°, S%, L%)</option>
                            <option value="hsv">HSV (H°, S%, V%)</option>
                            <option value="cmyk">CMYK (0-1)</option>
                            <option value="xyz">XYZ (D65)</option>
                            <option value="lab">CIELAB (D65)</option>
                        </select>
                    </div>
                </div>

                <!-- Dynamic Input Fields -->
                <div id="color-inputs" class="mb-4">
                    <!-- Input fields will be populated by JavaScript -->
                </div>

                <!-- Alpha Channel -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Alpha Channel</label>
                    <div class="flex items-center space-x-4">
                        <input type="range" id="alpha-slider" min="0" max="1" step="0.01" value="1" class="flex-1" oninput="updateAlphaValue()">
                        <input type="number" id="alpha-value" min="0" max="1" step="0.01" value="1" class="w-20 p-2 border border-gray-300 rounded" oninput="updateAlphaSlider()">
                    </div>
                </div>

                <!-- Convert Button -->
                <button onclick="convertColor()" class="w-full bg-pink-500 text-white py-3 px-6 rounded-lg hover:bg-pink-600 transition-colors font-medium">
                    🔄 Convert Color
                </button>
            </div>

            <!-- Color Preview -->
            <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                <h4 class="font-medium text-gray-800 mb-3">👁️ Color Preview</h4>
                <div class="flex items-center space-x-4">
                    <div id="color-preview" class="w-16 h-16 rounded-lg border-2 border-gray-300 bg-gray-200"></div>
                    <div class="flex-1">
                        <div id="preview-hex" class="font-mono text-sm text-gray-600">#FFFFFF</div>
                        <div id="preview-rgb" class="font-mono text-sm text-gray-600">RGB(255, 255, 255)</div>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div id="color-result" class="hidden mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <h4 class="font-medium text-green-800 mb-3">✅ Conversion Result</h4>
                <div id="result-content" class="font-mono text-sm text-green-700">
                    <!-- Results will be populated by JavaScript -->
                </div>
            </div>

            <!-- Error Display -->
            <div id="color-error" class="hidden mb-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <h4 class="font-medium text-red-800 mb-3">❌ Conversion Error</h4>
                <div id="error-message" class="text-red-700"></div>
            </div>

            <!-- Color Information -->
            <div id="color-info" class="hidden mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <h4 class="font-medium text-blue-800 mb-3">📊 Color Information</h4>
                <div id="info-content" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700">
                    <!-- Color info will be populated by JavaScript -->
                </div>
            </div>

            <!-- Color Harmony Tools -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">🎨 Color Harmony</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <button onclick="generateComplementary()" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-pink-400 transition-colors text-sm">
                        <div class="font-medium">Complementary</div>
                        <div class="text-gray-600">Opposite colors</div>
                    </button>
                    <button onclick="generateAnalogous()" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-pink-400 transition-colors text-sm">
                        <div class="font-medium">Analogous</div>
                        <div class="text-gray-600">Similar hues</div>
                    </button>
                    <button onclick="generateTriadic()" class="p-3 bg-white rounded-lg border border-gray-200 hover:border-pink-400 transition-colors text-sm">
                        <div class="font-medium">Triadic</div>
                        <div class="text-gray-600">Three colors</div>
                    </button>
                </div>
            </div>

            <!-- Quick Color Examples -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button onclick="setQuickColor('#FF0000', 'hex')" class="p-3 bg-red-500 rounded-lg text-white text-sm font-medium hover:bg-red-600 transition-colors">
                        Red
                    </button>
                    <button onclick="setQuickColor('#00FF00', 'hex')" class="p-3 bg-green-500 rounded-lg text-white text-sm font-medium hover:bg-green-600 transition-colors">
                        Green
                    </button>
                    <button onclick="setQuickColor('#0000FF', 'hex')" class="p-3 bg-blue-500 rounded-lg text-white text-sm font-medium hover:bg-blue-600 transition-colors">
                        Blue
                    </button>
                    <button onclick="setQuickColor('#FFFF00', 'hex')" class="p-3 bg-yellow-500 rounded-lg text-white text-sm font-medium hover:bg-yellow-600 transition-colors">
                        Yellow
                    </button>
                </div>
            </div>

            <!-- Technical Information -->
            <div class="mt-6 p-4 bg-pink-50 rounded-lg">
                <h4 class="font-semibold text-pink-800 mb-3">🔬 Technical Details</h4>
                <div class="text-sm text-pink-700">
                    <p class="mb-2">This converter implements professional-grade color space conversions:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>sRGB Transfer Functions:</strong> Proper gamma correction (2.4 power law)</li>
                        <li><strong>XYZ (D65):</strong> CIE 1931 color space with D65 white point</li>
                        <li><strong>CIELAB (D65):</strong> Perceptually uniform color space</li>
                        <li><strong>Matrix Transformations:</strong> Exact sRGB↔XYZ conversion matrices</li>
                        <li><strong>Alpha Channel:</strong> Preserved across all conversions</li>
                        <li><strong>Gamut Clamping:</strong> Automatic value clamping to valid ranges</li>
                    </ul>
                </div>
            </div>

            <!-- Color Space Reference -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <h4 class="font-semibold text-gray-800 mb-3">📋 Color Space Reference</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                    <div>
                        <strong>HEX:</strong> #RRGGBB or #RRGGBBAA format
                    </div>
                    <div>
                        <strong>sRGB 8-bit:</strong> Integer values 0-255
                    </div>
                    <div>
                        <strong>sRGB:</strong> Normalized values 0.0-1.0
                    </div>
                    <div>
                        <strong>HSL:</strong> Hue (0-360°), Saturation (0-1), Lightness (0-1)
                    </div>
                    <div>
                        <strong>HSV:</strong> Hue (0-360°), Saturation (0-1), Value (0-1)
                    </div>
                    <div>
                        <strong>CMYK:</strong> Cyan, Magenta, Yellow, Key (0-1)
                    </div>
                    <div>
                        <strong>XYZ:</strong> CIE 1931 coordinates (D65 white point)
                    </div>
                    <div>
                        <strong>CIELAB:</strong> L* (0-100), a* (-128 to 127), b* (-128 to 127)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced QR Code Generator Modal -->
    <div id="qr" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📱 Advanced QR Code Generator</h3>
                <button onclick="closeModal('qr')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Generator Mode Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchQRMode('basic')" id="qr-basic-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors qr-tab active">Basic</button>
                <button onclick="switchQRMode('advanced')" id="qr-advanced-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors qr-tab">Advanced</button>
                <button onclick="switchQRMode('analysis')" id="qr-analysis-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors qr-tab">Analysis</button>
            </div>

            <!-- Basic Mode -->
            <div id="qr-basic-mode" class="qr-mode">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Input Data</h4>
                    <textarea id="qr-input" placeholder="Enter text, URL, or data to encode..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">⚙️ Basic Settings</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Error Correction Level</label>
                                <select id="qr-ecc-level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="L">L - Low (7%)</option>
                                    <option value="M" selected>M - Medium (15%)</option>
                                    <option value="Q">Q - Quartile (25%)</option>
                                    <option value="H">H - High (30%)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Module Size (pixels)</label>
                                <input type="number" id="qr-module-size" value="4" min="1" max="20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">🎨 Appearance</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Foreground Color</label>
                                <input type="color" id="qr-foreground" value="#000000" class="w-full p-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Background Color</label>
                                <input type="color" id="qr-background" value="#FFFFFF" class="w-full p-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateBasicQR()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        📱 Generate QR Code
                    </button>
                    <button onclick="testQRModule()" class="bg-red-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600">
                        🧪 Test Module
                    </button>
                </div>
            </div>

            <!-- Advanced Mode -->
            <div id="qr-advanced-mode" class="qr-mode hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Input Data</h4>
                    <textarea id="qr-advanced-input" placeholder="Enter text, URL, or data to encode..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">⚙️ Advanced Settings</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Version (1-40)</label>
                                <select id="qr-version" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="auto" selected>Auto (Recommended)</option>
                                    <option value="1">Version 1 (21×21)</option>
                                    <option value="2">Version 2 (25×25)</option>
                                    <option value="3">Version 3 (29×29)</option>
                                    <option value="4">Version 4 (33×33)</option>
                                    <option value="5">Version 5 (37×37)</option>
                                    <option value="10">Version 10 (57×57)</option>
                                    <option value="20">Version 20 (97×97)</option>
                                    <option value="30">Version 30 (137×137)</option>
                                    <option value="40">Version 40 (177×177)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Error Correction Level</label>
                                <select id="qr-advanced-ecc" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="L">L - Low (7%)</option>
                                    <option value="M" selected>M - Medium (15%)</option>
                                    <option value="Q">Q - Quartile (25%)</option>
                                    <option value="H">H - High (30%)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Mask Pattern</label>
                                <select id="qr-mask-pattern" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="auto" selected>Auto (Best Quality)</option>
                                    <option value="0">Pattern 0</option>
                                    <option value="1">Pattern 1</option>
                                    <option value="2">Pattern 2</option>
                                    <option value="3">Pattern 3</option>
                                    <option value="4">Pattern 4</option>
                                    <option value="5">Pattern 5</option>
                                    <option value="6">Pattern 6</option>
                                    <option value="7">Pattern 7</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">🎨 Rendering Options</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Module Size (pixels)</label>
                                <input type="number" id="qr-advanced-module-size" value="4" min="1" max="20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Quiet Zone</label>
                                <input type="number" id="qr-quiet-zone" value="4" min="2" max="10" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Foreground Color</label>
                                <input type="color" id="qr-advanced-foreground" value="#000000" class="w-full p-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Background Color</label>
                                <input type="color" id="qr-advanced-background" value="#FFFFFF" class="w-full p-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateAdvancedQR()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        📱 Generate Advanced QR Code
                    </button>
                    <button onclick="previewQR()" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600">
                        👁️ Preview
                    </button>
                </div>
            </div>

            <!-- Analysis Mode -->
            <div id="qr-analysis-mode" class="qr-mode hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📊 QR Code Analysis</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-medium text-gray-700 mb-2">Input Analysis</h5>
                            <div id="qr-analysis-input" class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                <p class="text-sm text-gray-600">Enter data in Basic or Advanced mode to see analysis</p>
                            </div>
                        </div>
                        <div>
                            <h5 class="font-medium text-gray-700 mb-2">QR Code Information</h5>
                            <div id="qr-analysis-info" class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                <p class="text-sm text-gray-600">Generate a QR code to see detailed information</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="analyzeQR()" class="bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-600">
                        🔍 Analyze Current QR Code
                    </button>
                    <button onclick="updateQRInfo()" class="bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600">
                        📋 Update Info
                    </button>
                </div>
            </div>

            <!-- Results Display -->
            <div id="qr-result" class="hidden mb-6">
                <h4 class="font-medium text-gray-800 mb-3">📱 Generated QR Code</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="flex justify-center">
                        <div id="qr-display" class="border border-gray-300 rounded-lg p-4 bg-white"></div>
                    </div>
                    <div>
                        <h5 class="font-medium text-gray-700 mb-2">QR Code Details</h5>
                        <div id="qr-details" class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm">
                            <p class="text-gray-600">QR code details will appear here</p>
                        </div>
                    </div>
                </div>

                <div class="flex flex-wrap gap-3 mt-4">
                    <button onclick="downloadQR()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                        💾 Download SVG
                    </button>
                    <button onclick="copyQR()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        📋 Copy SVG
                    </button>
                    <button onclick="printQR()" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                        🖨️ Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced UUID Generator Modal -->
    <div id="uuid" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🆔 Advanced UUID Generator</h3>
                <button onclick="closeModal('uuid')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Generator Mode Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchUUIDMode('generate')" id="uuid-generate-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors uuid-tab active">Generate</button>
                <button onclick="switchUUIDMode('validate')" id="uuid-validate-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors uuid-tab">Validate</button>
            </div>

            <!-- Generate Mode -->
            <div id="uuid-generate-mode" class="uuid-mode">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🆔 UUID Version Selection</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <button onclick="generateUUID(1)" class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="font-semibold text-gray-800">Version 1</div>
                            <div class="text-sm text-gray-600">Time-based with MAC address</div>
                        </button>
                        <button onclick="generateUUID(4)" class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="font-semibold text-gray-800">Version 4</div>
                            <div class="text-sm text-gray-600">Random (most common)</div>
                        </button>
                        <button onclick="generateUUID(7)" class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="font-semibold text-gray-800">Version 7</div>
                            <div class="text-sm text-gray-600">Time-ordered (sortable)</div>
                        </button>
                        <button onclick="generateUUID(3)" class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="font-semibold text-gray-800">Version 3</div>
                            <div class="text-sm text-gray-600">Name-based (MD5)</div>
                        </button>
                    </div>
                    <button onclick="generateUUID(5)" class="w-full p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                        <div class="font-semibold text-gray-800">Version 5</div>
                        <div class="text-sm text-gray-600">Name-based (SHA-1)</div>
                    </button>
                </div>

                <!-- Name-based UUID inputs (for v3 and v5) -->
                <div id="uuid-name-inputs" class="mb-6 hidden">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Name-based UUID Parameters</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Name</label>
                            <input type="text" id="uuid-name" placeholder="Enter name (e.g., 'example.com')" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Namespace UUID</label>
                            <input type="text" id="uuid-namespace" placeholder="Enter namespace UUID (e.g., '6ba7b810-9dad-11d1-80b4-00c04fd430c8')" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <div class="text-xs text-gray-500 mt-1">
                                Common namespaces: DNS (6ba7b810-9dad-11d1-80b4-00c04fd430c8), URL (6ba7b811-9dad-11d1-80b4-00c04fd430c8)
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generation Options -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">⚙️ Generation Options</h4>
                    <div class="flex items-center space-x-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Count</label>
                            <input type="number" id="uuid-count" value="1" min="1" max="100" class="w-20 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Results -->
                <div id="uuid-result" class="mb-6"></div>
                <div id="uuid-info"></div>
            </div>

            <!-- Validate Mode -->
            <div id="uuid-validate-mode" class="uuid-mode hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔍 UUID Validation</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">UUID to Validate</label>
                            <input type="text" id="uuid-validate-input" placeholder="Enter UUID to validate (e.g., 550e8400-e29b-41d4-a716-446655440000)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono">
                        </div>
                        <button onclick="validateUUID()" class="btn-primary text-white py-3 rounded-lg font-semibold">
                            🔍 Validate UUID
                        </button>
                    </div>
                </div>

                <!-- Validation Results -->
                <div id="uuid-validate-result"></div>
            </div>
        </div>
    </div>

    <!-- Advanced Base64 Encoder Modal -->
    <div id="base64" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔐 Advanced Base64 Encoder</h3>
                <button onclick="closeModal('base64')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Input Section -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">📥 Input Data</h4>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Input Type</label>
                    <select id="base64-input-type" onchange="updateBase64Inputs()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <option value="text">Text (UTF-8)</option>
                        <option value="hex">Hexadecimal</option>
                        <option value="file">File Upload</option>
                    </select>
                </div>

                <div id="base64-text-input" class="mb-4">
                    <label class="block text-sm font-medium mb-2">Text Input</label>
                    <textarea id="base64-text" placeholder="Enter text to encode/decode..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono"></textarea>
                </div>

                <div id="base64-hex-input" class="mb-4 hidden">
                    <label class="block text-sm font-medium mb-2">Hexadecimal Input</label>
                    <input type="text" id="base64-hex" placeholder="Enter hex string (e.g., 48656C6C6F)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono">
                </div>

                <div id="base64-file-input" class="mb-4 hidden">
                    <label class="block text-sm font-medium mb-2">File Upload</label>
                    <input type="file" id="base64-file" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    <div id="file-info" class="mt-2 text-sm text-gray-600 hidden"></div>
                </div>
            </div>

            <!-- Encoding Options -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">⚙️ Encoding Options</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="base64-url-safe" class="mr-2">
                            <span class="text-sm">URL-safe alphabet (-_ instead of +/)</span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="base64-mime-wrap" class="mr-2">
                            <span class="text-sm">MIME line wrapping (76 chars)</span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="base64-omit-padding" class="mr-2">
                            <span class="text-sm">Omit padding characters (=)</span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="base64-strict-mode" class="mr-2" checked>
                            <span class="text-sm">Strict decoding mode</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-3 mb-6">
                <button onclick="encodeBase64()" class="flex-1 bg-indigo-500 text-white py-3 px-6 rounded-lg hover:bg-indigo-600 transition-colors font-medium">
                    🔒 Encode to Base64
                </button>
                <button onclick="decodeBase64()" class="flex-1 bg-green-500 text-white py-3 px-6 rounded-lg hover:bg-green-600 transition-colors font-medium">
                    🔓 Decode from Base64
                </button>
                <button onclick="validateBase64()" class="bg-yellow-500 text-white py-3 px-6 rounded-lg hover:bg-yellow-600 transition-colors font-medium">
                    ✅ Validate
                </button>
            </div>

            <!-- Results Display -->
            <div id="base64-result" class="hidden mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                <h4 class="font-medium text-green-800 mb-3">✅ Result</h4>
                <div id="base64-result-content" class="font-mono text-sm text-green-700 break-all">
                    <!-- Results will be populated by JavaScript -->
                </div>
            </div>

            <!-- Error Display -->
            <div id="base64-error" class="hidden mb-6 p-4 bg-red-50 rounded-lg border border-red-200">
                <h4 class="font-medium text-red-800 mb-3">❌ Error</h4>
                <div id="base64-error-message" class="text-red-700"></div>
            </div>

            <!-- Statistics Display -->
            <div id="base64-stats" class="hidden mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <h4 class="font-medium text-blue-800 mb-3">📊 Encoding Statistics</h4>
                <div id="base64-stats-content" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700">
                    <!-- Statistics will be populated by JavaScript -->
                </div>
            </div>

            <!-- All Variants Display -->
            <div id="base64-variants" class="hidden mb-6 p-4 bg-purple-50 rounded-lg border border-purple-200">
                <h4 class="font-medium text-purple-800 mb-3">🎨 All Encoding Variants</h4>
                <div id="base64-variants-content" class="space-y-3">
                    <!-- Variants will be populated by JavaScript -->
                </div>
            </div>

            <!-- Quick Examples -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">💡 Quick Examples</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <button onclick="setBase64Example('Hello World!')" class="text-left p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        <div class="font-medium">Hello World!</div>
                        <div class="text-sm text-gray-600">Basic text encoding</div>
                    </button>
                    <button onclick="setBase64Example('U3Vu')" class="text-left p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        <div class="font-medium">U3Vu</div>
                        <div class="text-sm text-gray-600">Base64 to decode</div>
                    </button>
                    <button onclick="setBase64Example('light w')" class="text-left p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        <div class="font-medium">light w</div>
                        <div class="text-sm text-gray-600">Padding example</div>
                    </button>
                    <button onclick="setBase64Example('SGVsbG8gV29ybGQh')" class="text-left p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        <div class="font-medium">SGVsbG8gV29ybGQh</div>
                        <div class="text-sm text-gray-600">Standard encoding</div>
                    </button>
                </div>
            </div>

            <!-- RFC 4648 Information -->
            <div class="p-4 bg-gray-50 rounded-lg">
                <h4 class="font-medium text-gray-800 mb-2">📚 RFC 4648 Standards</h4>
                <div class="text-sm text-gray-600 space-y-1">
                    <div>• Standard alphabet: A-Z, a-z, 0-9, +, /</div>
                    <div>• URL-safe variant: A-Z, a-z, 0-9, -, _</div>
                    <div>• Padding: = characters for length alignment</div>
                    <div>• MIME wrapping: 76 characters per line with CRLF</div>
                    <div>• Time complexity: O(n), Space overhead: ~33%</div>
                </div>
            </div>
        </div>
    </div>

    <div id="uuid" class="modal"><div class="modal-content"><div class="flex justify-between items-center mb-6"><h3 class="text-2xl font-bold text-gradient">UUID Generator</h3><button onclick="closeModal('uuid')" class="text-gray-500 hover:text-gray-700"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="text-center py-8"><div class="text-6xl mb-4">🆔</div><h4 class="text-xl font-semibold mb-2">UUID Generator</h4><p class="text-gray-600">Generate unique identifiers for your projects.</p></div></div></div>

    <!-- Advanced Hash Generator Modal -->
    <div id="hash" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔐 Advanced Hash Generator</h3>
                <button onclick="closeModal('hash')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Generator Mode Tabs -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchHashMode('generate')" id="hash-generate-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors hash-tab active">Generate</button>
                <button onclick="switchHashMode('multiple')" id="hash-multiple-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors hash-tab">Multiple</button>
                <button onclick="switchHashMode('validate')" id="hash-validate-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors hash-tab">Validate</button>
            </div>

            <!-- Generate Mode -->
            <div id="hash-generate-mode" class="hash-mode">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Input Data</h4>
                    <textarea id="hash-input" placeholder="Enter text or data to hash..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">🔐 Algorithm Selection</h4>
                        <select id="hash-algorithm" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                            <optgroup label="Cryptographic">
                                <option value="sha256">SHA-256 (Recommended)</option>
                                <option value="blake2b">BLAKE2b (High-speed)</option>
                                <option value="md5">MD5 (Deprecated)</option>
                                <option value="sha1">SHA-1 (Deprecated)</option>
                            </optgroup>
                            <optgroup label="Password Hashing">
                                <option value="argon2id">Argon2id (Recommended)</option>
                                <option value="bcrypt">bcrypt (Widely supported)</option>
                                <option value="pbkdf2">PBKDF2 (NIST approved)</option>
                            </optgroup>
                            <optgroup label="Non-cryptographic">
                                <option value="xxhash64">xxHash64 (High-speed)</option>
                                <option value="crc32">CRC32 (Error detection)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">⚙️ Algorithm Options</h4>
                        <div id="hash-options" class="space-y-3">
                            <!-- Options will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateHash()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        🔐 Generate Hash
                    </button>
                </div>

                <!-- Results -->
                <div id="hash-result" class="mb-6"></div>
                <div id="hash-info"></div>
            </div>

            <!-- Multiple Mode -->
            <div id="hash-multiple-mode" class="hash-mode hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Input Data</h4>
                    <textarea id="hash-multiple-input" placeholder="Enter text or data to hash..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"></textarea>
                </div>

                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔐 Select Algorithms</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="sha256" checked class="rounded">
                            <span class="text-sm">SHA-256</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="blake2b" class="rounded">
                            <span class="text-sm">BLAKE2b</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="xxhash64" class="rounded">
                            <span class="text-sm">xxHash64</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="crc32" class="rounded">
                            <span class="text-sm">CRC32</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="md5" class="rounded">
                            <span class="text-sm">MD5</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" name="hash-algorithms" value="sha1" class="rounded">
                            <span class="text-sm">SHA-1</span>
                        </label>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="generateMultipleHashes()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        🔐 Generate Multiple Hashes
                    </button>
                </div>

                <!-- Results -->
                <div id="hash-multiple-result"></div>
            </div>

            <!-- Validate Mode -->
            <div id="hash-validate-mode" class="hash-mode hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔍 Hash Validation</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Hash to Validate</label>
                            <input type="text" id="hash-validate-input" placeholder="Enter hash to validate..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Algorithm</label>
                            <select id="hash-validate-algorithm" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                                <option value="sha256">SHA-256</option>
                                <option value="md5">MD5</option>
                                <option value="sha1">SHA-1</option>
                                <option value="crc32">CRC32</option>
                                <option value="xxhash64">xxHash64</option>
                            </select>
                        </div>
                        <button onclick="validateHash()" class="btn-primary text-white py-3 rounded-lg font-semibold">
                            🔍 Validate Hash
                        </button>
                    </div>
                </div>

                <!-- Validation Results -->
                <div id="hash-validate-result"></div>
            </div>
        </div>
    </div>

    <!-- Advanced Case Converter Modal -->
    <div id="case" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔄 Advanced Case Converter</h3>
                <button onclick="closeModal('case')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Text Input -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">📝 Text Input</h4>
                <textarea id="case-text" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent" rows="4" placeholder="Enter text to convert between different cases..."></textarea>
            </div>

            <!-- Case Type Selection -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">🔄 Case Type</h4>
                <select id="case-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent">
                    <option value="uppercase">Uppercase</option>
                    <option value="lowercase">Lowercase</option>
                    <option value="title_case">Title Case</option>
                    <option value="camel_case">Camel Case</option>
                    <option value="snake_case">Snake Case</option>
                    <option value="kebab_case">Kebab Case</option>
                </select>
            </div>

            <!-- Options -->
            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-3">⚙️ Options</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="normalize-unicode" checked class="rounded">
                        <span class="text-sm">Normalize Unicode</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="preserve-spaces" checked class="rounded">
                        <span class="text-sm">Preserve Leading/Trailing Spaces</span>
                    </label>
                </div>
                <div class="mt-3">
                    <label class="block text-sm font-medium mb-1">Locale (for special cases)</label>
                    <select id="locale" class="w-full p-2 border border-gray-300 rounded text-sm">
                        <option value="">Default</option>
                        <option value="tr">Turkish</option>
                        <option value="az">Azerbaijani</option>
                    </select>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="mb-6 flex space-x-3">
                <button onclick="convertText()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                    🔄 Convert Text
                </button>
                <button onclick="convertAllCases()" class="btn-secondary flex-1 py-3 rounded-lg font-semibold">
                    🔄 Convert All Cases
                </button>
            </div>

            <!-- Results -->
            <div class="space-y-6">
                <!-- Case Detection -->
                <div id="case-detection"></div>
                
                <!-- Conversion Result -->
                <div id="case-result"></div>
                
                <!-- All Conversions -->
                <div id="all-conversions"></div>
            </div>
        </div>
    </div>

    <!-- Advanced URL Encoder/Decoder Modal -->
    <div id="url" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔗 Advanced URL Encoder/Decoder</h3>
                <button onclick="closeModal('url')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchURLTab('basic')" id="url-basic-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-blue-600 shadow-sm">
                    🔗 Basic Encode/Decode
                </button>
                <button onclick="switchURLTab('form')" id="url-form-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    📝 Form Data
                </button>
                <button onclick="switchURLTab('base64url')" id="url-base64url-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    🔐 Base64URL
                </button>
                <button onclick="switchURLTab('full')" id="url-full-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    🌐 Full URL
                </button>
            </div>

            <!-- Basic Encode/Decode Tab -->
            <div id="url-basic-content" class="url-tab-content">
                <!-- Text Input -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Text Input</h4>
                    <textarea id="url-text" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="4" placeholder="Enter text to encode or decode..."></textarea>
                </div>

                <!-- Mode Selection -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔄 Encoding/Decoding Mode</h4>
                    <select id="url-mode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="uri_component">URI Component</option>
                        <option value="uri_full">URI Full</option>
                        <option value="form_urlencoded">Form URL Encoded</option>
                        <option value="rfc3986_strict">RFC 3986 Strict</option>
                    </select>
                </div>

                <!-- Options -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">⚙️ Options</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="strict-surrogates" class="rounded">
                            <span class="text-sm">Strict Surrogates</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="strict-unicode" class="rounded">
                            <span class="text-sm">Strict Unicode</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="strict-percent" class="rounded">
                            <span class="text-sm">Strict Percent</span>
                        </label>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="encodeURL()" class="btn-primary flex-1 text-white py-3 rounded-lg font-semibold">
                        🔗 Encode
                    </button>
                    <button onclick="decodeURL()" class="btn-secondary flex-1 py-3 rounded-lg font-semibold">
                        🔓 Decode
                    </button>
                </div>

                <!-- Results -->
                <div id="url-result"></div>
            </div>

            <!-- Form Data Tab -->
            <div id="url-form-content" class="url-tab-content hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">📝 Form Data Input</h4>
                    <textarea id="form-data-input" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="6" placeholder='Enter form data as JSON: {"name": "John", "email": "john@example.com"} or as key=value pairs: name=John&#10;email=john@example.com'></textarea>
                </div>

                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔄 Operation</h4>
                    <select id="form-operation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="encode">Encode Form Data</option>
                        <option value="decode">Decode Form Data</option>
                    </select>
                </div>

                <div class="mb-6">
                    <button onclick="processFormData()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                        📝 Process Form Data
                    </button>
                </div>

                <div id="form-data-result"></div>
            </div>

            <!-- Base64URL Tab -->
            <div id="url-base64url-content" class="url-tab-content hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔐 Base64URL Input</h4>
                    <textarea id="base64url-input" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="4" placeholder="Enter text for Base64URL encoding/decoding..."></textarea>
                </div>

                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔄 Operation</h4>
                    <select id="base64url-operation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="encode">Encode to Base64URL</option>
                        <option value="decode">Decode from Base64URL</option>
                    </select>
                </div>

                <div class="mb-6">
                    <button onclick="processBase64URL()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                        🔐 Process Base64URL
                    </button>
                </div>

                <div id="base64url-result"></div>
            </div>

            <!-- Full URL Tab -->
            <div id="url-full-content" class="url-tab-content hidden">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🌐 Full URL Input</h4>
                    <textarea id="full-url-input" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="4" placeholder="Enter complete URL: https://example.com/path?query=value#fragment"></textarea>
                </div>

                <div class="mb-6">
                    <h4 class="font-medium text-gray-800 mb-3">🔄 Operation</h4>
                    <select id="full-url-operation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="encode">Encode URL Components</option>
                        <option value="decode">Decode URL Components</option>
                    </select>
                </div>

                <div class="mb-6">
                    <button onclick="processFullURL()" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                        🌐 Process Full URL
                    </button>
                </div>

                <div id="full-url-result"></div>
                <div id="url-info"></div>
            </div>
        </div>
    </div>

    <div id="json" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📄 Advanced JSON Formatter</h3>
                <button onclick="closeModal('json')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchJSONTab('format')" id="json-format-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-blue-600 shadow-sm">
                    🎨 Format/Beautify
                </button>
                <button onclick="switchJSONTab('minify')" id="json-minify-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    📦 Minify
                </button>
                <button onclick="switchJSONTab('validate')" id="json-validate-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    ✅ Validate
                </button>
                <button onclick="switchJSONTab('highlight')" id="json-highlight-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    🌈 Highlight
                </button>
            </div>

            <!-- Format/Beautify Tab -->
            <div id="json-format-content" class="json-tab-content">
                <!-- Input Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">JSON Input</label>
                    <textarea id="json-input" rows="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your JSON data here...">{
  "name": "John Doe",
  "age": 30,
  "city": "New York",
  "active": true
}</textarea>
                </div>

                <!-- Format Options -->
                <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Indent Size</label>
                        <select id="json-indent-size" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="2">2 spaces</option>
                            <option value="4" selected>4 spaces</option>
                            <option value="8">8 spaces</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Max Line Length</label>
                        <input type="number" id="json-max-line-length" value="80" min="10" max="200" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="json-sort-keys" class="mr-2">
                        <label for="json-sort-keys" class="text-sm font-medium text-gray-700">Sort Keys</label>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="formatJSON()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        🎨 Format JSON
                    </button>
                    <button onclick="copyJSONResult()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        📋 Copy Result
                    </button>
                    <button onclick="clearJSONInput()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">
                        🗑️ Clear
                    </button>
                </div>

                <!-- Output Section -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Formatted Output</label>
                    <textarea id="json-output" rows="8" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly placeholder="Formatted JSON will appear here..."></textarea>
                </div>
            </div>

            <!-- Minify Tab -->
            <div id="json-minify-content" class="json-tab-content hidden">
                <!-- Input Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">JSON Input</label>
                    <textarea id="json-minify-input" rows="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your JSON data here...">{
  "name": "John Doe",
  "age": 30,
  "city": "New York",
  "active": true
}</textarea>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="minifyJSON()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        📦 Minify JSON
                    </button>
                    <button onclick="copyJSONMinifyResult()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        📋 Copy Result
                    </button>
                </div>

                <!-- Output Section -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Minified Output</label>
                    <textarea id="json-minify-output" rows="4" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly placeholder="Minified JSON will appear here..."></textarea>
                    <div id="json-compression-info" class="mt-2 text-sm text-gray-600"></div>
                </div>
            </div>

            <!-- Validate Tab -->
            <div id="json-validate-content" class="json-tab-content hidden">
                <!-- Input Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">JSON Input</label>
                    <textarea id="json-validate-input" rows="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your JSON data to validate...">{
  "name": "John Doe",
  "age": 30,
  "city": "New York",
  "active": true
}</textarea>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="validateJSON()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        ✅ Validate JSON
                    </button>
                </div>

                <!-- Validation Results -->
                <div id="json-validation-results" class="p-4 rounded-lg border hidden">
                    <div id="json-validation-status" class="font-medium mb-2"></div>
                    <div id="json-validation-details" class="text-sm"></div>
                </div>
            </div>

            <!-- Highlight Tab -->
            <div id="json-highlight-content" class="json-tab-content hidden">
                <!-- Input Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">JSON Input</label>
                    <textarea id="json-highlight-input" rows="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your JSON data here...">{
  "name": "John Doe",
  "age": 30,
  "city": "New York",
  "active": true
}</textarea>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="highlightJSON()" class="bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700 transition-colors">
                        🌈 Highlight JSON
                    </button>
                    <button onclick="copyJSONHighlightResult()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        📋 Copy HTML
                    </button>
                </div>

                <!-- Output Section -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Highlighted Output</label>
                    <div id="json-highlight-output" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm min-h-[200px] overflow-auto" style="white-space: pre-wrap;"></div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="json-error" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden"></div>
        </div>
    </div>

    <div id="timestamp" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">⏰ Advanced Timestamp Converter</h3>
                <button onclick="closeModal('timestamp')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchTimestampTab('convert')" id="timestamp-convert-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-blue-600 shadow-sm">
                    🔄 Convert
                </button>
                <button onclick="switchTimestampTab('now')" id="timestamp-now-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    ⏰ Current Time
                </button>
                <button onclick="switchTimestampTab('relative')" id="timestamp-relative-tab" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    📅 Relative Time
                </button>
            </div>

            <!-- Convert Tab -->
            <div id="timestamp-convert-content" class="timestamp-tab-content">
                <!-- Input Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Input Timestamp</label>
                    <textarea id="timestamp-input" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter timestamp (epoch, ISO 8601, or custom format)...">1693867800000</textarea>
                </div>

                <!-- Input Format Options -->
                <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Input Format</label>
                        <select id="timestamp-input-format" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="">Auto-detect</option>
                            <option value="epoch_s">Epoch Seconds</option>
                            <option value="epoch_ms">Epoch Milliseconds</option>
                            <option value="ISO8601">ISO 8601</option>
                            <option value="YYYY-MM-DD HH:mm:ss">YYYY-MM-DD HH:mm:ss</option>
                            <option value="MM/DD/YYYY HH:mm:ss">MM/DD/YYYY HH:mm:ss</option>
                            <option value="DD/MM/YYYY HH:mm:ss">DD/MM/YYYY HH:mm:ss</option>
                            <option value="YYYY-MM-DD h:mm A">YYYY-MM-DD h:mm A</option>
                            <option value="MM/DD/YYYY h:mm A">MM/DD/YYYY h:mm A</option>
                            <option value="DD/MM/YYYY h:mm A">DD/MM/YYYY h:mm A</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Target Timezone</label>
                        <select id="timestamp-timezone" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="UTC">UTC</option>
                            <option value="America/New_York">America/New_York (EST/EDT)</option>
                            <option value="America/Chicago">America/Chicago (CST/CDT)</option>
                            <option value="America/Denver">America/Denver (MST/MDT)</option>
                            <option value="America/Los_Angeles">America/Los_Angeles (PST/PDT)</option>
                            <option value="Europe/London">Europe/London (GMT/BST)</option>
                            <option value="Europe/Paris">Europe/Paris (CET/CEST)</option>
                            <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                            <option value="Asia/Kolkata">Asia/Kolkata (IST)</option>
                            <option value="Asia/Shanghai">Asia/Shanghai (CST)</option>
                            <option value="Australia/Sydney">Australia/Sydney (AEST/AEDT)</option>
                        </select>
                    </div>
                </div>

                <!-- Output Format Options -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Output Format</label>
                    <select id="timestamp-output-format" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="ISO8601">ISO 8601 (2023-09-04T22:50:00.000Z)</option>
                        <option value="epoch_s">Epoch Seconds</option>
                        <option value="epoch_ms">Epoch Milliseconds</option>
                        <option value="relative">Relative Time (2 days ago)</option>
                        <option value="YYYY-MM-DD HH:mm:ss">YYYY-MM-DD HH:mm:ss</option>
                        <option value="MM/DD/YYYY HH:mm:ss">MM/DD/YYYY HH:mm:ss</option>
                        <option value="DD/MM/YYYY HH:mm:ss">DD/MM/YYYY HH:mm:ss</option>
                        <option value="YYYY-MM-DD h:mm A">YYYY-MM-DD h:mm A</option>
                        <option value="MM/DD/YYYY h:mm A">MM/DD/YYYY h:mm A</option>
                        <option value="DD/MM/YYYY h:mm A">DD/MM/YYYY h:mm A</option>
                        <option value="YYYY-MM-DD HH:mm:ss Z">YYYY-MM-DD HH:mm:ss Z</option>
                    </select>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6 flex space-x-3">
                    <button onclick="convertTimestamp()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        🔄 Convert Timestamp
                    </button>
                    <button onclick="copyTimestampResult()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        📋 Copy Result
                    </button>
                    <button onclick="clearTimestampInput()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">
                        🗑️ Clear
                    </button>
                </div>

                <!-- Output Section -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Converted Result</label>
                    <textarea id="timestamp-output" rows="4" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly placeholder="Converted timestamp will appear here..."></textarea>
                </div>
            </div>

            <!-- Current Time Tab -->
            <div id="timestamp-now-content" class="timestamp-tab-content hidden">
                <div class="mb-6">
                    <h4 class="text-lg font-semibold mb-4">Current Time in Different Formats</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <h5 class="font-medium mb-2">Epoch Seconds</h5>
                            <div id="now-epoch-s" class="font-mono text-sm bg-white p-2 rounded border"></div>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <h5 class="font-medium mb-2">Epoch Milliseconds</h5>
                            <div id="now-epoch-ms" class="font-mono text-sm bg-white p-2 rounded border"></div>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <h5 class="font-medium mb-2">ISO 8601 (UTC)</h5>
                            <div id="now-iso-utc" class="font-mono text-sm bg-white p-2 rounded border"></div>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <h5 class="font-medium mb-2">ISO 8601 (Local)</h5>
                            <div id="now-iso-local" class="font-mono text-sm bg-white p-2 rounded border"></div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <button onclick="updateCurrentTime()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        🔄 Refresh Current Time
                    </button>
                </div>
            </div>

            <!-- Relative Time Tab -->
            <div id="timestamp-relative-content" class="timestamp-tab-content hidden">
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Enter Timestamp for Relative Time</label>
                    <textarea id="relative-input" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter timestamp to get relative time..."></textarea>
                </div>

                <div class="mb-6">
                    <button onclick="calculateRelativeTime()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        📅 Calculate Relative Time
                    </button>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Relative Time Result</label>
                    <div id="relative-output" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm min-h-[100px]"></div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="timestamp-error" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden"></div>
        </div>
    </div>

    <!-- Advanced Timezone Converter Modal -->
    <div id="timezone" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🌍 Advanced Timezone Converter</h3>
                <button onclick="closeModal('timezone')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button id="timezone-convert-tab" onclick="switchTimezoneTab('convert')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-blue-600 shadow-sm">
                    Convert
                </button>
                <button id="timezone-current-tab" onclick="switchTimezoneTab('current')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Current Time
                </button>
                <button id="timezone-info-tab" onclick="switchTimezoneTab('info')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Timezone Info
                </button>
            </div>

            <!-- Convert Tab -->
            <div id="timezone-convert-content" class="timezone-tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Input Section -->
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-800">Input</h4>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Input Value</label>
                            <textarea id="timezone-input" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter timestamp (e.g., 2024-09-04T12:00:00Z, 1693843200000, or 2024-09-04 12:00:00)"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Input Format (Optional)</label>
                            <input type="text" id="timezone-input-format" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., YYYY-MM-DD HH:mm:ss, DD/MM/YYYY h:mm A">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Source Timezone</label>
                            <select id="timezone-source" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">America/New_York (EST/EDT)</option>
                                <option value="America/Los_Angeles">America/Los_Angeles (PST/PDT)</option>
                                <option value="Europe/London">Europe/London (GMT/BST)</option>
                                <option value="Europe/Berlin">Europe/Berlin (CET/CEST)</option>
                                <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                <option value="Asia/Kolkata">Asia/Kolkata (IST)</option>
                                <option value="Asia/Shanghai">Asia/Shanghai (CST)</option>
                                <option value="Australia/Sydney">Australia/Sydney (AEST/AEDT)</option>
                                <option value="Pacific/Auckland">Pacific/Auckland (NZST/NZDT)</option>
                                <option value="+05:30">+05:30 (Fixed Offset)</option>
                                <option value="-07:00">-07:00 (Fixed Offset)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Output Section -->
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-800">Output</h4>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Target Timezone</label>
                            <select id="timezone-target" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">America/New_York (EST/EDT)</option>
                                <option value="America/Los_Angeles">America/Los_Angeles (PST/PDT)</option>
                                <option value="Europe/London">Europe/London (GMT/BST)</option>
                                <option value="Europe/Berlin">Europe/Berlin (CET/CEST)</option>
                                <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                <option value="Asia/Kolkata" selected>Asia/Kolkata (IST)</option>
                                <option value="Asia/Shanghai">Asia/Shanghai (CST)</option>
                                <option value="Australia/Sydney">Australia/Sydney (AEST/AEDT)</option>
                                <option value="Pacific/Auckland">Pacific/Auckland (NZST/NZDT)</option>
                                <option value="+05:30">+05:30 (Fixed Offset)</option>
                                <option value="-07:00">-07:00 (Fixed Offset)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Output Format</label>
                            <select id="timezone-output-format" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="ISO8601">ISO 8601 (2024-09-04T12:00:00.000+05:30)</option>
                                <option value="YYYY-MM-DD HH:mm:ss Z">YYYY-MM-DD HH:mm:ss Z</option>
                                <option value="YYYY/MM/DD HH:mm:ss z">YYYY/MM/DD HH:mm:ss z</option>
                                <option value="DD-MM-YYYY h:mm A z">DD-MM-YYYY h:mm A z</option>
                                <option value="MM/DD/YYYY HH:mm:ss Z">MM/DD/YYYY HH:mm:ss Z</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Result</label>
                            <textarea id="timezone-output" rows="3" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50" readonly placeholder="Converted timestamp will appear here"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap gap-3 mt-6">
                    <button onclick="convertTimezone()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        Convert Timezone
                    </button>
                    <button onclick="copyTimezoneResult()" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors">
                        Copy Result
                    </button>
                    <button onclick="clearTimezoneInput()" class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors">
                        Clear
                    </button>
                </div>
            </div>

            <!-- Current Time Tab -->
            <div id="timezone-current-content" class="timezone-tab-content hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="p-4 bg-blue-50 rounded-lg">
                        <h5 class="font-semibold text-blue-800 mb-2">UTC</h5>
                        <div id="current-utc" class="text-sm text-blue-600">Loading...</div>
                    </div>
                    <div class="p-4 bg-green-50 rounded-lg">
                        <h5 class="font-semibold text-green-800 mb-2">New York (EST/EDT)</h5>
                        <div id="current-ny" class="text-sm text-green-600">Loading...</div>
                    </div>
                    <div class="p-4 bg-purple-50 rounded-lg">
                        <h5 class="font-semibold text-purple-800 mb-2">London (GMT/BST)</h5>
                        <div id="current-london" class="text-sm text-purple-600">Loading...</div>
                    </div>
                    <div class="p-4 bg-orange-50 rounded-lg">
                        <h5 class="font-semibold text-orange-800 mb-2">Tokyo (JST)</h5>
                        <div id="current-tokyo" class="text-sm text-orange-600">Loading...</div>
                    </div>
                    <div class="p-4 bg-red-50 rounded-lg">
                        <h5 class="font-semibold text-red-800 mb-2">Kolkata (IST)</h5>
                        <div id="current-kolkata" class="text-sm text-red-600">Loading...</div>
                    </div>
                    <div class="p-4 bg-indigo-50 rounded-lg">
                        <h5 class="font-semibold text-indigo-800 mb-2">Sydney (AEST/AEDT)</h5>
                        <div id="current-sydney" class="text-sm text-indigo-600">Loading...</div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button onclick="updateCurrentTimes()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        Refresh Times
                    </button>
                </div>
            </div>

            <!-- Timezone Info Tab -->
            <div id="timezone-info-content" class="timezone-tab-content hidden">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Timezone</label>
                        <select id="timezone-info-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="showTimezoneInfo()">
                            <option value="">Select a timezone...</option>
                            <option value="UTC">UTC</option>
                            <option value="America/New_York">America/New_York</option>
                            <option value="America/Los_Angeles">America/Los_Angeles</option>
                            <option value="Europe/London">Europe/London</option>
                            <option value="Europe/Berlin">Europe/Berlin</option>
                            <option value="Asia/Tokyo">Asia/Tokyo</option>
                            <option value="Asia/Kolkata">Asia/Kolkata</option>
                            <option value="Asia/Shanghai">Asia/Shanghai</option>
                            <option value="Australia/Sydney">Australia/Sydney</option>
                            <option value="Pacific/Auckland">Pacific/Auckland</option>
                        </select>
                    </div>
                    
                    <div id="timezone-info-display" class="p-4 bg-gray-50 rounded-lg hidden">
                        <h5 class="font-semibold text-gray-800 mb-3">Timezone Information</h5>
                        <div id="timezone-info-content-display" class="text-sm text-gray-600"></div>
                    </div>
                </div>
            </div>

            <!-- Error Display -->
            <div id="timezone-error" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden"></div>
        </div>
    </div>

    <div id="lorem" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📝 Advanced Lorem Generator</h3>
                <button onclick="closeModal('lorem')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button id="lorem-generate-tab" onclick="switchLoremTab('generate')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-gray-900 shadow-sm">
                    Generate
                </button>
                <button id="lorem-themes-tab" onclick="switchLoremTab('themes')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Themes
                </button>
                <button id="lorem-options-tab" onclick="switchLoremTab('options')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Options
                </button>
            </div>

            <!-- Generate Tab -->
            <div id="lorem-generate-content" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Input Section -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Output Type</label>
                            <select id="lorem-output-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="words">Words</option>
                                <option value="sentences">Sentences</option>
                                <option value="paragraphs" selected>Paragraphs</option>
                                <option value="list">List</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Theme</label>
                            <select id="lorem-theme" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="lorem" selected>Classic Lorem Ipsum</option>
                                <option value="bacon">Bacon Ipsum</option>
                                <option value="corporate">Corporate Ipsum</option>
                                <option value="space">Space Ipsum</option>
                                <option value="tech">Tech Ipsum</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Count</label>
                            <input type="number" id="lorem-count" value="3" min="1" max="50" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>

                        <div class="flex space-x-4">
                            <button onclick="generateLorem()" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                Generate Text
                            </button>
                            <button onclick="clearLoremOutput()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                Clear
                            </button>
                        </div>
                    </div>

                    <!-- Output Section -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Generated Text</label>
                        <div class="relative">
                            <textarea id="lorem-output" rows="12" readonly class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm resize-none"></textarea>
                            <button onclick="copyLoremOutput()" class="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 bg-white rounded border">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Themes Tab -->
            <div id="lorem-themes-content" class="tab-content hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-2">Classic Lorem Ipsum</h4>
                        <p class="text-sm text-gray-600 mb-3">Traditional pseudo-Latin text from Cicero's works</p>
                        <button onclick="setLoremTheme('lorem')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Use Theme</button>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-2">Bacon Ipsum</h4>
                        <p class="text-sm text-gray-600 mb-3">Meat-themed placeholder text for food lovers</p>
                        <button onclick="setLoremTheme('bacon')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Use Theme</button>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-2">Corporate Ipsum</h4>
                        <p class="text-sm text-gray-600 mb-3">Business buzzwords and corporate terminology</p>
                        <button onclick="setLoremTheme('corporate')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Use Theme</button>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-2">Space Ipsum</h4>
                        <p class="text-sm text-gray-600 mb-3">Astronomical and space exploration terminology</p>
                        <button onclick="setLoremTheme('space')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Use Theme</button>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-2">Tech Ipsum</h4>
                        <p class="text-sm text-gray-600 mb-3">Technology and programming terminology</p>
                        <button onclick="setLoremTheme('tech')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Use Theme</button>
                    </div>
                </div>
            </div>

            <!-- Options Tab -->
            <div id="lorem-options-content" class="tab-content hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h4 class="font-semibold text-gray-900">Formatting Options</h4>
                        
                        <div class="flex items-center">
                            <input type="checkbox" id="lorem-include-html" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="lorem-include-html" class="ml-2 text-sm text-gray-700">Include HTML markup</label>
                        </div>
                        
                        <div class="flex items-center">
                            <input type="checkbox" id="lorem-random-formatting" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="lorem-random-formatting" class="ml-2 text-sm text-gray-700">Add random bold/italic formatting</label>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">List Type (for list output)</label>
                            <select id="lorem-list-type" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="unordered">Unordered (bullets)</option>
                                <option value="ordered">Ordered (numbers)</option>
                            </select>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="font-semibold text-gray-900">Advanced Options</h4>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Min Words per Sentence</label>
                            <input type="number" id="lorem-min-words" value="4" min="2" max="20" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Max Words per Sentence</label>
                            <input type="number" id="lorem-max-words" value="20" min="5" max="50" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sentences per Paragraph</label>
                            <input type="number" id="lorem-sentences-per-paragraph" value="4" min="1" max="15" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error/Success Messages -->
            <div id="lorem-error" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            <div id="lorem-success" class="hidden mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg"></div>
        </div>
    </div>

    <div id="markdown" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">📄 Advanced Markdown Preview</h3>
                <button onclick="closeModal('markdown')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                <button id="markdown-editor-tab" onclick="switchMarkdownTab('editor')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-gray-900 shadow-sm">
                    Editor
                </button>
                <button id="markdown-preview-tab" onclick="switchMarkdownTab('preview')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Preview
                </button>
                <button id="markdown-split-tab" onclick="switchMarkdownTab('split')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                    Split View
                </button>
            </div>

            <!-- Options Bar -->
            <div class="flex flex-wrap gap-4 mb-4 p-3 bg-gray-50 rounded-lg">
                <div class="flex items-center space-x-2">
                    <label class="text-sm font-medium text-gray-700">Theme:</label>
                    <select id="markdown-theme" class="text-sm border border-gray-300 rounded px-2 py-1">
                        <option value="github">GitHub</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <input type="checkbox" id="markdown-syntax-highlighting" checked class="h-4 w-4 text-blue-600">
                    <label for="markdown-syntax-highlighting" class="text-sm text-gray-700">Syntax Highlighting</label>
                </div>
                <div class="flex items-center space-x-2">
                    <input type="checkbox" id="markdown-sanitize" checked class="h-4 w-4 text-blue-600">
                    <label for="markdown-sanitize" class="text-sm text-gray-700">Sanitize HTML</label>
                </div>
                <div class="flex items-center space-x-2">
                    <input type="checkbox" id="markdown-target-blank" checked class="h-4 w-4 text-blue-600">
                    <label for="markdown-target-blank" class="text-sm text-gray-700">Open links in new tab</label>
                </div>
            </div>

            <!-- Editor Tab -->
            <div id="markdown-editor-content" class="tab-content">
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Markdown Input</label>
                        <textarea id="markdown-input" rows="15" class="w-full p-3 border border-gray-300 rounded-lg font-mono text-sm resize-none" placeholder="Enter your markdown here...

# Example Markdown

This is a **bold** statement with *italic* text.

## Code Example

```javascript
function hello() {
    console.log('Hello, World!');
}
```

### Lists

- Item 1
- Item 2
- Item 3

### Links

[Visit Google](https://google.com)

> This is a blockquote

---

### Table

| Column 1 | Column 2 |
|----------|----------|
| Data 1   | Data 2   |"></textarea>
                    </div>
                    <div class="flex space-x-4">
                        <button onclick="updateMarkdownPreview()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            Update Preview
                        </button>
                        <button onclick="clearMarkdownInput()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Clear
                        </button>
                        <button onclick="loadMarkdownSample()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Load Sample
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Tab -->
            <div id="markdown-preview-content" class="tab-content hidden">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">HTML Preview</label>
                    <div id="markdown-preview-output" class="w-full p-4 border border-gray-300 rounded-lg bg-white min-h-96 overflow-auto">
                        <div class="text-gray-500 text-center py-8">
                            Enter markdown in the Editor tab to see the preview here.
                        </div>
                    </div>
                    <div class="flex space-x-4 mt-4">
                        <button onclick="copyMarkdownHtml()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium">
                            Copy HTML
                        </button>
                        <button onclick="downloadMarkdownHtml()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Download HTML
                        </button>
                    </div>
                </div>
            </div>

            <!-- Split View Tab -->
            <div id="markdown-split-content" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Markdown Editor</label>
                        <textarea id="markdown-split-input" rows="20" class="w-full p-3 border border-gray-300 rounded-lg font-mono text-sm resize-none" placeholder="Enter markdown here..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Live Preview</label>
                        <div id="markdown-split-preview" class="w-full p-4 border border-gray-300 rounded-lg bg-white min-h-96 overflow-auto">
                            <div class="text-gray-500 text-center py-8">
                                Start typing to see live preview...
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error/Success Messages -->
            <div id="markdown-error" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            <div id="markdown-success" class="hidden mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg"></div>
        </div>
    </div>

    <!-- Advanced CSS/JS Minifier Modal -->
    <div id="minify" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🗜️ Advanced CSS/JS Minifier</h3>
                <button onclick="closeModal('minify')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Language Selection -->
            <div class="mb-6">
                <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg">
                    <button id="minifier-css-tab" onclick="switchMinifierTab('css')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-gray-900 shadow-sm">
                        CSS Minifier
                    </button>
                    <button id="minifier-js-tab" onclick="switchMinifierTab('js')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                        JavaScript Minifier
                    </button>
                </div>
            </div>

            <!-- CSS Minifier Tab -->
            <div id="minifier-css-mode" class="minifier-mode">
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">CSS Code</label>
                    <textarea id="css-input" rows="12" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your CSS code here..."></textarea>
                </div>

                <!-- CSS Options -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold mb-3">CSS Optimization Options</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="css-remove-comments" checked class="mr-2">
                            <span class="text-sm">Remove Comments</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="css-remove-whitespace" checked class="mr-2">
                            <span class="text-sm">Remove Whitespace</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="css-optimize-colors" checked class="mr-2">
                            <span class="text-sm">Optimize Colors</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="css-optimize-values" checked class="mr-2">
                            <span class="text-sm">Optimize Values</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="css-merge-selectors" checked class="mr-2">
                            <span class="text-sm">Merge Selectors</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="css-remove-empty-rules" checked class="mr-2">
                            <span class="text-sm">Remove Empty Rules</span>
                        </label>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="minifyCSS()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Minify CSS
                    </button>
                    <button onclick="loadCSSSample()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Load Sample
                    </button>
                    <button onclick="clearCSSInput()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Clear
                    </button>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Minified CSS</label>
                    <textarea id="css-output" rows="8" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly placeholder="Minified CSS will appear here..."></textarea>
                </div>

                <!-- CSS Stats -->
                <div id="css-stats" class="hidden bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Compression Statistics</h4>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Original Size:</span>
                            <span id="css-original-size" class="font-mono ml-1">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Minified Size:</span>
                            <span id="css-minified-size" class="font-mono ml-1">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Compression:</span>
                            <span id="css-compression-ratio" class="font-mono ml-1 text-green-600">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JavaScript Minifier Tab -->
            <div id="minifier-js-mode" class="minifier-mode hidden">
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">JavaScript Code</label>
                    <textarea id="js-input" rows="12" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm" placeholder="Enter your JavaScript code here..."></textarea>
                </div>

                <!-- JavaScript Options -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold mb-3">JavaScript Optimization Options</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="js-mangle-names" checked class="mr-2">
                            <span class="text-sm">Mangle Names</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="js-remove-dead-code" checked class="mr-2">
                            <span class="text-sm">Remove Dead Code</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="js-compress-expressions" checked class="mr-2">
                            <span class="text-sm">Compress Expressions</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="js-remove-console" checked class="mr-2">
                            <span class="text-sm">Remove Console</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="js-optimize-conditionals" checked class="mr-2">
                            <span class="text-sm">Optimize Conditionals</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="js-remove-comments" checked class="mr-2">
                            <span class="text-sm">Remove Comments</span>
                        </label>
                    </div>
                </div>

                <div class="flex space-x-3 mb-6">
                    <button onclick="minifyJS()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Minify JavaScript
                    </button>
                    <button onclick="loadJSSample()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Load Sample
                    </button>
                    <button onclick="clearJSInput()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Clear
                    </button>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Minified JavaScript</label>
                    <textarea id="js-output" rows="8" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly placeholder="Minified JavaScript will appear here..."></textarea>
                </div>

                <!-- JavaScript Stats -->
                <div id="js-stats" class="hidden bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Compression Statistics</h4>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Original Size:</span>
                            <span id="js-original-size" class="font-mono ml-1">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Minified Size:</span>
                            <span id="js-minified-size" class="font-mono ml-1">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Compression:</span>
                            <span id="js-compression-ratio" class="font-mono ml-1 text-green-600">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error/Success Messages -->
            <div id="minifier-error" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            <div id="minifier-success" class="hidden mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg"></div>
        </div>
    </div>

    <!-- Advanced Regex Tester Modal -->
    <div id="regex" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gradient">🔍 Advanced Regex Tester</h3>
                <button onclick="closeModal('regex')" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Engine Selection -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Regex Engine</label>
                <select id="regex-engine" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="ECMAScript">ECMAScript (JavaScript)</option>
                    <option value="PCRE2">PCRE2</option>
                    <option value=".NET">.NET</option>
                </select>
            </div>

            <!-- Pattern Input -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Pattern</label>
                <div class="relative">
                    <input type="text" id="regex-pattern" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono" placeholder="Enter your regex pattern...">
                    <button onclick="clearRegexPattern()" class="absolute right-2 top-2 text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Flags -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Flags</label>
                <div id="regex-flags" class="flex flex-wrap gap-2">
                    <!-- Flags will be populated dynamically -->
                </div>
            </div>

            <!-- Test Input -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Test Input</label>
                <textarea id="regex-input" rows="6" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono" placeholder="Enter text to test against the pattern..."></textarea>
            </div>

            <!-- Replacement (Optional) -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Replacement (Optional)</label>
                <input type="text" id="regex-replacement" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono" placeholder="Enter replacement string (use $1, $2, etc. for groups)...">
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-3 mb-6">
                <button onclick="testRegex()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Test Pattern
                </button>
                <button onclick="loadRegexTemplate()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                    Load Template
                </button>
                <button onclick="clearRegexInput()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                    Clear All
                </button>
            </div>

            <!-- Results Tabs -->
            <div class="mb-6">
                <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg">
                    <button id="regex-matches-tab" onclick="switchRegexTab('matches')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-white text-gray-900 shadow-sm">
                        Matches
                    </button>
                    <button id="regex-groups-tab" onclick="switchRegexTab('groups')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                        Groups
                    </button>
                    <button id="regex-replacement-tab" onclick="switchRegexTab('replacement')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                        Replacement
                    </button>
                    <button id="regex-explanation-tab" onclick="switchRegexTab('explanation')" class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-gray-500 hover:text-gray-700">
                        Explanation
                    </button>
                </div>
            </div>

            <!-- Matches Tab -->
            <div id="regex-matches-content" class="regex-tab-content">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Highlighted Input</label>
                    <div id="regex-highlighted-input" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono min-h-20">
                        <div class="text-gray-500">Enter a pattern and test input to see matches highlighted here...</div>
                    </div>
                </div>

                <div class="mb-4">
                    <h4 class="font-semibold mb-2">Match Results</h4>
                    <div id="regex-match-count" class="text-sm text-gray-600 mb-2">No matches found</div>
                    <div id="regex-match-table" class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Index</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Length</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Match</th>
                                </tr>
                            </thead>
                            <tbody id="regex-match-tbody" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="3" class="px-4 py-4 text-center text-gray-500">No matches to display</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Groups Tab -->
            <div id="regex-groups-content" class="regex-tab-content hidden">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Group Highlights</label>
                    <div id="regex-group-highlights" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono min-h-20">
                        <div class="text-gray-500">Enter a pattern with groups to see group highlights here...</div>
                    </div>
                </div>

                <div class="mb-4">
                    <h4 class="font-semibold mb-2">Capture Groups</h4>
                    <div id="regex-groups-table" class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Match</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Group</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Start</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">End</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Value</th>
                                </tr>
                            </thead>
                            <tbody id="regex-groups-tbody" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="5" class="px-4 py-4 text-center text-gray-500">No groups to display</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Replacement Tab -->
            <div id="regex-replacement-content" class="regex-tab-content hidden">
                <div class="mb-4">
                    <h4 class="font-semibold mb-2">Replacement Preview</h4>
                    <div id="regex-replacement-preview" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono min-h-20">
                        <div class="text-gray-500">Enter a replacement string to see the preview here...</div>
                    </div>
                </div>
            </div>

            <!-- Explanation Tab -->
            <div id="regex-explanation-content" class="regex-tab-content hidden">
                <div class="mb-4">
                    <h4 class="font-semibold mb-2">Pattern Explanation</h4>
                    <div id="regex-explanation-text" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm whitespace-pre-wrap">
                        <div class="text-gray-500">Enter a pattern to see its explanation here...</div>
                    </div>
                </div>
            </div>

            <!-- Statistics -->
            <div id="regex-stats" class="hidden bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Statistics</h4>
                <div class="grid grid-cols-3 gap-4 text-sm">
                    <div>
                        <span class="text-gray-600">Execution Time:</span>
                        <span id="regex-execution-time" class="font-mono ml-1">-</span>
                    </div>
                    <div>
                        <span class="text-gray-600">Matches Found:</span>
                        <span id="regex-matches-count" class="font-mono ml-1">-</span>
                    </div>
                    <div>
                        <span class="text-gray-600">Engine:</span>
                        <span id="regex-current-engine" class="font-mono ml-1">-</span>
                    </div>
                </div>
            </div>

            <!-- Error/Success Messages -->
            <div id="regex-error" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            <div id="regex-success" class="hidden mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg"></div>
        </div>
    </div>

    <script>
        // Modal functions removed - now defined in head section

        // Global instances - moved to head section
        // Advanced Calculator instance
        // let advancedCalc = null; // Now managed in head

        // Percentage Calculator instance - moved to head section

        // BMI Calculator instance - moved to head section

        // Age Calculator instance - moved to head section

        // Unit Converter instance - moved to head section

        // Advanced Currency Converter instance - moved to head section

        // Advanced Color Converter instance - moved to head section

        // Initialize all calculators on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializePercentageCalculator();
            
            // Test if UnitConverter is available
            console.log('DOM loaded, checking UnitConverter availability...');
            if (typeof UnitConverter !== 'undefined') {
                console.log('✅ UnitConverter class is available');
                // Pre-initialize unit converter
                setTimeout(() => {
                    try {
                        window.unitConverter = new UnitConverter();
                        console.log('✅ UnitConverter pre-initialized');
                    } catch (error) {
                        console.error('❌ Error pre-initializing UnitConverter:', error);
                    }
                }, 100);
            } else {
                console.error('❌ UnitConverter class is NOT available');
            }
            
            // Test if AdvancedCurrencyConverter is available
            console.log('DOM loaded, checking AdvancedCurrencyConverter availability...');
            console.log('AdvancedCurrencyConverter type:', typeof AdvancedCurrencyConverter);
            console.log('AdvancedCurrencyConverter value:', AdvancedCurrencyConverter);
            
            if (typeof AdvancedCurrencyConverter !== 'undefined') {
                console.log('✅ AdvancedCurrencyConverter class is available');
                // Pre-initialize currency converter
                setTimeout(() => {
                    try {
                        window.currencyConverter = new AdvancedCurrencyConverter();
                        console.log('✅ AdvancedCurrencyConverter pre-initialized');
                    } catch (error) {
                        console.error('❌ Error pre-initializing AdvancedCurrencyConverter:', error);
                    }
                }, 200);
            } else {
                console.error('❌ AdvancedCurrencyConverter class is NOT available');
                // Check if it's available after a delay (script loading issue)
                setTimeout(() => {
                    console.log('Delayed check - AdvancedCurrencyConverter type:', typeof AdvancedCurrencyConverter);
                    if (typeof AdvancedCurrencyConverter !== 'undefined') {
                        console.log('✅ AdvancedCurrencyConverter now available after delay');
                        try {
                            window.currencyConverter = new AdvancedCurrencyConverter();
                            console.log('✅ AdvancedCurrencyConverter initialized after delay');
                        } catch (error) {
                            console.error('❌ Error initializing AdvancedCurrencyConverter after delay:', error);
                        }
                    } else {
                        console.error('❌ AdvancedCurrencyConverter still not available after delay');
                    }
                }, 1000);
            }
            
            // Test if AdvancedColorConverter is available
            console.log('DOM loaded, checking AdvancedColorConverter availability...');
            console.log('AdvancedColorConverter type:', typeof AdvancedColorConverter);
            console.log('AdvancedColorConverter value:', AdvancedColorConverter);
            
            if (typeof AdvancedColorConverter !== 'undefined') {
                console.log('✅ AdvancedColorConverter class is available');
                // Pre-initialize color converter
                setTimeout(() => {
                    try {
                        window.colorConverter = new AdvancedColorConverter();
                        console.log('✅ AdvancedColorConverter pre-initialized');
                    } catch (error) {
                        console.error('❌ Error pre-initializing AdvancedColorConverter:', error);
                    }
                }, 300);
            } else {
                console.error('❌ AdvancedColorConverter class is NOT available');
                // Check if it's available after a delay (script loading issue)
                setTimeout(() => {
                    console.log('Delayed check - AdvancedColorConverter type:', typeof AdvancedColorConverter);
                    if (typeof AdvancedColorConverter !== 'undefined') {
                        console.log('✅ AdvancedColorConverter now available after delay');
                        try {
                            window.colorConverter = new AdvancedColorConverter();
                            console.log('✅ AdvancedColorConverter initialized after delay');
                        } catch (error) {
                            console.error('❌ Error initializing AdvancedColorConverter after delay:', error);
                        }
                    } else {
                        console.error('❌ AdvancedColorConverter still not available after delay');
                    }
                }, 1200);
            }
            
            // Test if AdvancedBase64Encoder is available
            console.log('DOM loaded, checking AdvancedBase64Encoder availability...');
            console.log('AdvancedBase64Encoder type:', typeof AdvancedBase64Encoder);
            console.log('AdvancedBase64Encoder value:', AdvancedBase64Encoder);

            // Test if AdvancedPasswordGenerator is available
            console.log('DOM loaded, checking AdvancedPasswordGenerator availability...');
            console.log('AdvancedPasswordGenerator type:', typeof AdvancedPasswordGenerator);
            console.log('AdvancedPasswordGenerator value:', AdvancedPasswordGenerator);
            
            if (typeof AdvancedPasswordGenerator !== 'undefined') {
                console.log('✅ AdvancedPasswordGenerator class is available');
                // Pre-initialize password generator
                setTimeout(() => {
                    try {
                        window.advancedPasswordGen = new AdvancedPasswordGenerator();
                        console.log('✅ AdvancedPasswordGenerator pre-initialized');
                        // Update entropy info
                        updateEntropyInfo();
                    } catch (error) {
                        console.error('❌ Error pre-initializing AdvancedPasswordGenerator:', error);
                    }
                }, 400);
            } else {
                console.error('❌ AdvancedPasswordGenerator class is NOT available');
                // Check if it's available after a delay (script loading issue)
                setTimeout(() => {
                    console.log('Delayed check - AdvancedPasswordGenerator type:', typeof AdvancedPasswordGenerator);
                    if (typeof AdvancedPasswordGenerator !== 'undefined') {
                        console.log('✅ AdvancedPasswordGenerator now available after delay');
                        try {
                            window.advancedPasswordGen = new AdvancedPasswordGenerator();
                            console.log('✅ AdvancedPasswordGenerator initialized after delay');
                            // Update entropy info
                            updateEntropyInfo();
                        } catch (error) {
                            console.error('❌ Error initializing AdvancedPasswordGenerator after delay:', error);
                        }
                    } else {
                        console.error('❌ AdvancedPasswordGenerator still not available after delay');
                    }
                }, 1400);
            }

            // Add event listener for custom characters toggle
            const alphabetTypeSelect = document.getElementById('alphabet-type');
            const customCharsDiv = document.getElementById('custom-chars-container');
            
            if (alphabetTypeSelect && customCharsDiv) {
                alphabetTypeSelect.addEventListener('change', function() {
                    if (this.value === 'custom') {
                        customCharsDiv.classList.remove('hidden');
                    } else {
                        customCharsDiv.classList.add('hidden');
                    }
                });
            }
            
            if (typeof AdvancedBase64Encoder !== 'undefined') {
                console.log('✅ AdvancedBase64Encoder class is available');
                // Pre-initialize base64 encoder
                setTimeout(() => {
                    try {
                        window.base64Encoder = new AdvancedBase64Encoder();
                        console.log('✅ AdvancedBase64Encoder pre-initialized');
                    } catch (error) {
                        console.error('❌ Error pre-initializing AdvancedBase64Encoder:', error);
                    }
                }, 400);
            } else {
                console.error('❌ AdvancedBase64Encoder class is NOT available');
                // Check if it's available after a delay (script loading issue)
                setTimeout(() => {
                    console.log('Delayed check - AdvancedBase64Encoder type:', typeof AdvancedBase64Encoder);
                    if (typeof AdvancedBase64Encoder !== 'undefined') {
                        console.log('✅ AdvancedBase64Encoder now available after delay');
                        try {
                            window.base64Encoder = new AdvancedBase64Encoder();
                            console.log('✅ AdvancedBase64Encoder initialized after delay');
                        } catch (error) {
                            console.error('❌ Error initializing AdvancedBase64Encoder after delay:', error);
                        }
                    } else {
                        console.error('❌ AdvancedBase64Encoder still not available after delay');
                    }
                }, 1400);
            }
            

        });

        // Advanced Calculator functions - moved to head section
        // let calcExpression = ''; // Now managed in head
        // let calcDisplay = '0'; // Now managed in head

        // Basic calculator functions moved to head section

        // Advanced Calculator Functions moved to head section

        // Advanced Calculator Functions - moved to head section

        // Advanced Calculator Functions - moved to head section

        function clearTwoOperand() {
            document.getElementById('calc-a').value = '';
            document.getElementById('calc-b').value = '';
            document.getElementById('two-op-result').classList.add('hidden');
        }

        // Complex number calculations
        function calculateComplex() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }

            const realA = parseFloat(document.getElementById('complex-real-a').value) || 0;
            const imagA = parseFloat(document.getElementById('complex-imag-a').value) || 0;
            const realB = parseFloat(document.getElementById('complex-real-b').value) || 0;
            const imagB = parseFloat(document.getElementById('complex-imag-b').value) || 0;
            const operation = document.getElementById('complex-operation').value;

            try {
                const complexA = new Complex(realA, imagA);
                const complexB = new Complex(realB, imagB);
                let result;

                switch (operation) {
                    case '+':
                        result = complexA.add(complexB);
                        break;
                    case '-':
                        result = complexA.subtract(complexB);
                        break;
                    case '*':
                        result = complexA.multiply(complexB);
                        break;
                    case '/':
                        result = complexA.divide(complexB);
                        break;
                    case '^':
                        result = complexA.power(2); // Power of 2 for simplicity
                        break;
                    case 'conjugate':
                        result = complexA.conjugate();
                        break;
                    case 'magnitude':
                        result = complexA.magnitude();
                        break;
                    case 'angle':
                        result = complexA.angle();
                        break;
                    default:
                        throw new Error('Unknown operation');
                }

                document.getElementById('complex-result-value').textContent = result.toString();
                document.getElementById('complex-result').classList.remove('hidden');
                
                // Update memory display
                updateMemoryDisplay();
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        function clearComplex() {
            document.getElementById('complex-real-a').value = '';
            document.getElementById('complex-imag-a').value = '';
            document.getElementById('complex-real-b').value = '';
            document.getElementById('complex-imag-b').value = '';
            document.getElementById('complex-operation').value = '+';
            document.getElementById('complex-result').classList.add('hidden');
        }

        // Numerical methods calculations
        function calculateNumerical() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }

            const functionStr = document.getElementById('numerical-function').value.trim();
            const method = document.getElementById('numerical-method').value;
            const lower = parseFloat(document.getElementById('numerical-lower').value);
            const upper = parseFloat(document.getElementById('numerical-upper').value);
            const guess = parseFloat(document.getElementById('numerical-guess').value);

            if (!functionStr) {
                alert('Please enter a function');
                return;
            }

            try {
                let result;

                switch (method) {
                    case 'solve':
                        if (isNaN(guess)) {
                            alert('Please enter an initial guess for root finding');
                            return;
                        }
                        result = advancedCalc.solve(functionStr, 'x', guess);
                        break;
                    case 'integrate':
                        if (isNaN(lower) || isNaN(upper)) {
                            alert('Please enter valid bounds for integration');
                            return;
                        }
                        result = advancedCalc.integrate(functionStr, lower, upper);
                        break;
                    case 'derivative':
                        if (isNaN(guess)) {
                            alert('Please enter a point for derivative calculation');
                            return;
                        }
                        result = advancedCalc.derivative(functionStr, guess);
                        break;
                    default:
                        throw new Error('Unknown method');
                    }
                
                document.getElementById('numerical-result-value').textContent = result.toString();
                document.getElementById('numerical-result').classList.remove('hidden');
                
                // Update memory display
                updateMemoryDisplay();
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        function clearNumerical() {
            document.getElementById('numerical-function').value = '';
            document.getElementById('numerical-method').value = 'solve';
            document.getElementById('numerical-lower').value = '';
            document.getElementById('numerical-upper').value = '';
            document.getElementById('numerical-guess').value = '';
            document.getElementById('numerical-result').classList.add('hidden');
        }

        // Advanced settings functions
        function setCalcAngleMode() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }
            const mode = document.getElementById('calc-angle-mode').value;
            advancedCalc.setMode(mode);
            
            // Update button styles in scientific mode
            if (mode === 'radians') {
                document.getElementById('radians-btn').className = 'px-3 py-1 rounded text-sm bg-purple-600 text-white';
                document.getElementById('degrees-btn').className = 'px-3 py-1 rounded text-sm bg-gray-200 text-gray-700';
            } else {
                document.getElementById('degrees-btn').className = 'px-3 py-1 rounded text-sm bg-purple-600 text-white';
                document.getElementById('radians-btn').className = 'px-3 py-1 rounded text-sm bg-gray-200 text-gray-700';
            }
        }

        function setCalcComplexMode() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }
            const enabled = document.getElementById('calc-complex-mode').value === 'true';
            advancedCalc.setComplexMode(enabled);
        }

        function setCalcPrecision() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }
            const precision = parseInt(document.getElementById('calc-precision').value);
            advancedCalc.setPrecision(precision);
        }

        function storeMemory() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }

            const lastResult = advancedCalc.getLastResult();
            if (lastResult !== 0) {
                advancedCalc.storeMemory(lastResult);
                updateMemoryDisplay();
            }
        }

        function recallMemory() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }

            const memoryValue = advancedCalc.recallMemory();
            if (memoryValue !== 0) {
                // Add to current input based on active mode
                const activeMode = document.querySelector('.calc-mode:not(.hidden)').id;
                
                if (activeMode === 'advanced-calc') {
                    document.getElementById('expr-input').value += memoryValue;
                } else if (activeMode === 'scientific-calc') {
                    document.getElementById('calc-a').value = memoryValue;
                }
            }
        }

        function clearMemory() {
            if (!advancedCalc) {
                initializeAdvancedCalculator();
            }

            advancedCalc.clearMemory();
            updateMemoryDisplay();
        }

        function updateMemoryDisplay() {
            if (advancedCalc) {
                document.getElementById('last-result').textContent = advancedCalc.getLastResult();
                document.getElementById('memory-value').textContent = advancedCalc.recallMemory();
            }
        }

        // Advanced Base64 Encoder Functions - moved to head section

        // Advanced Base64 Encoder Functions - moved to head section

        // Advanced Base64 Encoder Functions - moved to head section











        // Handle file upload for Base64
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('base64-file');
            if (fileInput) {
                fileInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const fileInfo = document.getElementById('file-info');
                        fileInfo.innerHTML = `
                            <div><strong>Name:</strong> ${file.name}</div>
                            <div><strong>Size:</strong> ${(file.size / 1024).toFixed(2)} KB</div>
                            <div><strong>Type:</strong> ${file.type || 'Unknown'}</div>
                        `;
                        fileInfo.classList.remove('hidden');
                    }
                });
            }
        });

        // Percentage Calculator Functions - moved to head section

        // Percentage Calculator Functions - moved to head section

        // BMI Calculator Functions - moved to head section

        // BMI Calculator Functions - moved to head section

        // BMI Calculator Functions - moved to head section
            document.getElementById('bmi-error').classList.add('hidden');
        }



        // Color Converter Functions - moved to head section

        // Test function for debugging
        function testUnitConverter() {
            console.log('🧪 Testing Unit Converter...');
            console.log('UnitConverter class available:', typeof UnitConverter);
            console.log('unitConverter instance:', unitConverter);
            
            if (typeof UnitConverter !== 'undefined') {
                try {
                    const testConverter = new UnitConverter();
                    console.log('✅ Test converter created successfully');
                    console.log('Available dimensions:', testConverter.getAvailableDimensions());
                    console.log('Length units:', testConverter.getUnitsForDimension('length'));
                    
                    // Test a simple conversion
                    const result = testConverter.convert(5, 'mi', 'km');
                    console.log('5 miles to km result:', result);
                    
                    // Test the registry
                    console.log('Registry units:', testConverter.registry.units);
                    console.log('Registry dimensions:', testConverter.registry.dimBase);
                    
            } catch (error) {
                    console.error('❌ Error creating test converter:', error);
                    console.error('Error stack:', error.stack);
                }
            } else {
                console.error('❌ UnitConverter class not available');
                // Check what's available globally
                console.log('Available global objects:', Object.keys(window).filter(key => key.includes('Unit')));
            }
        }



        // Password generator functions
        function updateLength() {
            const length = document.getElementById('password-length').value;
            document.getElementById('length-value').textContent = length;
        }

        function generatePassword() {
            const length = parseInt(document.getElementById('password-length').value);
            const uppercase = document.getElementById('uppercase').checked;
            const lowercase = document.getElementById('lowercase').checked;
            const numbers = document.getElementById('numbers').checked;
            const symbols = document.getElementById('symbols').checked;

            let charset = '';
            if (uppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (lowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
            if (numbers) charset += '0123456789';
            if (symbols) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';

            if (charset === '') {
                alert('Please select at least one character type');
                return;
            }

            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }

            document.getElementById('generated-password').value = password;
        }

        function copyPassword() {
            const password = document.getElementById('generated-password');
            password.select();
            document.execCommand('copy');
            alert('Password copied to clipboard!');
        }




        function generateDicewarePassphrase() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
                const separator = document.getElementById('word-separator').value;
                const addRandomChars = document.getElementById('add-random-chars').checked;

                const result = window.advancedPasswordGen.generatePassphrase({
                    targetEntropy,
                    separator,
                    addRandomChars
                });

                displayPasswordResult(result);
            } catch (error) {
                alert(`Error generating passphrase: ${error.message}`);
            }
        }

        function generateMultiplePasswords() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = 5; // Generate 5 passwords
                const options = getPasswordOptions();
                
                const results = window.advancedPasswordGen.generateMultiplePasswords(count, options);
                
                if (results.length > 0) {
                    displayMultiplePasswords(results);
                } else {
                    alert('Failed to generate any passwords');
                }
            } catch (error) {
                alert(`Error generating multiple passwords: ${error.message}`);
            }
        }

        function generateMultiplePassphrases() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = 5; // Generate 5 passphrases
                const options = getPassphraseOptions();
                
                const results = window.advancedPasswordGen.generateMultiplePassphrases(count, options);
                
                if (results.length > 0) {
                    displayMultiplePasswords(results);
                } else {
                    alert('Failed to generate any passphrases');
                }
            } catch (error) {
                alert(`Error generating multiple passphrases: ${error.message}`);
            }
        }

        function validatePassword() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const password = document.getElementById('password-to-validate').value;
                if (!password) {
                    alert('Please enter a password to validate');
                    return;
                }

                const assessment = window.advancedPasswordGen.validatePassword(password);
                displayPasswordValidation(assessment);
            } catch (error) {
                alert(`Error validating password: ${error.message}`);
            }
        }

        function getPasswordOptions() {
            const targetEntropy = parseInt(document.getElementById('target-entropy').value);
            const characterSet = document.getElementById('character-set').value;
            const minLength = parseInt(document.getElementById('min-length').value);
            const maxLength = parseInt(document.getElementById('max-length').value);
            const screenBreached = document.getElementById('screen-breached').checked;
            
            const requireUppercase = document.getElementById('require-uppercase').checked;
            const requireLowercase = document.getElementById('require-lowercase').checked;
            const requireDigits = document.getElementById('require-digits').checked;
            const requireSymbols = document.getElementById('require-symbols').checked;

            let alphabet;
            switch (characterSet) {
                case 'full-ascii':
                    alphabet = CharacterSets.FULL_ASCII;
                    break;
                case 'alphanumeric':
                    alphabet = CharacterSets.ALPHANUMERIC;
                    break;
                case 'letters-only':
                    alphabet = CharacterSets.UPPERCASE + CharacterSets.LOWERCASE;
                    break;
                case 'custom':
                    alphabet = document.getElementById('custom-characters').value;
                    break;
                default:
                    alphabet = CharacterSets.FULL_ASCII;
            }

            return {
                targetEntropy,
                alphabet,
                minLength,
                maxLength,
                screenBreached,
                policy: {
                    minLength,
                    maxLength,
                    requireUppercase,
                    requireLowercase,
                    requireDigits,
                    requireSymbols
                }
            };
        }

        function getPassphraseOptions() {
            const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
            const separator = document.getElementById('word-separator').value;
            const addRandomChars = document.getElementById('add-random-chars').checked;

            return {
                targetEntropy,
                separator,
                addRandomChars
            };
        }

        function displayPasswordResult(result) {
            document.getElementById('advanced-generated-password').value = result.password;
            document.getElementById('password-results').classList.remove('hidden');

            const analysisContainer = document.getElementById('password-analysis');
            analysisContainer.innerHTML = `
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Security Analysis</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Entropy:</strong> ${result.entropy.toFixed(1)} bits</div>
                        <div><strong>Strength:</strong> <span class="font-medium text-${getStrengthColor(result.strength)}">${result.strength}</span></div>
                        <div><strong>Length:</strong> ${result.length} characters</div>
                        <div><strong>Mode:</strong> ${result.mode}</div>
                        <div><strong>Breached:</strong> ${result.isBreached ? '❌ Yes' : '✅ No'}</div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Policy Check</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Valid:</strong> ${result.policyCheck.valid ? '✅ Yes' : '❌ No'}</div>
                        ${!result.policyCheck.valid ? `<div><strong>Reason:</strong> ${result.policyCheck.reason}</div>` : ''}
                        <div><strong>Method:</strong> ${result.generationMethod}</div>
                        <div><strong>Generated:</strong> ${new Date(result.timestamp).toLocaleString()}</div>
                    </div>
                </div>
            `;

            if (result.recommendations.length > 0) {
                const recommendationsDiv = document.createElement('div');
                recommendationsDiv.className = 'col-span-2 bg-yellow-50 p-4 rounded border';
                recommendationsDiv.innerHTML = `
                    <h5 class="font-medium text-yellow-800 mb-2">💡 Recommendations</h5>
                    <ul class="text-sm text-yellow-700 space-y-1">
                        ${result.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                    </ul>
                `;
                analysisContainer.appendChild(recommendationsDiv);
            }
        }

        function displayMultiplePasswords(results) {
            const container = document.getElementById('password-analysis');
            container.innerHTML = `
                <div class="col-span-2 bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Generated Passwords</h5>
                    <div class="space-y-2">
                        ${results.map((result, index) => `
                            <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                <span class="font-mono text-sm">${result.password}</span>
                                <div class="text-xs text-gray-600">
                                    ${result.entropy.toFixed(1)} bits • ${result.strength}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function displayPasswordValidation(assessment) {
            const container = document.getElementById('password-analysis');
            container.innerHTML = `
                <div class="col-span-2 bg-white p-4 rounded border">
                <h5 class="font-medium text-gray-800 mb-2">Password Validation Results</h5>
                <div class="space-y-2 text-sm">
                    <div><strong>Entropy:</strong> ${assessment.entropy.toFixed(1)} bits</div>
                    <div><strong>Strength:</strong> <span class="font-medium text-${getStrengthColor(assessment.strength)}">${result.strength}</span></div>
                    <div><strong>Breached:</strong> ${assessment.isBreached ? '❌ Yes' : '✅ No'}</div>
                    <div><strong>Policy:</strong> ${assessment.policyCheck.valid ? '✅ Valid' : '❌ Invalid'}</div>
                    ${!assessment.policyCheck.valid ? `<div><strong>Reason:</strong> ${assessment.policyCheck.reason}</div>` : ''}
                </div>
                ${assessment.recommendations.length > 0 ? `
                    <div class="mt-3 pt-3 border-t">
                        <h6 class="font-medium text-gray-700 mb-2">Recommendations:</h6>
                        <ul class="text-xs text-gray-600 space-y-1">
                            ${assessment.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
            </div>
            `;
        }

        function getStrengthColor(strength) {
            switch (strength) {
                case 'very strong': return 'green-600';
                case 'strong': return 'blue-600';
                case 'moderate': return 'yellow-600';
                case 'weak': return 'red-600';
                default: return 'gray-600';
            }
        }

        function copyAdvancedPassword() {
            const passwordField = document.getElementById('advanced-generated-password');
            passwordField.select();
            document.execCommand('copy');
            
            // Show feedback
            const copyButton = document.querySelector('[onclick="copyAdvancedPassword()"]');
            if (copyButton) {
                const originalText = copyButton.innerHTML;
                copyButton.innerHTML = '✅ Copied!';
                copyButton.classList.add('bg-green-600');
                setTimeout(() => {
                    copyButton.innerHTML = originalText;
                    copyButton.classList.remove('bg-green-600');
                }, 2000);
            }
        }

        function switchPasswordMode(mode) {
            // Hide all modes
            document.querySelectorAll('.password-mode').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.password-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected mode and activate tab
            if (mode === 'characters') {
                document.getElementById('characters-mode').classList.remove('hidden');
                document.getElementById('characters-tab').classList.add('active');
                updateEntropyInfo();
            } else if (mode === 'diceware') {
                document.getElementById('diceware-mode').classList.remove('hidden');
                document.getElementById('diceware-tab').classList.add('active');
                updateDicewareInfo();
            } else if (mode === 'validation') {
                document.getElementById('validation-mode').classList.remove('hidden');
                document.getElementById('validation-tab').classList.add('active');
            }
        }

        function updateEntropyInfo() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const entropyInfo = window.advancedPasswordGen.getEntropyInfo();
                const container = document.getElementById('entropy-info');
                
                let html = '';
                for (const [name, info] of Object.entries(entropyInfo)) {
                    if (name !== 'Diceware (EFF)') {
                        html += `
                            <div class="bg-white p-3 rounded border">
                                <div class="font-medium text-gray-800 mb-2">${name}</div>
                                <div class="text-xs text-gray-600 space-y-1">
                                    <div>Alphabet size: ${info.alphabetSize}</div>
                                    <div>Bits per char: ${info.bitsPerChar.toFixed(1)}</div>
                                    <div>Length for 80 bits: ${result.lengthFor80Bits}</div>
                                    <div>Length for 96 bits: ${result.lengthFor96Bits}</div>
                                    <div>Length for 128 bits: ${result.lengthFor128Bits}</div>
                                </div>
                            </div>
                        `;
                    }
                }
                
                container.innerHTML = html;
            } catch (error) {
                console.error('Error updating entropy info:', error);
            }
        }

        function updateDicewareInfo() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const entropyInfo = window.advancedPasswordGen.getEntropyInfo();
                const dicewareInfo = entropyInfo['Diceware (EFF)'];
                const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
                
                const wordCount = Math.ceil(targetEntropy / dicewareInfo.bitsPerWord);
                const totalEntropy = wordCount * dicewareInfo.bitsPerWord;
                
                document.getElementById('diceware-word-count').textContent = wordCount;
                document.getElementById('diceware-bits-per-word').textContent = dicewareInfo.bitsPerWord.toFixed(1);
                document.getElementById('diceware-total-entropy').textContent = totalEntropy.toFixed(1);
                
                let crackTime = 'Centuries';
                if (totalEntropy < 64) crackTime = 'Days to weeks';
                else if (totalEntropy < 80) crackTime = 'Months to years';
                else if (totalEntropy < 96) crackTime = 'Years to decades';
                
                document.getElementById('diceware-crack-time').textContent = crackTime;
            } catch (error) {
                console.error('Error updating diceware info:', error);
            }
        }

        function updateEntropyInfo() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const entropyInfo = window.advancedPasswordGen.getEntropyInfo();
                const container = document.getElementById('entropy-info');
                
                let html = '';
                for (const [name, info] of Object.entries(entropyInfo)) {
                    if (name !== 'Diceware (EFF)') {
                        html += `
                            <div class="bg-white p-3 rounded border">
                                <div class="font-medium text-gray-800 mb-2">${name}</div>
                                <div class="text-xs text-gray-600 space-y-1">
                                    <div>Alphabet size: ${info.alphabetSize}</div>
                                    <div>Bits per char: ${info.bitsPerChar.toFixed(1)}</div>
                                    <div>Length for 80 bits: ${info.lengthFor80Bits}</div>
                                    <div>Length for 96 bits: ${info.lengthFor96Bits}</div>
                                    <div>Length for 128 bits: ${info.lengthFor128Bits}</div>
                                </div>
                            </div>
                        `;
                    }
                }
                
                container.innerHTML = html;
            } catch (error) {
                console.error('Error updating entropy info:', error);
            }
        }

        function updateDicewareInfo() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const entropyInfo = window.advancedPasswordGen.getEntropyInfo();
                const dicewareInfo = entropyInfo['Diceware (EFF)'];
                const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
                
                const wordCount = Math.ceil(targetEntropy / dicewareInfo.bitsPerWord);
                const totalEntropy = wordCount * dicewareInfo.bitsPerWord;
                
                document.getElementById('diceware-word-count').textContent = wordCount;
                document.getElementById('diceware-bits-per-word').textContent = dicewareInfo.bitsPerWord.toFixed(1);
                document.getElementById('diceware-crack-time').textContent = totalEntropy.toFixed(1);
                
                let crackTime = 'Centuries';
                if (totalEntropy < 64) crackTime = 'Days to weeks';
                else if (totalEntropy < 80) crackTime = 'Months to years';
                else if (totalEntropy < 96) crackTime = 'Years to decades';
                
                document.getElementById('diceware-crack-time').textContent = crackTime;
            } catch (error) {
                console.error('Error updating diceware info:', error);
            }
        }

        // BMI Calculator

        function generateDicewarePassphrase() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
                const separator = document.getElementById('word-separator').value;
                const addRandomChars = document.getElementById('add-random-chars').checked;

                const result = window.advancedPasswordGen.generatePassphrase({
                    targetEntropy,
                    separator,
                    addRandomChars
                });

                displayPasswordResult(result);
            } catch (error) {
                alert(`Error generating passphrase: ${error.message}`);
            }
        }

        function generateMultiplePasswords() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = 5; // Generate 5 passwords
                const options = getPasswordOptions();
                
                const results = window.advancedPasswordGen.generateMultiplePasswords(count, options);
                
                if (results.length > 0) {
                    displayMultiplePasswords(results);
                } else {
                    alert('Failed to generate any passwords');
                }
            } catch (error) {
                alert(`Error generating multiple passwords: ${error.message}`);
            }
        }

        function generateMultiplePassphrases() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const count = 5; // Generate 5 passphrases
                const options = getPassphraseOptions();
                
                const results = window.advancedPasswordGen.generateMultiplePassphrases(count, options);
                
                if (results.length > 0) {
                    displayMultiplePasswords(results);
                } else {
                    alert('Failed to generate any passphrases');
                }
            } catch (error) {
                alert(`Error generating multiple passphrases: ${error.message}`);
            }
        }

        function validatePassword() {
            if (!window.advancedPasswordGen) {
                initializeAdvancedPasswordGenerator();
            }

            try {
                const password = document.getElementById('password-to-validate').value;
                if (!password) {
                    alert('Please enter a password to validate');
                    return;
                }

                const assessment = window.advancedPasswordGen.validatePassword(password);
                displayPasswordValidation(assessment);
            } catch (error) {
                alert(`Error validating password: ${error.message}`);
            }
        }

        function getPasswordOptions() {
            const targetEntropy = parseInt(document.getElementById('target-entropy').value);
            const characterSet = document.getElementById('character-set').value;
            const minLength = parseInt(document.getElementById('min-length').value);
            const maxLength = parseInt(document.getElementById('max-length').value);
            const screenBreached = document.getElementById('screen-breached').checked;
            
            const requireUppercase = document.getElementById('require-uppercase').checked;
            const requireLowercase = document.getElementById('require-lowercase').checked;
            const requireDigits = document.getElementById('require-digits').checked;
            const requireSymbols = document.getElementById('require-symbols').checked;

            let alphabet;
            switch (characterSet) {
                case 'full-ascii':
                    alphabet = CharacterSets.FULL_ASCII;
                    break;
                case 'alphanumeric':
                    alphabet = CharacterSets.ALPHANUMERIC;
                    break;
                case 'letters-only':
                    alphabet = CharacterSets.UPPERCASE + CharacterSets.LOWERCASE;
                    break;
                case 'custom':
                    alphabet = document.getElementById('custom-characters').value;
                    break;
                default:
                    alphabet = CharacterSets.FULL_ASCII;
            }

            return {
                targetEntropy,
                alphabet,
                minLength,
                maxLength,
                screenBreached,
                policy: {
                    minLength,
                    maxLength,
                    requireUppercase,
                    requireLowercase,
                    requireDigits,
                    requireSymbols
                }
            };
        }

        function getPassphraseOptions() {
            const targetEntropy = parseInt(document.getElementById('diceware-entropy').value);
            const separator = document.getElementById('word-separator').value;
            const addRandomChars = document.getElementById('add-random-chars').checked;

            return {
                targetEntropy,
                separator,
                addRandomChars
            };
        }

        function displayPasswordResult(result) {
            document.getElementById('advanced-generated-password').value = result.password;
            document.getElementById('password-results').classList.remove('hidden');

            const analysisContainer = document.getElementById('password-analysis');
            analysisContainer.innerHTML = `
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Security Analysis</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Entropy:</strong> ${result.entropy.toFixed(1)} bits</div>
                        <div><strong>Strength:</strong> <span class="font-medium text-${getStrengthColor(result.strength)}">${result.strength}</span></div>
                        <div><strong>Length:</strong> ${result.length} characters</div>
                        <div><strong>Mode:</strong> ${result.mode}</div>
                        <div><strong>Breached:</strong> ${result.isBreached ? '❌ Yes' : '✅ No'}</div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Policy Check</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Valid:</strong> ${result.policyCheck.valid ? '✅ Yes' : '❌ No'}</div>
                        ${!result.policyCheck.valid ? `<div><strong>Reason:</strong> ${result.policyCheck.reason}</div>` : ''}
                        <div><strong>Method:</strong> ${result.generationMethod}</div>
                        <div><strong>Generated:</strong> ${new Date(result.timestamp).toLocaleString()}</div>
                    </div>
                </div>
            `;

            if (result.recommendations.length > 0) {
                const recommendationsDiv = document.createElement('div');
                recommendationsDiv.className = 'col-span-2 bg-yellow-50 p-4 rounded border';
                recommendationsDiv.innerHTML = `
                    <h5 class="font-medium text-yellow-800 mb-2">💡 Recommendations</h5>
                    <ul class="text-sm text-yellow-700 space-y-1">
                        ${result.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                    </ul>
                `;
                analysisContainer.appendChild(recommendationsDiv);
            }
        }

        function displayMultiplePasswords(results) {
            const container = document.getElementById('password-analysis');
            container.innerHTML = `
                <div class="col-span-2 bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Generated Passwords</h5>
                    <div class="space-y-2">
                        ${results.map((result, index) => `
                            <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                <span class="font-mono text-sm">${result.password}</span>
                                <div class="text-xs text-gray-600">
                                    ${result.entropy.toFixed(1)} bits • ${result.strength}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function displayPasswordValidation(assessment) {
            const container = document.getElementById('password-analysis');
            container.innerHTML = `
                <div class="col-span-2 bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Password Validation Results</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Entropy:</strong> ${assessment.entropy.toFixed(1)} bits</div>
                        <div><strong>Strength:</strong> <span class="font-medium text-${getStrengthColor(assessment.strength)}">${assessment.strength}</span></div>
                        <div><strong>Breached:</strong> ${assessment.isBreached ? '❌ Yes' : '✅ No'}</div>
                        <div><strong>Policy:</strong> ${assessment.policyCheck.valid ? '✅ Valid' : '❌ Invalid'}</div>
                        ${!assessment.policyCheck.valid ? `<div><strong>Reason:</strong> ${assessment.policyCheck.reason}</div>` : ''}
                    </div>
                    ${assessment.recommendations.length > 0 ? `
                        <div class="mt-3 pt-3 border-t">
                            <h6 class="font-medium text-gray-700 mb-2">Recommendations:</h6>
                            <ul class="text-xs text-gray-600 space-y-1">
                                ${assessment.recommendations.map(rec => `<li>• ${rec}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function getStrengthColor(strength) {
            switch (strength) {
                case 'very strong': return 'green-600';
                case 'strong': return 'blue-600';
                case 'moderate': return 'yellow-600';
                case 'weak': return 'red-600';
                default: return 'gray-600';
            }
        }

        function copyAdvancedPassword() {
            const passwordField = document.getElementById('advanced-generated-password');
            passwordField.select();
            document.execCommand('copy');
            
            // Show feedback
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = 'Copied!';
            button.classList.add('text-green-600');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('text-green-600');
            }, 2000);
        }

        // Handle custom character set input
        document.addEventListener('DOMContentLoaded', function() {
            const characterSetSelect = document.getElementById('character-set');
            const customCharsDiv = document.getElementById('custom-chars');
            
            if (characterSetSelect && customCharsDiv) {
                characterSetSelect.addEventListener('change', function() {
                    if (this.value === 'custom') {
                        customCharsDiv.classList.remove('hidden');
                    } else {
                        customCharsDiv.classList.add('hidden');
                    }
                });
            }

            // Update diceware info when entropy changes
            const dicewareEntropy = document.getElementById('diceware-entropy');
            if (dicewareEntropy) {
                dicewareEntropy.addEventListener('change', updateDicewareInfo);
            }

            // Initialize entropy info
            setTimeout(updateEntropyInfo, 100);
        });

        // BMI Calculator
        function calculateBMI() {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);

            if (!height || !weight) {
                alert('Please enter both height and weight');
                return;
            }

            const bmi = weight / ((height / 100) ** 2);
            const bmiValue = bmi.toFixed(1);

            let category, description;
            if (bmi < 18.5) {
                category = 'Underweight';
                description = 'You may need to gain some weight';
            } else if (bmi < 25) {
                category = 'Normal weight';
                description = 'You have a healthy weight';
            } else if (bmi < 30) {
                category = 'Overweight';
                description = 'You may need to lose some weight';
            } else {
                category = 'Obese';
                description = 'Consider consulting a healthcare provider';
            }

            document.getElementById('bmi-value').textContent = bmiValue;
            document.getElementById('bmi-category').textContent = category;
            document.getElementById('bmi-description').textContent = description;
            document.getElementById('bmi-result').classList.remove('hidden');
        }















        // Display QR Code Result


        // Display QR Code Analysis
        window.displayQRAnalysis = function(info) {
            const container = document.getElementById('qr-analysis');
            container.innerHTML = `
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">QR Code Requirements</h5>
                    <div class="space-y-2 text-sm">
                        <div><strong>Version:</strong> ${info.version}</div>
                        <div><strong>Matrix Size:</strong> ${info.matrixSize}×${info.matrixSize} modules</div>
                        <div><strong>Error Correction:</strong> ${info.errorCorrectionLevel}</div>
                        <div><strong>Data Capacity:</strong> ${info.dataCapacity} codewords</div>
                        <div><strong>Total Codewords:</strong> ${info.totalCodewords}</div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded border">
                    <h5 class="font-medium text-gray-800 mb-2">Encoding Segments</h5>
                    <div class="space-y-2 text-sm">
                        ${info.segments.map(seg => `
                            <div class="border-b pb-1">
                                <div><strong>Mode:</strong> ${seg.mode}</div>
                                <div><strong>Data:</strong> ${seg.data}</div>
                                <div><strong>Length:</strong> ${seg.length} characters</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }



        // Word Counter
        function countWords() {
            const text = document.getElementById('word-text').value;
            
            const words = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            const characters = text.length;
            const charactersNoSpace = text.replace(/\s/g, '').length;
            const paragraphs = text.trim() === '' ? 0 : text.split(/\n\s*\n/).length;

            document.getElementById('word-count').textContent = words;
            document.getElementById('char-count').textContent = characters;
            document.getElementById('char-no-space').textContent = charactersNoSpace;
            document.getElementById('paragraph-count').textContent = paragraphs;
        }

        // Contact form
        function showContactSuccess() {
            alert('Thank you for your message! We\'ll get back to you soon.');
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Parallax effect for floating orbs
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const orbs = document.querySelectorAll('.floating-orb');
            orbs.forEach((orb, index) => {
                const speed = 0.3 + (index * 0.1);
                orb.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });

    </script>
</body>
</html>
