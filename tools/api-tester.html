<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>API Testing Suite - FreeToolHub</title>
    <meta name="description" content="Test REST APIs with comprehensive features including headers, authentication, request body, and response analysis. Professional API testing tool for developers.">
    <meta property="og:title" content="API Testing Suite - FreeToolHub">
    <meta property="og:description" content="Test REST APIs with comprehensive features including headers, authentication, and response analysis">
    <meta property="og:url" content="https://freetoolhub.in/tools/api-tester.html">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .method-select {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .status-success { color: #10b981; }
        .status-error { color: #ef4444; }
        .status-info { color: #3b82f6; }
        .status-warning { color: #f59e0b; }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .json-key { color: #0ea5e9; }
        .json-string { color: #10b981; }
        .json-number { color: #f59e0b; }
        .json-boolean { color: #8b5cf6; }
        .json-null { color: #ef4444; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Header Container -->
    <div id="app-header"></div>
    
    <!-- Main Content -->
    <main class="min-h-screen pb-16" style="padding-top: 6rem;">
        <style>
            @media (min-width: 1024px) {
                main {
                    padding-top: 8.5rem !important;
                }
            }
        </style>
        <div class="max-w-7xl mx-auto px-6 py-8">
            <!-- Page Header with Share -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">üîê API Testing Suite</h1>
                    <p class="text-gray-600 text-lg">Test REST APIs with comprehensive features including headers, authentication, and response analysis</p>
                </div>
                <button onclick="shareTool()" class="mt-4 md:mt-0 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.885 12.938 9 12.482 9 12c0-.482-.115-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                    </svg>
                    Share Tool
                </button>
            </div>
            
            <!-- Breadcrumbs -->
            <nav class="mb-6 text-sm">
                <a href="/" class="text-blue-600 hover:text-blue-800">Home</a>
                <span class="mx-2 text-gray-400">/</span>
                <a href="/#tools" class="text-blue-600 hover:text-blue-800">Tools</a>
                <span class="mx-2 text-gray-400">/</span>
                <span class="text-gray-600">API Testing Suite</span>
            </nav>
            
            <!-- Tool Interface -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Main Content -->
                <div class="lg:col-span-3 space-y-6">
            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <!-- Request Section -->
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">üì§ Request</h2>
                    
                    <!-- Method and URL -->
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-3 mb-4">
                        <div class="md:col-span-2">
                            <select id="http-method" class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-bold text-white method-select">
                                <option value="GET">GET</option>
                                <option value="POST">POST</option>
                                <option value="PUT">PUT</option>
                                <option value="PATCH">PATCH</option>
                                <option value="DELETE">DELETE</option>
                            </select>
                        </div>
                        <div class="md:col-span-8">
                            <input type="url" id="api-url" placeholder="https://api.example.com/endpoint" class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm">
                        </div>
                        <div class="md:col-span-2">
                            <button onclick="sendRequest()" class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg">
                                ‚ñ∂ Send
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Examples -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-600 mb-2">Quick Examples:</label>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="loadExample('jsonplaceholder')" class="text-xs bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded-lg transition-all">JSONPlaceholder</button>
                            <button onclick="loadExample('httpbin')" class="text-xs bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded-lg transition-all">HTTPBin</button>
                            <button onclick="loadExample('reqres')" class="text-xs bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded-lg transition-all">ReqRes</button>
                            <button onclick="loadExample('clear')" class="text-xs bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg transition-all">Clear</button>
                        </div>
                    </div>
                </div>
                
                <!-- Tabs for Request Details -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200 mb-4">
                        <button onclick="switchTab('headers')" id="tab-headers" class="px-6 py-3 font-semibold text-gray-700 border-b-2 border-purple-500 tab-button active">Headers</button>
                        <button onclick="switchTab('body')" id="tab-body" class="px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 tab-button">Body</button>
                        <button onclick="switchTab('auth')" id="tab-auth" class="px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 tab-button">Authentication</button>
                        <button onclick="switchTab('history')" id="tab-history" class="px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 tab-button">History</button>
                    </div>
                    
                    <!-- Headers Tab -->
                    <div id="panel-headers" class="tab-panel">
                        <div class="space-y-3">
                            <div id="headers-list">
                                <div class="grid grid-cols-12 gap-3 mb-3">
                                    <div class="col-span-5">
                                        <input type="text" placeholder="Header name" class="header-key w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div class="col-span-6">
                                        <input type="text" placeholder="Header value" class="header-value w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div class="col-span-1">
                                        <button onclick="removeHeader(this)" class="w-full bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg">√ó</button>
                                    </div>
                                </div>
                            </div>
                            <button onclick="addHeader()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-all">
                                + Add Header
                            </button>
                            <div class="mt-3 p-3 bg-blue-50 rounded-lg">
                                <p class="text-sm text-blue-800">
                                    <strong>Common Headers:</strong> Content-Type: application/json | Authorization: Bearer token | Accept: application/json
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Body Tab -->
                    <div id="panel-body" class="tab-panel hidden">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Request Body:</label>
                            <select id="body-type" class="mb-3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="none">None</option>
                                <option value="json">JSON</option>
                                <option value="text">Raw Text</option>
                                <option value="form">Form Data</option>
                            </select>
                            <div id="body-editor-container">
                                <textarea id="request-body" placeholder='{"key": "value"}' class="w-full h-48 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm resize-none"></textarea>
                            </div>
                            <div id="form-data-container" class="hidden mt-3">
                                <div id="form-data-list" class="space-y-2">
                                    <div class="grid grid-cols-12 gap-2">
                                        <input type="text" placeholder="Key" class="form-key col-span-5 px-3 py-2 border border-gray-300 rounded-lg">
                                        <input type="text" placeholder="Value" class="form-value col-span-6 px-3 py-2 border border-gray-300 rounded-lg">
                                        <button onclick="removeFormField(this)" class="col-span-1 bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg">√ó</button>
                                    </div>
                                </div>
                                <button onclick="addFormField()" class="mt-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition-all">
                                    + Add Field
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Auth Tab -->
                    <div id="panel-auth" class="tab-panel hidden">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Authentication Type:</label>
                                <select id="auth-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <option value="none">None</option>
                                    <option value="bearer">Bearer Token</option>
                                    <option value="apikey">API Key</option>
                                    <option value="basic">Basic Auth</option>
                                </select>
                            </div>
                            
                            <div id="auth-bearer" class="auth-config hidden">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Bearer Token:</label>
                                <input type="text" id="bearer-token" placeholder="your-token-here" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                            
                            <div id="auth-apikey" class="auth-config hidden">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">API Key:</label>
                                <div class="grid grid-cols-2 gap-3 mb-2">
                                    <input type="text" id="apikey-name" placeholder="X-API-Key" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <input type="text" id="apikey-value" placeholder="your-api-key" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                </div>
                                <select id="apikey-location" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <option value="header">Header</option>
                                    <option value="query">Query Parameter</option>
                                </select>
                            </div>
                            
                            <div id="auth-basic" class="auth-config hidden">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Basic Auth:</label>
                                <div class="grid grid-cols-2 gap-3">
                                    <input type="text" id="basic-username" placeholder="Username" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <input type="password" id="basic-password" placeholder="Password" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- History Tab -->
                    <div id="panel-history" class="tab-panel hidden">
                        <div class="space-y-2">
                            <div class="flex justify-between items-center mb-3">
                                <label class="block text-sm font-semibold text-gray-700">Request History:</label>
                                <button onclick="clearHistory()" class="text-sm text-red-600 hover:text-red-800 underline">Clear History</button>
                            </div>
                            <div id="history-list" class="space-y-2 max-h-64 overflow-y-auto">
                                <!-- History items will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Response Section -->
            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üì• Response</h2>
                
                <div id="response-loading" class="hidden text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
                    <p class="mt-2 text-gray-600">Sending request...</p>
                </div>
                
                <div id="response-content" class="hidden">
                    <!-- Status and Info -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600 mb-1">Status Code</div>
                            <div id="response-status" class="text-2xl font-bold">-</div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600 mb-1">Response Time</div>
                            <div id="response-time" class="text-2xl font-bold">-</div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600 mb-1">Size</div>
                            <div id="response-size" class="text-2xl font-bold">-</div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600 mb-1">Content Type</div>
                            <div id="response-type" class="text-lg font-semibold">-</div>
                        </div>
                    </div>
                    
                    <!-- Response Tabs -->
                    <div class="mb-4">
                        <div class="flex border-b border-gray-200">
                            <button onclick="switchResponseTab('body')" id="res-tab-body" class="px-6 py-3 font-semibold text-gray-700 border-b-2 border-purple-500 res-tab-button active">Body</button>
                            <button onclick="switchResponseTab('headers')" id="res-tab-headers" class="px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 res-tab-button">Headers</button>
                        </div>
                    </div>
                    
                    <!-- Response Body -->
                    <div id="res-panel-body" class="res-panel">
                        <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                            <pre id="response-body" class="text-green-400 font-mono text-sm"></pre>
                        </div>
                        <div class="mt-3 flex gap-2">
                            <button onclick="copyResponse()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all">
                                üìã Copy Response
                            </button>
                            <button onclick="formatResponse()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-all">
                                ‚ú® Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <!-- Response Headers -->
                    <div id="res-panel-headers" class="res-panel hidden">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <pre id="response-headers" class="text-gray-800 font-mono text-sm"></pre>
                        </div>
                    </div>
                </div>
                
                <div id="response-empty" class="text-center py-12 text-gray-400">
                    <div class="text-6xl mb-4">üì°</div>
                    <p class="text-lg">Send a request to see the response here</p>
                </div>
            </div>
                </div>
                
                <!-- Explore Tools Sidebar -->
                <div class="lg:col-span-1 hidden lg:block">
                    <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6 border-2 border-purple-200 shadow-lg h-fit sticky top-28">
                        <div class="flex items-center justify-between mb-5">
                            <h4 class="text-xl font-bold text-gray-800">‚ú® Explore Tools</h4>
                            <div class="flex items-center space-x-1">
                                <div class="w-2.5 h-2.5 bg-purple-500 rounded-full animate-pulse"></div>
                                <span class="text-xs text-gray-500 font-medium">Live</span>
                            </div>
                        </div>
                        
                        <div id="tool-suggestion-card" class="bg-white rounded-xl p-6 shadow-lg transition-all duration-500 fade-in">
                            <div id="tool-icon" class="text-6xl mb-4 text-center">üßÆ</div>
                            <h5 id="tool-name" class="text-2xl font-bold text-gray-800 mb-3 text-center">Loading...</h5>
                            <p id="tool-description" class="text-base text-gray-600 mb-6 text-center leading-relaxed">Discover amazing tools</p>
                            <button id="tool-checkout-btn" onclick="launchSuggestedTool()" class="w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white font-bold py-3.5 px-6 rounded-xl hover:from-purple-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 text-lg">
                                <span>Check it out</span>
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <div id="app-footer"></div>
    
    <!-- Scripts -->
    <script src="/js/components/HeaderLoader.js"></script>
    <script src="/js/components/FooterLoader.js"></script>
    <script src="/js/components/ShareButton.js"></script>
    <script src="/js/components/SeasonalEffects.js"></script>
    
    <script>
        // Tab Management
        function switchTab(tab) {
            // Hide all panels
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.add('hidden'));
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'border-purple-500', 'text-gray-700');
                btn.classList.add('text-gray-500');
            });
            
            // Show selected panel
            document.getElementById(`panel-${tab}`).classList.remove('hidden');
            document.getElementById(`tab-${tab}`).classList.add('active', 'border-purple-500', 'text-gray-700');
            document.getElementById(`tab-${tab}`).classList.remove('text-gray-500');
        }
        
        function switchResponseTab(tab) {
            document.querySelectorAll('.res-panel').forEach(panel => panel.classList.add('hidden'));
            document.querySelectorAll('.res-tab-button').forEach(btn => {
                btn.classList.remove('active', 'border-purple-500', 'text-gray-700');
                btn.classList.add('text-gray-500');
            });
            
            document.getElementById(`res-panel-${tab}`).classList.remove('hidden');
            document.getElementById(`res-tab-${tab}`).classList.add('active', 'border-purple-500', 'text-gray-700');
            document.getElementById(`res-tab-${tab}`).classList.remove('text-gray-500');
        }
        
        // Header Management
        function addHeader() {
            const headersList = document.getElementById('headers-list');
            const newHeader = document.createElement('div');
            newHeader.className = 'grid grid-cols-12 gap-3 mb-3';
            newHeader.innerHTML = `
                <div class="col-span-5">
                    <input type="text" placeholder="Header name" class="header-key w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="col-span-6">
                    <input type="text" placeholder="Header value" class="header-value w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="col-span-1">
                    <button onclick="removeHeader(this)" class="w-full bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg">√ó</button>
                </div>
            `;
            headersList.appendChild(newHeader);
        }
        
        function removeHeader(btn) {
            btn.closest('.grid').remove();
        }
        
        // Form Data Management
        function addFormField() {
            const formList = document.getElementById('form-data-list');
            const newField = document.createElement('div');
            newField.className = 'grid grid-cols-12 gap-2';
            newField.innerHTML = `
                <input type="text" placeholder="Key" class="form-key col-span-5 px-3 py-2 border border-gray-300 rounded-lg">
                <input type="text" placeholder="Value" class="form-value col-span-6 px-3 py-2 border border-gray-300 rounded-lg">
                <button onclick="removeFormField(this)" class="col-span-1 bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg">√ó</button>
            `;
            formList.appendChild(newField);
        }
        
        function removeFormField(btn) {
            btn.closest('.grid').remove();
        }
        
        // Body Type Management
        document.getElementById('body-type').addEventListener('change', function() {
            const bodyType = this.value;
            const bodyEditor = document.getElementById('body-editor-container');
            const formDataContainer = document.getElementById('form-data-container');
            
            if (bodyType === 'form') {
                bodyEditor.classList.add('hidden');
                formDataContainer.classList.remove('hidden');
            } else {
                bodyEditor.classList.remove('hidden');
                formDataContainer.classList.add('hidden');
            }
        });
        
        // Auth Type Management
        document.getElementById('auth-type').addEventListener('change', function() {
            const authType = this.value;
            document.querySelectorAll('.auth-config').forEach(config => config.classList.add('hidden'));
            
            if (authType === 'bearer') {
                document.getElementById('auth-bearer').classList.remove('hidden');
            } else if (authType === 'apikey') {
                document.getElementById('auth-apikey').classList.remove('hidden');
            } else if (authType === 'basic') {
                document.getElementById('auth-basic').classList.remove('hidden');
            }
        });
        
        // Load Examples
        function loadExample(type) {
            const urlInput = document.getElementById('api-url');
            const methodSelect = document.getElementById('http-method');
            
            if (type === 'clear') {
                urlInput.value = '';
                methodSelect.value = 'GET';
                document.getElementById('request-body').value = '';
                return;
            }
            
            const examples = {
                jsonplaceholder: {
                    url: 'https://jsonplaceholder.typicode.com/posts/1',
                    method: 'GET'
                },
                httpbin: {
                    url: 'https://httpbin.org/get',
                    method: 'GET'
                },
                reqres: {
                    url: 'https://reqres.in/api/users/2',
                    method: 'GET'
                }
            };
            
            if (examples[type]) {
                urlInput.value = examples[type].url;
                methodSelect.value = examples[type].method;
            }
        }
        
        // Send Request
        async function sendRequest() {
            const method = document.getElementById('http-method').value;
            const url = document.getElementById('api-url').value.trim();
            
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            
            // Show loading
            document.getElementById('response-loading').classList.remove('hidden');
            document.getElementById('response-content').classList.add('hidden');
            document.getElementById('response-empty').classList.add('hidden');
            
            const startTime = performance.now();
            
            try {
                // Build headers
                const headers = {};
                document.querySelectorAll('.header-key').forEach((keyInput, index) => {
                    const key = keyInput.value.trim();
                    const valueInput = keyInput.parentElement.nextElementSibling.querySelector('.header-value');
                    const value = valueInput.value.trim();
                    if (key && value) {
                        headers[key] = value;
                    }
                });
                
                // Add authentication headers
                const authType = document.getElementById('auth-type').value;
                if (authType === 'bearer') {
                    const token = document.getElementById('bearer-token').value.trim();
                    if (token) {
                        headers['Authorization'] = `Bearer ${token}`;
                    }
                } else if (authType === 'apikey') {
                    const keyName = document.getElementById('apikey-name').value.trim();
                    const keyValue = document.getElementById('apikey-value').value.trim();
                    const keyLocation = document.getElementById('apikey-location').value;
                    if (keyName && keyValue) {
                        if (keyLocation === 'header') {
                            headers[keyName] = keyValue;
                        } else {
                            // Add to URL as query parameter
                            const urlObj = new URL(url);
                            urlObj.searchParams.set(keyName, keyValue);
                            document.getElementById('api-url').value = urlObj.toString();
                        }
                    }
                } else if (authType === 'basic') {
                    const username = document.getElementById('basic-username').value.trim();
                    const password = document.getElementById('basic-password').value.trim();
                    if (username && password) {
                        const credentials = btoa(`${username}:${password}`);
                        headers['Authorization'] = `Basic ${credentials}`;
                    }
                }
                
                // Build request options
                const options = {
                    method: method,
                    headers: headers
                };
                
                // Add body if needed
                const bodyType = document.getElementById('body-type').value;
                if (['POST', 'PUT', 'PATCH'].includes(method) && bodyType !== 'none') {
                    if (bodyType === 'json') {
                        const body = document.getElementById('request-body').value;
                        if (body) {
                            options.body = body;
                            if (!headers['Content-Type']) {
                                headers['Content-Type'] = 'application/json';
                            }
                        }
                    } else if (bodyType === 'text') {
                        options.body = document.getElementById('request-body').value;
                    } else if (bodyType === 'form') {
                        const formData = new URLSearchParams();
                        document.querySelectorAll('.form-key').forEach((keyInput, index) => {
                            const key = keyInput.value.trim();
                            const valueInput = keyInput.parentElement.querySelector('.form-value');
                            const value = valueInput.value.trim();
                            if (key && value) {
                                formData.append(key, value);
                            }
                        });
                        options.body = formData.toString();
                        if (!headers['Content-Type']) {
                            headers['Content-Type'] = 'application/x-www-form-urlencoded';
                        }
                    }
                }
                
                // Make request
                const response = await fetch(url, options);
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);
                
                // Get response data
                const responseText = await response.text();
                const responseSize = new Blob([responseText]).size;
                
                // Display response
                displayResponse(response, responseText, responseTime, responseSize);
                
                // Save to history
                saveToHistory(method, url, response.status, responseTime);
                loadHistory();
                
            } catch (error) {
                document.getElementById('response-loading').classList.add('hidden');
                document.getElementById('response-content').classList.remove('hidden');
                document.getElementById('response-empty').classList.add('hidden');
                
                document.getElementById('response-status').textContent = 'Error';
                document.getElementById('response-status').className = 'text-2xl font-bold status-error';
                document.getElementById('response-time').textContent = '-';
                document.getElementById('response-size').textContent = '-';
                document.getElementById('response-type').textContent = '-';
                document.getElementById('response-body').textContent = `Error: ${error.message}`;
                document.getElementById('response-headers').textContent = 'No headers available';
            }
        }
        
        // Display Response
        function displayResponse(response, responseText, responseTime, responseSize) {
            document.getElementById('response-loading').classList.add('hidden');
            document.getElementById('response-content').classList.remove('hidden');
            document.getElementById('response-empty').classList.add('hidden');
            
            // Status
            const status = response.status;
            const statusEl = document.getElementById('response-status');
            statusEl.textContent = status;
            statusEl.className = 'text-2xl font-bold';
            if (status >= 200 && status < 300) {
                statusEl.classList.add('status-success');
            } else if (status >= 400 && status < 500) {
                statusEl.classList.add('status-error');
            } else if (status >= 500) {
                statusEl.classList.add('status-error');
            } else {
                statusEl.classList.add('status-info');
            }
            
            // Time and Size
            document.getElementById('response-time').textContent = `${responseTime}ms`;
            document.getElementById('response-size').textContent = formatBytes(responseSize);
            
            // Content Type
            const contentType = response.headers.get('content-type') || 'unknown';
            document.getElementById('response-type').textContent = contentType.split(';')[0];
            
            // Headers
            const headersText = Array.from(response.headers.entries())
                .map(([key, value]) => `${key}: ${value}`)
                .join('\n');
            document.getElementById('response-headers').textContent = headersText || 'No headers';
            
            // Body
            let bodyText = responseText;
            try {
                // Try to parse as JSON
                const json = JSON.parse(responseText);
                bodyText = JSON.stringify(json, null, 2);
            } catch (e) {
                // Not JSON, use as-is
            }
            document.getElementById('response-body').textContent = bodyText;
        }
        
        // Format Bytes
        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }
        
        // Copy Response
        function copyResponse() {
            const responseText = document.getElementById('response-body').textContent;
            navigator.clipboard.writeText(responseText).then(() => {
                alert('Response copied to clipboard!');
            });
        }
        
        // Format Response
        function formatResponse() {
            const bodyText = document.getElementById('response-body').textContent;
            try {
                const json = JSON.parse(bodyText);
                document.getElementById('response-body').textContent = JSON.stringify(json, null, 2);
            } catch (e) {
                alert('Response is not valid JSON');
            }
        }
        
        // History Management
        function saveToHistory(method, url, status, time) {
            const history = JSON.parse(localStorage.getItem('api-tester-history') || '[]');
            history.unshift({
                method,
                url,
                status,
                time,
                timestamp: new Date().toISOString()
            });
            // Keep only last 50 requests
            if (history.length > 50) {
                history.pop();
            }
            localStorage.setItem('api-tester-history', JSON.stringify(history));
        }
        
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('api-tester-history') || '[]');
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<p class="text-gray-500 text-center py-4">No request history</p>';
                return;
            }
            
            history.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'bg-gray-50 p-3 rounded-lg hover:bg-gray-100 cursor-pointer transition-all';
                historyItem.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="bg-purple-500 text-white px-2 py-1 rounded text-xs font-bold">${item.method}</span>
                            <span class="text-sm font-mono text-gray-700 truncate flex-1">${item.url}</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-xs ${item.status >= 200 && item.status < 300 ? 'text-green-600' : 'text-red-600'}">${item.status}</span>
                            <span class="text-xs text-gray-500">${item.time}ms</span>
                            <button onclick="loadHistoryItem(${index})" class="text-blue-600 hover:text-blue-800 text-sm">Load</button>
                        </div>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        function loadHistoryItem(index) {
            const history = JSON.parse(localStorage.getItem('api-tester-history') || '[]');
            const item = history[index];
            if (item) {
                document.getElementById('http-method').value = item.method;
                document.getElementById('api-url').value = item.url;
                switchTab('headers');
            }
        }
        
        function clearHistory() {
            if (confirm('Are you sure you want to clear all request history?')) {
                localStorage.removeItem('api-tester-history');
                loadHistory();
            }
        }
        
        // Share Tool
        function shareTool() {
            if (navigator.share) {
                navigator.share({
                    title: 'API Testing Suite - FreeToolHub',
                    text: 'Check out this amazing API Testing Suite!',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Link copied to clipboard!');
                });
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadHistory();
            switchTab('headers');
            setTimeout(initToolSuggestions, 1000);
        });
        
        // Tool Suggestions Widget Script
        const availableTools = [
            { icon: 'üßÆ', name: 'Smart Calculator', description: 'Advanced calculator with scientific functions', pageUrl: '/tools/calculator.html' },
            { icon: '‚è∞', name: 'Study Timer', description: 'Pomodoro technique with focus sessions', pageUrl: '/tools/study-timer.html' },
            { icon: 'üìù', name: 'Note Taker', description: 'Advanced text summarization & notes', pageUrl: '/tools/note-taker.html' },
            { icon: 'üßÆ', name: 'Math Solver', description: 'Step-by-step math problem solving', pageUrl: '/tools/math-solver.html' },
            { icon: 'üìä', name: 'Grade Calculator', description: 'GPA tracking & academic analysis', pageUrl: '/tools/grade-calculator.html' },
            { icon: 'üìñ', name: 'Citation Generator', description: 'Multiple citation formats & styles', pageUrl: '/tools/citation-generator.html' },
            { icon: 'üéØ', name: 'Study Planner', description: 'Study scheduling & time management', pageUrl: '/tools/study-planner.html' },
            { icon: 'üìö', name: 'Flashcard Generator', description: 'Spaced repetition learning cards', pageUrl: '/tools/flashcard-generator.html' },
            { icon: 'üìà', name: 'Progress Tracker', description: 'Academic progress & analytics', pageUrl: '/tools/progress-tracker.html' },
            { icon: 'üéÇ', name: 'Age Calculator', description: 'Precise age & date calculations', pageUrl: '/tools/age-calculator.html' },
            { icon: '‚öñÔ∏è', name: 'BMI Calculator', description: 'Health analysis & recommendations', pageUrl: '/tools/bmi-calculator.html' },
            { icon: 'üè¶', name: 'Loan Calculator', description: 'Professional loan calculation & analysis', pageUrl: '/tools/loan-calculator.html' },
            { icon: 'üíº', name: 'Investment Calculator', description: 'Investment returns & projections', pageUrl: '/tools/investment-calculator.html' },
            { icon: 'üí∞', name: 'Tax Calculator', description: 'Tax calculation & planning', pageUrl: '/tools/tax-calculator.html' },
            { icon: 'üìä', name: 'Business Metrics', description: 'Business performance analytics', pageUrl: '/tools/business-metrics.html' },
            { icon: 'üí±', name: 'Currency Converter', description: 'Real-time currency conversion', pageUrl: '/tools/currency-converter.html' },
            { icon: 'üè†', name: 'Retirement Planner', description: 'Retirement savings calculator', pageUrl: '/tools/retirement-calculator.html' },
            { icon: 'üè°', name: 'Mortgage Calculator', description: 'Mortgage payment calculations', pageUrl: '/tools/mortgage-calculator.html' },
            { icon: 'üí≥', name: 'Budget Planner', description: 'Personal budget planning tool', pageUrl: '/tools/budget-planner.html' },
            { icon: 'üíµ', name: 'Salary Calculator', description: 'Salary & tax calculations', pageUrl: '/tools/salary-calculator.html' },
            { icon: 'üîß', name: 'JSON Formatter', description: 'Format & validate JSON data', pageUrl: '/tools/json-formatter.html' },
            { icon: 'üîê', name: 'API Testing Suite', description: 'Test REST APIs with headers & auth', pageUrl: '/tools/api-tester.html' },
            { icon: 'üìÑ', name: 'XML Formatter', description: 'Format & validate XML data', pageUrl: '/tools/xml-formatter.html' },
            { icon: 'üîê', name: 'Base64 Encoder', description: 'Encode & decode Base64 data', pageUrl: '/tools/base64-encoder.html' },
            { icon: 'üîê', name: 'Hash Generator', description: 'Generate multiple hash types', pageUrl: '/tools/hash-generator.html' },
            { icon: 'üåê', name: 'URL Encoder', description: 'Encode & decode URLs', pageUrl: '/tools/url-encoder.html' },
            { icon: 'üîç', name: 'Regex Tester', description: 'Test & debug regex patterns', pageUrl: '/tools/regex-tester.html' },
            { icon: 'üõ†Ô∏è', name: 'CSS/JS Minifier', description: 'Minify CSS & JavaScript code', pageUrl: '/tools/css-js-minifier.html' },
            { icon: 'üé®', name: 'Color Palette', description: 'Generate beautiful color palettes', pageUrl: '/tools/color-palette.html' },
            { icon: 'üìù', name: 'Lorem Ipsum', description: 'Generate Lorem Ipsum text', pageUrl: '/tools/lorem-ipsum.html' },
            { icon: 'üïê', name: 'Timestamp Converter', description: 'Convert timestamps & dates', pageUrl: '/tools/timestamp-converter.html' },
            { icon: 'üîì', name: 'PDF Password Remover', description: 'Remove password from PDFs', pageUrl: '/tools/pdf-password-remover.html' },
            { icon: 'üìÑ', name: 'PDF Merger', description: 'Combine multiple PDFs', pageUrl: '/tools/pdf-merger.html' },
            { icon: '‚úÇÔ∏è', name: 'PDF Splitter', description: 'Split PDFs into separate pages', pageUrl: '/tools/pdf-splitter.html' },
            { icon: 'üîí', name: 'PDF Encryptor', description: 'Add password to PDFs', pageUrl: '/tools/pdf-encryptor.html' },
            { icon: 'üñºÔ∏è', name: 'PDF to Images', description: 'Convert PDF pages to images', pageUrl: '/tools/pdf-to-images.html' },
            { icon: 'üì∏', name: 'Image to PDF', description: 'Convert images to PDF documents', pageUrl: '/tools/image-to-pdf.html' },
            { icon: 'üìè', name: 'Image Compressor', description: 'Reduce image file size', pageUrl: '/tools/image-compressor.html' },
            { icon: 'üé®', name: 'Image Converter', description: 'Convert between image formats', pageUrl: '/tools/image-converter.html' },
            { icon: 'üìê', name: 'Image Resizer', description: 'Resize images to any dimensions', pageUrl: '/tools/image-resizer.html' },
            { icon: '‚úçÔ∏è', name: 'Signature Generator', description: 'Create digital signatures', pageUrl: '/tools/signature-generator.html' },
            { icon: 'üìä', name: 'CSV to JSON', description: 'Convert CSV to JSON format', pageUrl: '/tools/csv-json-converter.html' },
            { icon: '‚ö°', name: 'Internet Speed Test', description: 'Test your download, upload speed & ping', pageUrl: '/tools/internet-speed-test.html' },
            { icon: 'üóÑÔ∏è', name: 'SQL Query Tool', description: 'Test, format & analyze SQL queries', pageUrl: '/tools/sql-query-tool.html' }
        ];
        
        let currentToolIndex = -1;
        let refreshInterval = null;
        
        function getRandomTool() {
            // Filter out current tool (API Testing Suite)
            const filteredTools = availableTools.filter(tool => 
                tool.pageUrl !== '/tools/api-tester.html' && tool.name !== 'API Testing Suite'
            );
            
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * filteredTools.length);
            } while (newIndex === currentToolIndex && filteredTools.length > 1);
            currentToolIndex = newIndex;
            return filteredTools[newIndex];
        }
        
        function updateToolSuggestion() {
            const tool = getRandomTool();
            const card = document.getElementById('tool-suggestion-card');
            const iconEl = document.getElementById('tool-icon');
            const nameEl = document.getElementById('tool-name');
            const descEl = document.getElementById('tool-description');
            const btnEl = document.getElementById('tool-checkout-btn');
            
            if (!card || !iconEl || !nameEl || !descEl || !btnEl) return;
            
            btnEl.dataset.modalId = tool.modalId || '';
            btnEl.dataset.pageUrl = tool.pageUrl || '';
            card.style.opacity = '0';
            card.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
                iconEl.textContent = tool.icon;
                nameEl.textContent = tool.name;
                descEl.textContent = tool.description;
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 300);
        }
        
        function launchSuggestedTool() {
            const btnEl = document.getElementById('tool-checkout-btn');
            if (!btnEl) return;
            const modalId = btnEl.dataset.modalId;
            const pageUrl = btnEl.dataset.pageUrl;
            
            if (pageUrl) {
                window.location.href = pageUrl;
            } else if (modalId && typeof openModal === 'function') {
                window.location.href = `/#${modalId}`;
            } else {
                window.location.href = '/#tools';
            }
        }
        
        function initToolSuggestions() {
            updateToolSuggestion();
            refreshInterval = setInterval(() => {
                updateToolSuggestion();
            }, 10000);
        }
        
        window.addEventListener('beforeunload', () => {
            if (refreshInterval) clearInterval(refreshInterval);
        });
    </script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        #tool-suggestion-card { transition: opacity 0.3s ease, transform 0.3s ease; }
    </style>
</body>
</html>

