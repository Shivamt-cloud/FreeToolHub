<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Investment Calculator - FreeToolHub</title>
    <meta name="description" content="Calculate investment returns, compound interest, and retirement planning. Plan your financial future with our investment calculator.">
    <meta property="og:title" content="Investment Calculator - FreeToolHub">
    <meta property="og:description" content="Calculate investment returns, compound interest, and retirement planning">
    <meta property="og:url" content="https://freetoolhub.in/tools/investment-calculator.html">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Header Container -->
    <div id="app-header"></div>
    
    <!-- Main Content -->
    <main class="min-h-screen pb-16" style="padding-top: 6rem;">
        <style>
            @media (min-width: 1024px) {
                main {
                    padding-top: 8.5rem !important;
                }
            }
        </style>
        <div class="max-w-7xl mx-auto px-6 py-8">
            <!-- Page Header with Share -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">üìà Investment Calculator</h1>
                    <p class="text-gray-600 text-lg">Calculate investment returns, compound interest, and retirement planning</p>
                </div>
                <button onclick="shareTool()" class="mt-4 md:mt-0 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.885 12.938 9 12.482 9 12c0-.482-.115-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                    </svg>
                    Share Tool
                </button>
            </div>
            
            <!-- Breadcrumbs -->
            <nav class="mb-6 text-sm">
                <a href="/" class="text-blue-600 hover:text-blue-800">Home</a>
                <span class="mx-2 text-gray-400">/</span>
                <a href="/#tools" class="text-blue-600 hover:text-blue-800">Tools</a>
                <span class="mx-2 text-gray-400">/</span>
                <span class="text-gray-600">Investment Calculator</span>
            </nav>
            
            <!-- Tool Interface -->
            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <!-- Toast Notification Container -->
                <div id="toast-container" class="fixed top-24 right-4 z-50 space-y-2"></div>
                
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <!-- Input Section -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Quick Templates -->
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border-2 border-indigo-200">
                            <h4 class="text-lg font-bold mb-4 text-gray-700 flex items-center gap-2">
                                <span>‚ö°</span> Quick Investment Templates
                            </h4>
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                <button onclick="loadInvestmentTemplate('conservative')" class="bg-white hover:bg-indigo-100 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-indigo-300 hover:border-indigo-400 transition-all duration-200 transform hover:scale-105 shadow-sm">
                                    <div class="text-2xl mb-1">üõ°Ô∏è</div>
                                    <div class="text-sm">Conservative</div>
                                    <div class="text-xs text-gray-500">5% return</div>
                                </button>
                                <button onclick="loadInvestmentTemplate('moderate')" class="bg-white hover:bg-indigo-100 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-indigo-300 hover:border-indigo-400 transition-all duration-200 transform hover:scale-105 shadow-sm">
                                    <div class="text-2xl mb-1">‚öñÔ∏è</div>
                                    <div class="text-sm">Moderate</div>
                                    <div class="text-xs text-gray-500">7% return</div>
                                </button>
                                <button onclick="loadInvestmentTemplate('aggressive')" class="bg-white hover:bg-indigo-100 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-indigo-300 hover:border-indigo-400 transition-all duration-200 transform hover:scale-105 shadow-sm">
                                    <div class="text-2xl mb-1">üöÄ</div>
                                    <div class="text-sm">Aggressive</div>
                                    <div class="text-xs text-gray-500">10% return</div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Basic Investment Calculator -->
                        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200 shadow-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-xl font-bold text-gray-700 flex items-center gap-2">
                                    <span>üí∞</span> Investment Calculator
                                </h4>
                                <button onclick="resetInvestmentForm()" class="text-sm text-gray-600 hover:text-gray-800 font-medium flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-white transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                    Reset
                                </button>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-600 mb-2">Currency</label>
                                    <select id="investment-currency" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" onchange="updateInvestmentCurrencyDisplay()">
                                        <option value="USD">üá∫üá∏ US Dollar ($)</option>
                                        <option value="EUR">üá™üá∫ Euro (‚Ç¨)</option>
                                        <option value="GBP">üá¨üáß British Pound (¬£)</option>
                                        <option value="JPY">üáØüáµ Japanese Yen (¬•)</option>
                                        <option value="CAD">üá®üá¶ Canadian Dollar (C$)</option>
                                        <option value="AUD">üá¶üá∫ Australian Dollar (A$)</option>
                                        <option value="CHF">üá®üá≠ Swiss Franc (CHF)</option>
                                        <option value="CNY">üá®üá≥ Chinese Yuan (¬•)</option>
                                        <option value="INR">üáÆüá≥ Indian Rupee (‚Çπ)</option>
                                        <option value="BRL">üáßüá∑ Brazilian Real (R$)</option>
                                        <option value="SGD">üá∏üá¨ Singapore Dollar (S$)</option>
                                        <option value="AED">üá¶üá™ UAE Dirham (ÿØ.ÿ•)</option>
                                        <option value="SAR">üá∏üá¶ Saudi Riyal (Ô∑º)</option>
                                        <option value="ZAR">üáøüá¶ South African Rand (R)</option>
                                        <option value="MXN">üá≤üáΩ Mexican Peso ($)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>üíµ</span> Initial Investment
                                    </label>
                                    <div class="relative">
                                        <span id="investment-currency-prefix" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">$</span>
                                        <input type="number" id="initial-investment" min="0" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="10000" value="10000" oninput="formatInvestmentCurrency()">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Starting investment amount</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>üìÖ</span> Monthly Contribution
                                    </label>
                                    <div class="relative">
                                        <span id="monthly-contribution-prefix" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">$</span>
                                        <input type="number" id="monthly-contribution" min="0" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="500" value="500" oninput="formatInvestmentCurrency()">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Regular monthly deposits</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>üìä</span> Annual Return Rate (%)
                                    </label>
                                    <input type="number" id="annual-return" step="0.01" min="0" max="100" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="7" value="7">
                                    <p class="text-xs text-gray-500 mt-1">Expected annual return (APR)</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>‚è∞</span> Investment Period (Years)
                                    </label>
                                    <input type="number" id="investment-years" min="1" max="100" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="30" value="30">
                                    <p class="text-xs text-gray-500 mt-1">Investment duration</p>
                                </div>
                            </div>
                            <button onclick="calculateInvestment()" id="calculate-investment-btn" class="w-full mt-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 text-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                <span>Calculate Investment</span>
                            </button>
                        </div>

                        <!-- Retirement Planning -->
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200 shadow-lg">
                            <h4 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2">
                                <span>üèñÔ∏è</span> Retirement Planning
                            </h4>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Current Age</label>
                                        <input type="number" id="current-age" min="18" max="100" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all" placeholder="30" value="30">
                                        <p class="text-xs text-gray-500 mt-1">Your current age</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Retirement Age</label>
                                        <input type="number" id="retirement-age" min="50" max="100" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all" placeholder="65" value="65">
                                        <p class="text-xs text-gray-500 mt-1">Target retirement age</p>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>üíº</span> Current Savings
                                    </label>
                                    <div class="relative">
                                        <span id="current-savings-prefix" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">$</span>
                                        <input type="number" id="current-savings" min="0" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all" placeholder="50000" value="50000" oninput="formatInvestmentCurrency()">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Existing retirement savings</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                                        <span>üéØ</span> Desired Annual Income
                                    </label>
                                    <div class="relative">
                                        <span id="desired-income-prefix" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">$</span>
                                        <input type="number" id="desired-income" min="0" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all" placeholder="80000" value="80000" oninput="formatInvestmentCurrency()">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Annual income needed in retirement</p>
                                </div>
                            </div>
                            <button onclick="calculateRetirement()" id="calculate-retirement-btn" class="w-full mt-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-4 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 text-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                <span>Plan Retirement</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Results Section -->
                    <div class="lg:col-span-1 space-y-6">
                        <!-- Investment Results -->
                        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200 shadow-lg">
                            <h4 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2">
                                <span>üìä</span> Investment Results
                            </h4>
                            <div id="investment-results" class="space-y-3">
                                <div class="text-center text-gray-500 py-8">
                                    <div class="text-4xl mb-2">üí°</div>
                                    <p class="text-sm">Enter investment details and click "Calculate Investment"</p>
                                </div>
                            </div>
                        </div>

                        <!-- Retirement Results -->
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200 shadow-lg">
                            <h4 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2">
                                <span>üèñÔ∏è</span> Retirement Analysis
                            </h4>
                            <div id="retirement-results" class="space-y-3">
                                <div class="text-center text-gray-500 py-8">
                                    <div class="text-4xl mb-2">üéØ</div>
                                    <p class="text-sm">Enter retirement details and click "Plan Retirement"</p>
                                </div>
                            </div>
                        </div>

                        <!-- Growth Projection Chart -->
                        <div class="bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 border-2 border-gray-200 shadow-lg">
                            <h4 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2">
                                <span>üìà</span> Growth Projection
                            </h4>
                            <div id="growth-projection" class="max-h-96 overflow-y-auto">
                                <div class="text-center text-gray-500 py-8">
                                    <div class="text-4xl mb-2">üìä</div>
                                    <p class="text-sm">Calculate investment to see growth projection</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tool Suggestions Widget -->
                    <div class="lg:col-span-1 hidden lg:block">
                        <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6 border-2 border-purple-200 shadow-lg h-fit sticky top-28">
                            <div class="flex items-center justify-between mb-5">
                                <h4 class="text-xl font-bold text-gray-800">‚ú® Explore Tools</h4>
                                <div class="flex items-center space-x-1">
                                    <div class="w-2.5 h-2.5 bg-purple-500 rounded-full animate-pulse"></div>
                                    <span class="text-xs text-gray-500 font-medium">Live</span>
                                </div>
                            </div>
                            
                            <div id="tool-suggestion-card" class="bg-white rounded-xl p-6 shadow-lg transition-all duration-500 fade-in">
                                <div id="tool-icon" class="text-6xl mb-4 text-center">üßÆ</div>
                                <h5 id="tool-name" class="text-2xl font-bold text-gray-800 mb-3 text-center">Loading...</h5>
                                <p id="tool-description" class="text-base text-gray-600 mb-6 text-center leading-relaxed">Discover amazing tools</p>
                                <button id="tool-checkout-btn" onclick="launchSuggestedTool()" class="w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white font-bold py-3.5 px-6 rounded-xl hover:from-purple-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 text-lg">
                                    <span>Check it out</span>
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer Container -->
    <div id="app-footer"></div>
    
    <!-- Scripts -->
    <script src="/js/common-functions.js"></script>
    <script src="/js/widgets.js"></script>
    <script src="/js/components/HeaderLoader.js"></script>
    <script src="/js/components/FooterLoader.js"></script>
    <script src="/js/components/ShareButton.js"></script>
    <script src="/js/widgets-init.js"></script>
    
    <!-- Investment Calculator Dependencies -->
    <script src="/src/js/InvestmentCalculator.js?v=1&t=1726745000"></script>
    
    <!-- Investment Calculator JavaScript -->
    <script>
        let investmentCalculator = null;

        function initializeInvestmentCalculator() {
            try {
                if (typeof InvestmentCalculator !== 'undefined') {
                    investmentCalculator = new InvestmentCalculator();
                    console.log('‚úÖ Investment Calculator initialized successfully');
                    updateInvestmentCurrencyDisplay();
                } else {
                    console.error('‚ùå InvestmentCalculator class not found');
                }
            } catch (error) {
                console.error('‚ùå Error initializing Investment Calculator:', error);
            }
        }

        // Toast notification function
        function showNotification(message, type = 'info') {
            const container = document.getElementById('toast-container');
            if (!container) return;
            
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500';
            const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            
            toast.className = `${bgColor} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`;
            toast.innerHTML = `
                <span class="text-xl">${icon}</span>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="text-white hover:text-gray-200 font-bold">√ó</button>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, type === 'error' ? 5000 : 3000);
        }

        // Format currency display
        function formatInvestmentCurrency() {
            if (!investmentCalculator) return;
            const currency = investmentCalculator.currencies[investmentCalculator.selectedCurrency];
            const symbol = currency ? currency.symbol : '$';
            document.getElementById('investment-currency-prefix').textContent = symbol;
            document.getElementById('monthly-contribution-prefix').textContent = symbol;
            document.getElementById('current-savings-prefix').textContent = symbol;
            document.getElementById('desired-income-prefix').textContent = symbol;
        }

        function updateInvestmentCurrencyDisplay() {
            if (!investmentCalculator) return;
            const currency = document.getElementById('investment-currency').value;
            investmentCalculator.selectedCurrency = currency;
            formatInvestmentCurrency();
        }

        // Load quick templates
        function loadInvestmentTemplate(type) {
            const templates = {
                conservative: { principal: 10000, monthly: 500, return: 5, years: 30 },
                moderate: { principal: 10000, monthly: 500, return: 7, years: 30 },
                aggressive: { principal: 10000, monthly: 500, return: 10, years: 30 }
            };
            
            const template = templates[type];
            if (!template) return;
            
            document.getElementById('initial-investment').value = template.principal;
            document.getElementById('monthly-contribution').value = template.monthly;
            document.getElementById('annual-return').value = template.return;
            document.getElementById('investment-years').value = template.years;
            
            formatInvestmentCurrency();
            showNotification(`Loaded ${type.charAt(0).toUpperCase() + type.slice(1)} investment template`, 'success');
        }

        // Reset form
        function resetInvestmentForm() {
            document.getElementById('initial-investment').value = '';
            document.getElementById('monthly-contribution').value = '';
            document.getElementById('annual-return').value = '';
            document.getElementById('investment-years').value = '';
            document.getElementById('current-age').value = '';
            document.getElementById('retirement-age').value = '';
            document.getElementById('current-savings').value = '';
            document.getElementById('desired-income').value = '';
            
            document.getElementById('investment-results').innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-2">üí°</div>
                    <p class="text-sm">Enter investment details and click "Calculate Investment"</p>
                </div>
            `;
            document.getElementById('retirement-results').innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-2">üéØ</div>
                    <p class="text-sm">Enter retirement details and click "Plan Retirement"</p>
                </div>
            `;
            document.getElementById('growth-projection').innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-2">üìä</div>
                    <p class="text-sm">Calculate investment to see growth projection</p>
                </div>
            `;
            showNotification('Form reset successfully', 'info');
        }

        function calculateInvestment() {
            if (!investmentCalculator) {
                showNotification('Investment Calculator not initialized. Please refresh the page.', 'error');
                return;
            }

            const principal = parseFloat(document.getElementById('initial-investment').value) || 0;
            const monthlyContribution = parseFloat(document.getElementById('monthly-contribution').value) || 0;
            const annualReturn = parseFloat(document.getElementById('annual-return').value);
            const years = parseFloat(document.getElementById('investment-years').value);

            if (!annualReturn || annualReturn <= 0 || annualReturn > 100) {
                showNotification('Please enter a valid annual return rate (0-100%).', 'warning');
                document.getElementById('annual-return').focus();
                return;
            }

            if (!years || years <= 0 || years > 100) {
                showNotification('Please enter a valid investment period (1-100 years).', 'warning');
                document.getElementById('investment-years').focus();
                return;
            }

            const calculateBtn = document.getElementById('calculate-investment-btn');
            const originalHTML = calculateBtn.innerHTML;
            calculateBtn.disabled = true;
            calculateBtn.innerHTML = '<span class="inline-block animate-spin">‚è≥</span><span> Calculating...</span>';

            setTimeout(() => {
                const result = investmentCalculator.calculateInvestment(principal, monthlyContribution, annualReturn, years);
                if (result.success) {
                    showInvestmentResults(result);
                    showNotification('Investment calculated successfully!', 'success');
                } else {
                    showNotification('Error calculating investment: ' + result.error, 'error');
                }
                calculateBtn.disabled = false;
                calculateBtn.innerHTML = originalHTML;
            }, 300);
        }

        function showInvestmentResults(result) {
            const currency = investmentCalculator.currencies[investmentCalculator.selectedCurrency];
            const symbol = currency ? currency.symbol : '$';
            
            // Calculate percentages for visualization
            const contributionPercent = ((result.totalContributions / result.totalValue) * 100).toFixed(1);
            const interestPercent = ((result.totalInterest / result.totalValue) * 100).toFixed(1);
            
            document.getElementById('investment-results').innerHTML = `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-white rounded-lg p-5 border-2 border-blue-300 shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-600">üí∞ Total Value</span>
                            <span class="text-3xl font-bold text-blue-600">${symbol}${result.totalValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Future value of your investment</div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-white rounded-lg p-4 border-2 border-indigo-300 shadow-sm">
                            <div class="text-xs text-gray-600 mb-1">Total Contributions</div>
                            <div class="text-lg font-bold text-indigo-600">${symbol}${result.totalContributions.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                <div class="bg-indigo-500 h-1.5 rounded-full" style="width: ${contributionPercent}%"></div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">${contributionPercent}%</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-2 border-green-300 shadow-sm">
                            <div class="text-xs text-gray-600 mb-1">Total Interest</div>
                            <div class="text-lg font-bold text-green-600">${symbol}${result.totalInterest.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                <div class="bg-green-500 h-1.5 rounded-full" style="width: ${interestPercent}%"></div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">${interestPercent}%</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-2 border-purple-300 shadow-sm">
                            <div class="text-xs text-gray-600 mb-1">ROI</div>
                            <div class="text-xl font-bold text-purple-600">${result.roi.toFixed(2)}%</div>
                            <div class="text-xs text-gray-500 mt-1">Return on investment</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-2 border-cyan-300 shadow-sm">
                            <div class="text-xs text-gray-600 mb-1">Annualized Return</div>
                            <div class="text-xl font-bold text-cyan-600">${result.annualizedReturn.toFixed(2)}%</div>
                            <div class="text-xs text-gray-500 mt-1">Per year average</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-3 border border-blue-200">
                        <div class="text-xs font-semibold text-gray-700 mb-2">Value Breakdown</div>
                        <div class="flex items-center gap-2 mb-1">
                            <div class="flex-1 bg-indigo-500 rounded h-3" style="width: ${contributionPercent}%"></div>
                            <span class="text-xs text-gray-600">${contributionPercent}% Principal</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="flex-1 bg-green-500 rounded h-3" style="width: ${interestPercent}%"></div>
                            <span class="text-xs text-gray-600">${interestPercent}% Interest</span>
                        </div>
                    </div>
                </div>
            `;

            // Show growth projection
            showGrowthProjection(result);
        }

        function calculateRetirement() {
            if (!investmentCalculator) {
                showNotification('Investment Calculator not initialized. Please refresh the page.', 'error');
                return;
            }

            const currentAge = parseInt(document.getElementById('current-age').value);
            const retirementAge = parseInt(document.getElementById('retirement-age').value);
            const currentSavings = parseFloat(document.getElementById('current-savings').value) || 0;
            const desiredIncome = parseFloat(document.getElementById('desired-income').value);
            const monthlyContribution = parseFloat(document.getElementById('monthly-contribution').value) || 0;
            const annualReturn = parseFloat(document.getElementById('annual-return').value) || 7;

            if (!currentAge || currentAge < 18 || currentAge > 100) {
                showNotification('Please enter a valid current age (18-100).', 'warning');
                document.getElementById('current-age').focus();
                return;
            }

            if (!retirementAge || retirementAge < 50 || retirementAge > 100 || retirementAge <= currentAge) {
                showNotification('Please enter a valid retirement age (greater than current age, 50-100).', 'warning');
                document.getElementById('retirement-age').focus();
                return;
            }

            if (!desiredIncome || desiredIncome <= 0) {
                showNotification('Please enter a valid desired annual income.', 'warning');
                document.getElementById('desired-income').focus();
                return;
            }

            const retirementBtn = document.getElementById('calculate-retirement-btn');
            const originalHTML = retirementBtn.innerHTML;
            retirementBtn.disabled = true;
            retirementBtn.innerHTML = '<span class="inline-block animate-spin">‚è≥</span><span> Planning...</span>';

            setTimeout(() => {
                const result = investmentCalculator.calculateRetirement(currentAge, retirementAge, currentSavings, monthlyContribution, annualReturn, desiredIncome);
                if (result.success) {
                    showRetirementResults(result);
                    showNotification('Retirement plan calculated successfully!', 'success');
                } else {
                    showNotification('Error calculating retirement: ' + result.error, 'error');
                }
                retirementBtn.disabled = false;
                retirementBtn.innerHTML = originalHTML;
            }, 300);
        }

        function showRetirementResults(result) {
            const currency = investmentCalculator.currencies[investmentCalculator.selectedCurrency];
            const symbol = currency ? currency.symbol : '$';
            
            const fundPercent = result.requiredFund > 0 ? ((result.totalRetirementFund / result.requiredFund) * 100).toFixed(1) : 100;
            const shortfallPercent = result.requiredFund > 0 ? ((result.shortfall / result.requiredFund) * 100).toFixed(1) : 0;
            
            document.getElementById('retirement-results').innerHTML = `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-white rounded-lg p-5 border-2 ${result.isSufficient ? 'border-green-300' : 'border-yellow-300'} shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-600">üí∞ Total Retirement Fund</span>
                            <span class="text-2xl font-bold ${result.isSufficient ? 'text-green-600' : 'text-yellow-600'}">${symbol}${result.totalRetirementFund.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Projected savings at retirement</div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 border-2 border-blue-300 shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-600">üéØ Required Fund</span>
                            <span class="text-xl font-bold text-blue-600">${symbol}${result.requiredFund.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Fund needed for desired income</div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 border-2 ${result.isSufficient ? 'border-green-300' : 'border-red-300'} shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-600">üìä Status</span>
                            <span class="text-lg font-bold ${result.isSufficient ? 'text-green-600' : 'text-red-600'}">
                                ${result.isSufficient ? '‚úì Sufficient' : '‚úó Insufficient'}
                            </span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="${result.isSufficient ? 'bg-green-500' : 'bg-red-500'} h-2 rounded-full" style="width: ${Math.min(fundPercent, 100)}%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">${fundPercent}% of required fund</div>
                    </div>
                    
                    ${!result.isSufficient ? `
                        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border-2 border-yellow-300 shadow-sm">
                            <div class="text-sm font-semibold text-gray-700 mb-2">‚ö†Ô∏è Shortfall</div>
                            <div class="text-xl font-bold text-red-600 mb-2">${symbol}${result.shortfall.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-red-500 h-2 rounded-full" style="width: ${shortfallPercent}%"></div>
                            </div>
                            <div class="text-xs text-gray-600 mt-2">Consider increasing monthly contributions or extending retirement age</div>
                        </div>
                    ` : `
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border-2 border-green-300 shadow-sm">
                            <div class="text-sm font-semibold text-gray-700 mb-2">‚úÖ Surplus</div>
                            <div class="text-xl font-bold text-green-600">${symbol}${(result.totalRetirementFund - result.requiredFund).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div>
                            <div class="text-xs text-gray-600 mt-2">You're on track! Consider early retirement</div>
                        </div>
                    `}
                </div>
            `;
        }

        function showGrowthProjection(result) {
            const currency = investmentCalculator.currencies[investmentCalculator.selectedCurrency];
            const symbol = currency ? currency.symbol : '$';
            const years = parseInt(document.getElementById('investment-years').value) || 30;
            const principal = parseFloat(document.getElementById('initial-investment').value) || 0;
            const monthlyContribution = parseFloat(document.getElementById('monthly-contribution').value) || 0;
            const annualReturn = parseFloat(document.getElementById('annual-return').value) || 7;
            
            // Calculate year-by-year projection
            let projectionHtml = '<div class="space-y-3">';
            const projectionPoints = Math.min(12, years);
            const monthlyRate = annualReturn / 100 / 12;
            const totalMonths = years * 12;
            
            let currentValue = principal;
            const yearValues = [];
            
            for (let year = 1; year <= years; year++) {
                const monthsInYear = 12;
                for (let month = 1; month <= monthsInYear; month++) {
                    currentValue = currentValue * (1 + monthlyRate) + monthlyContribution;
                }
                yearValues.push({
                    year: year,
                    value: currentValue
                });
            }
            
            // Show key milestone years
            const milestones = [1, 5, 10, 15, 20, 25, 30].filter(y => y <= years);
            if (milestones.length === 0) milestones.push(years);
            
            milestones.forEach((milestone, index) => {
                const yearData = yearValues[milestone - 1];
                if (!yearData) return;
                
                const maxValue = result.totalValue;
                const barWidth = (yearData.value / maxValue) * 100;
                
                projectionHtml += `
                    <div class="bg-white rounded-lg p-3 border-2 border-gray-200 shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-700">Year ${milestone}</span>
                            <span class="text-lg font-bold text-blue-600">${symbol}${yearData.value.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-blue-400 to-indigo-500 h-2 rounded-full transition-all duration-500" style="width: ${barWidth}%"></div>
                        </div>
                    </div>
                `;
            });
            
            if (years > 30) {
                projectionHtml += `
                    <div class="bg-white rounded-lg p-3 border-2 border-gray-200 shadow-sm">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-gray-700">Year ${years} (Final)</span>
                            <span class="text-lg font-bold text-green-600">${symbol}${result.totalValue.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-green-400 to-emerald-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                `;
            }
            
            projectionHtml += '</div>';
            document.getElementById('growth-projection').innerHTML = projectionHtml;
        }

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initializeInvestmentCalculator();
                formatInvestmentCurrency();
            }, 500);
        });
    </script>
    
    <!-- Tool Suggestions Widget Script -->
    <script>
        const availableTools = [
            { icon: 'üßÆ', name: 'Smart Calculator', description: 'Advanced calculator with scientific functions', pageUrl: '/tools/calculator.html' },
            { icon: '‚è∞', name: 'Study Timer', description: 'Pomodoro technique with focus sessions', pageUrl: '/tools/study-timer.html' },
            { icon: 'üìù', name: 'Note Taker', description: 'Advanced text summarization & notes', pageUrl: '/tools/note-taker.html' },
            { icon: 'üßÆ', name: 'Math Solver', description: 'Step-by-step math problem solving', pageUrl: '/tools/math-solver.html' },
            { icon: 'üìä', name: 'Grade Calculator', description: 'GPA tracking & academic analysis', pageUrl: '/tools/grade-calculator.html' },
            { icon: 'üìñ', name: 'Citation Generator', description: 'Multiple citation formats & styles', pageUrl: '/tools/citation-generator.html' },
            { icon: 'üéØ', name: 'Study Planner', description: 'Study scheduling & time management', pageUrl: '/tools/study-planner.html' },
            { icon: 'üìö', name: 'Flashcard Generator', description: 'Spaced repetition learning cards', pageUrl: '/tools/flashcard-generator.html' },
            { icon: 'üìà', name: 'Progress Tracker', description: 'Academic progress & analytics', pageUrl: '/tools/progress-tracker.html' },
            { icon: 'üéÇ', name: 'Age Calculator', description: 'Precise age & date calculations', pageUrl: '/tools/age-calculator.html' },
            { icon: '‚öñÔ∏è', name: 'BMI Calculator', description: 'Health analysis & recommendations', pageUrl: '/tools/bmi-calculator.html' },
            { icon: 'üè¶', name: 'Loan Calculator', description: 'Professional loan calculation & analysis', pageUrl: '/tools/loan-calculator.html' },
            { icon: 'üí∞', name: 'Tax Calculator', description: 'Tax calculation & planning', modalId: 'tax-calculator-modal' },
            { icon: 'üìä', name: 'Business Metrics', description: 'Business performance analytics', modalId: 'business-metrics-modal' },
            { icon: 'üí±', name: 'Currency Converter', description: 'Real-time currency conversion', modalId: 'currency-converter-modal' },
            { icon: 'üè†', name: 'Retirement Planner', description: 'Retirement savings calculator', modalId: 'retirement-calculator-modal' },
            { icon: 'üè°', name: 'Mortgage Calculator', description: 'Mortgage payment calculations', modalId: 'mortgage-calculator-modal' },
            { icon: 'üí≥', name: 'Budget Planner', description: 'Personal budget planning tool', modalId: 'budget-planner-modal' },
            { icon: 'üíµ', name: 'Salary Calculator', description: 'Salary & tax calculations', modalId: 'salary-calculator-modal' },
            { icon: 'üîß', name: 'JSON Formatter', description: 'Format & validate JSON data', modalId: 'json-formatter-modal' },
            { icon: 'üìÑ', name: 'XML Formatter', description: 'Format & validate XML data', modalId: 'xml-formatter-modal' },
            { icon: 'üîê', name: 'Base64 Encoder', description: 'Encode & decode Base64 data', modalId: 'base64-encoder-modal' },
            { icon: 'üîê', name: 'Hash Generator', description: 'Generate multiple hash types', modalId: 'hash-generator-modal' },
            { icon: 'üåê', name: 'URL Encoder', description: 'Encode & decode URLs', modalId: 'url-encoder-modal' },
            { icon: 'üîç', name: 'Regex Tester', description: 'Test & debug regex patterns', modalId: 'regex-tester-modal' },
            { icon: 'üõ†Ô∏è', name: 'CSS/JS Minifier', description: 'Minify CSS & JavaScript code', modalId: 'css-js-minifier-modal' },
            { icon: 'üé®', name: 'Color Palette', description: 'Generate beautiful color palettes', modalId: 'color-palette-modal' },
            { icon: 'üìù', name: 'Lorem Ipsum', description: 'Generate Lorem Ipsum text', modalId: 'lorem-ipsum-modal' },
            { icon: 'üïê', name: 'Timestamp Converter', description: 'Convert timestamps & dates', modalId: 'timestamp-converter-modal' },
            { icon: 'üîì', name: 'PDF Password Remover', description: 'Remove password from PDFs', modalId: 'pdf-password-remover-modal' },
            { icon: 'üìÑ', name: 'PDF Merger', description: 'Combine multiple PDFs', modalId: 'pdf-merger-modal' },
            { icon: '‚úÇÔ∏è', name: 'PDF Splitter', description: 'Split PDFs into separate pages', modalId: 'pdf-splitter-modal' },
            { icon: 'üîí', name: 'PDF Encryptor', description: 'Add password to PDFs', modalId: 'pdf-encryptor-modal' },
            { icon: 'üñºÔ∏è', name: 'PDF to Images', description: 'Convert PDF pages to images', modalId: 'pdf-to-images-modal' },
            { icon: 'üì∏', name: 'Image to PDF', description: 'Convert images to PDF documents', modalId: 'image-to-pdf-modal' },
            { icon: 'üìè', name: 'Image Compressor', description: 'Reduce image file size', modalId: 'image-compressor-modal' },
            { icon: 'üé®', name: 'Image Converter', description: 'Convert between image formats', modalId: 'image-converter-modal' },
            { icon: 'üìê', name: 'Image Resizer', description: 'Resize images to any dimensions', modalId: 'image-resizer-modal' },
            { icon: '‚úçÔ∏è', name: 'Signature Generator', description: 'Create digital signatures', modalId: 'signature-generator-modal' },
            { icon: 'üìä', name: 'CSV to JSON', description: 'Convert CSV to JSON format', modalId: 'csv-json-converter-modal' }
        ];
        
        let currentToolIndex = -1;
        let refreshInterval = null;
        
        function getRandomTool() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * availableTools.length);
            } while (newIndex === currentToolIndex && availableTools.length > 1);
            currentToolIndex = newIndex;
            return availableTools[newIndex];
        }
        
        function updateToolSuggestion() {
            const tool = getRandomTool();
            const card = document.getElementById('tool-suggestion-card');
            const iconEl = document.getElementById('tool-icon');
            const nameEl = document.getElementById('tool-name');
            const descEl = document.getElementById('tool-description');
            const btnEl = document.getElementById('tool-checkout-btn');
            
            if (!card || !iconEl || !nameEl || !descEl || !btnEl) return;
            
            btnEl.dataset.modalId = tool.modalId || '';
            btnEl.dataset.pageUrl = tool.pageUrl || '';
            card.style.opacity = '0';
            card.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
                iconEl.textContent = tool.icon;
                nameEl.textContent = tool.name;
                descEl.textContent = tool.description;
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 300);
        }
        
        function launchSuggestedTool() {
            const btnEl = document.getElementById('tool-checkout-btn');
            if (!btnEl) return;
            const modalId = btnEl.dataset.modalId;
            const pageUrl = btnEl.dataset.pageUrl;
            
            if (pageUrl) {
                window.location.href = pageUrl;
            } else if (modalId && typeof openModal === 'function') {
                window.location.href = `/#${modalId}`;
            } else {
                window.location.href = '/#tools';
            }
        }
        
        function initToolSuggestions() {
            updateToolSuggestion();
            refreshInterval = setInterval(() => {
                updateToolSuggestion();
            }, 10000);
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initToolSuggestions, 1000);
        });
        
        window.addEventListener('beforeunload', () => {
            if (refreshInterval) clearInterval(refreshInterval);
        });
    </script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(100%); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        .animate-slide-in { animation: slideIn 0.3s ease-out; }
        #tool-suggestion-card { transition: opacity 0.3s ease, transform 0.3s ease; }
        
        /* Input focus effects */
        input:focus, select:focus {
            transform: scale(1.01);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* Button hover effects */
        button:not(:disabled):hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
        }
    </style>
</body>
</html>


